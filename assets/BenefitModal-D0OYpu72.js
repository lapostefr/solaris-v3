import{S as z}from"./Icon-C-Sturzh.js";import{S as D}from"./Picture-BXByxoYg.js";import{S as E}from"./Button-CxIFeNFW.js";import{b as U,c as j,f as O}from"./closeOnFocusOut-D0QTlgAv.js";import{u as W}from"./index-a4aneQim.js";import{d as G,r as H,c as v,w as J,o as K,a as Q,U as M,V as T,f as s,e as $,t as S,G as R,g as d,y as i,v as f,C as c,B as V,x as X,H as A,A as _,h as L,F as Y,z as Z,T as x}from"./vue.esm-bundler-BiAlgFmf.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P=G({name:"BenefitModal",components:{SolarisIcon:z,SolarisButton:E,SolarisPicture:D},directives:{bodyNoScroll:U,closeOnFocusOut:j,focusTrap:O},model:{prop:"showModal",event:"changed"},props:{logo:{required:!1,type:Object},modals:{required:!0,type:Array},disableClickOutside:{required:!1,default:!1,type:Boolean},isLoading:{required:!1,default:!1,type:Boolean},focusTrap:{required:!1,default:!1,type:Boolean},showModal:{required:!1,default:!1,type:Boolean},showTitle:{required:!0,default:!0,type:Boolean},titleLevel:{required:!1,default:"h1",type:String},padding:{required:!1,default:"default",type:String},closable:{required:!1,default:!0,type:Boolean}},emits:["changed","toggledModal","currentId"],setup(e,r){let g=!1;const l=H(0),h=v({get(){return e.showModal},set(a){r.emit("changed",a)}}),w=v(()=>e.modals.find((a,t)=>t===l.value)),B=v(()=>l.value===0?"Fermer":"Précédent"),C=v(()=>l.value===e.modals.length-1?"Fermer":"Suivant"),y=v(()=>{var a,t;return(t=(a=w.value)==null?void 0:a.background)==null?void 0:t.url}),q=()=>{e.disableClickOutside||u()},u=()=>(e.closable&&r.emit("changed"),l.value=0,g=!1,!1),I=()=>{if(l.value===0){u();return}l.value-=1,m(l.value)},b=()=>{const a=e.modals.length-1;if(l.value===a-1||l.value<a){l.value+=1,m(l.value);return}u()},p=a=>{a&&r.emit("currentId",a)},m=a=>{var k;const t=(k=e.modals[a])==null?void 0:k.id;p(t),l.value=a},o=()=>{var t;const a=(t=e.modals[0])==null?void 0:t.id;p(a)},n=()=>{const a=e.modals.find((t,k)=>k===l.value);return e.showTitle||a==null?void 0:a.title},N=()=>e.showTitle?"modal__title":void 0;J(h,a=>{typeof window>"u"||(a&&(document.onkeydown=t=>{t.key==="Escape"&&u()}),r.emit("toggledModal"),o())},{immediate:!0});const F=()=>{const a=W();h.value&&!g&&(g=!0,O.initFocus(a.value))};return K(()=>{F(),o()}),Q(()=>{F()}),{currentStep:l,modal:w,labelPrev:B,labelNext:C,backgroundUrl:y,show:h,close:u,handleOverlayClick:q,selectedItem:m,setAriaLabel:n,setAriaLabelledBy:N,goBack:I,goNext:b}}}),ae={key:0,ref:"modal",class:"modal"},le=["aria-label","aria-labelledby","aria-modal","open"],oe={class:"modal__inner"},te=["aria-label"],se=["src","alt"],ne={key:0},ie={key:0,class:"modal__additional"},re={key:0,class:"modal__actions"},de={key:1,class:"modal__stepActions"},ue={role:"navigation","aria-label":"Pagination"},ce={class:"modal__bulletContainer"},me=["title","aria-current","onClick"],fe={class:"visually-hidden"};function pe(e,r,g,l,h,w){const B=M("SolarisPicture"),C=M("SolarisIcon"),y=M("SolarisButton"),q=T("body-no-scroll"),u=T("focus-trap"),I=T("close-on-focus-out");return s(),$(x,{name:"open"},{default:S(()=>{var b,p,m;return[e.show?R((s(),d("section",ae,[i("div",{class:"modal__overlay",onClick:r[0]||(r[0]=(...o)=>e.handleOverlayClick&&e.handleOverlayClick(...o))}),i("dialog",{id:"modal__container",class:f(["modal__container",[{"modal--no-title":!e.showTitle}]]),"aria-label":e.setAriaLabel(),"aria-labelledby":e.setAriaLabelledBy(),"aria-modal":e.show,open:e.show,role:"dialog"},[i("div",oe,[i("div",{class:f(["modal__top",{isBackground:(b=e.modal)==null?void 0:b.background}])},[(p=e.modal)!=null&&p.background?(s(),$(B,{key:0,class:"modal__picture","default-source":e.modal.background,width:380,height:380},null,8,["default-source"])):c("",!0),e.closable&&e.close?(s(),d("button",{key:1,class:"modal__closer","aria-label":`Fermer la fenêtre "${(m=e.modal)==null?void 0:m.title}"`,onClick:r[1]||(r[1]=(...o)=>e.close&&e.close(...o))},[V(C,{size:"small",name:"action-close"})],8,te)):c("",!0),e.logo?(s(),d("img",{key:2,class:"modal__logo",src:e.logo.url,alt:e.logo.alt},null,8,se)):c("",!0)],2),i("div",{class:f(["modal__contentWrapper",[`modal__contentWrapper--${e.padding}`]])},[e.showTitle?(s(),$(X(e.titleLevel),{key:0,id:"modal__title",class:"modal__title"},{default:S(()=>{var o;return[A(_((o=e.modal)==null?void 0:o.title),1)]}),_:1})):c("",!0),i("div",{class:f(["modal__content",{"modal__content--withAdditional":e.$slots.additional}])},[L(e.$slots,"description",{step:e.currentStep},()=>{var o,n;return[(o=e.modal)!=null&&o.description?(s(),d("span",ne,_((n=e.modal)==null?void 0:n.description),1)):c("",!0)]},!0),e.$slots.additional?(s(),d("div",ie,[L(e.$slots,"additional",{step:e.currentStep},void 0,!0)])):c("",!0)],2)],2),i("div",{class:f(["modal__bottom",[`modal__bottom--${e.padding}`]])},[e.modals.length===1?(s(),d("div",re,[L(e.$slots,"actions",{},void 0,!0)])):(s(),d("div",de,[V(y,{class:"modal__action",type:"ghost",color:"default",onClick:e.goBack},{default:S(()=>[A(_(e.labelPrev),1)]),_:1},8,["onClick"]),i("nav",ue,[i("ol",ce,[(s(!0),d(Y,null,Z(e.modals,(o,n)=>(s(),d("li",{key:n,class:"modal__bullet-item"},[i("button",{class:f(["modal__bullet",{"modal__bullet--current":e.currentStep===n}]),title:`Page ${n+1}`,"aria-current":e.currentStep===n?"page":void 0,onClick:N=>e.selectedItem(n)},[i("span",fe,"Page "+_(n+1),1)],10,me)]))),128))])]),V(y,{class:"modal__action",color:"default",onClick:e.goNext},{default:S(()=>[A(_(e.labelNext),1)]),_:1},8,["onClick"])]))],2)])],10,le)])),[[q,e.show],[u,e.focusTrap],[I,!0]]):c("",!0)]}),_:3})}const Se=ee(P,[["render",pe],["__scopeId","data-v-491c4f2e"]]);P.__docgenInfo={displayName:"BenefitModal",exportName:"default",description:"",tags:{},props:[{name:"logo",type:{name:"Logo"},required:!1},{name:"modals",type:{name:"Array<ModalType>"},required:!0},{name:"disableClickOutside",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"isLoading",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"focusTrap",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"v-model",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"showTitle",type:{name:"boolean"},required:!0,defaultValue:{func:!1,value:"true"}},{name:"titleLevel",values:["h1","h2","h3","h4","h5","h6"],type:{name:"string"},required:!1,defaultValue:{func:!1,value:"'h1'"}},{name:"padding",values:["small","default","large"],type:{name:"string"},required:!1,defaultValue:{func:!1,value:"'default'"}},{name:"closable",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"true"}}],events:[{name:"changed"},{name:"toggledModal"},{name:"currentId"}],slots:[{name:"description",scoped:!0,bindings:[{name:"step",title:"binding"}]},{name:"additional",scoped:!0,bindings:[{name:"step",title:"binding"}]},{name:"actions"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/organisms/Modal/BenefitModal/BenefitModal.vue"]};export{Se as S};
