import{d as ue,o as d,e as p,F as R,H as J,y as T,B as f,v as w,m as Fe,r as g,a as Me,c as D,l as Le,t as W,b as B,J as $,I as C,z as Z,G as Ie,S as Ce,L as ne,u as V,x as te,C as Ve,q as Ne}from"./vue.esm-bundler-DbnnIJWB.js";import{S as x}from"./Icon-BFYv-dj3.js";import{_ as de}from"./Flag-C03qRat4.js";import{S as qe}from"./Picture-DrwsyF7G.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as Pe}from"./Input-DQLpWQzd.js";import{o as De}from"./index-7Yv3mQsR.js";import{f as Ue}from"./generateId-CVaf2GGW.js";import{L as ie}from"./types-DKXD8uiR.js";const Ae=["id","aria-live"],ve=ue({__name:"Message",props:{dataError:{},error:{},id:{},message:{}},setup(u){return(l,K)=>{var F,c,j,v,m,U,M,L,s,n,I,N,_;return(F=l.dataError)!=null&&F.active&&((c=l.dataError)!=null&&c.message)||l.error||l.message?(d(),p("p",{key:0,id:(j=l.dataError)!=null&&j.active&&((v=l.dataError)!=null&&v.message)||l.error?`error-message--${l.id}`:`message--${l.id}`,class:w([{"lp-message":l.message&&!((m=l.dataError)!=null&&m.active)},{"lp-message--error":((U=l.dataError)==null?void 0:U.active)&&((M=l.dataError)==null?void 0:M.message)}]),"aria-live":(L=l.dataError)!=null&&L.active&&((s=l.dataError)!=null&&s.message)||l.error?"polite":null},[(n=l.dataError)!=null&&n.active&&((I=l.dataError)!=null&&I.message)||l.error?(d(),p(R,{key:0},[J(T((N=l.dataError)==null?void 0:N.message),1)],64)):f("",!0),l.message&&!((_=l.dataError)!=null&&_.active)?(d(),p(R,{key:1},[J(T(l.message),1)],64)):f("",!0)],10,Ae)):f("",!0)}}}),Oe=pe(ve,[["__scopeId","data-v-994ba6c1"]]);ve.__docgenInfo={exportName:"default",displayName:"Message",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"ErrorMessage"}},{name:"error",required:!1,type:{name:"string"}},{name:"id",required:!0,type:{name:"string"}},{name:"message",required:!1,type:{name:"string"}}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/Message/Message.vue"]};var S=(u=>(u.DEFAULT="default",u.PREVIOUS="previous",u.NEXT="next",u))(S||{}),ce=(u=>(u.MEDIUM="medium",u.SMALL="small",u))(ce||{}),X=(u=>(u.CONTAINS="contains",u.STARTWITH="startswith",u))(X||{}),k=(u=>(u.SIMPLE="simple",u.MULTI="multi",u))(k||{});const ze=["id"],Be={key:0,class:"lp-dropdown__flag-wrapper"},Re=["id"],Ke=["tabindex","aria-expanded","aria-controls","aria-labelledby","aria-describedby","aria-invalid","aria-activedescendant","onKeydown"],je={key:1,class:"lp-dropdown__placeholder"},He=["id","role","aria-multiselectable","aria-labelledby"],Ge={key:0,style:{padding:"8px"}},We={key:1,class:"lp-dropdown__overflow--empty"},Xe=["role","aria-multiselectable","aria-labelledby"],Je=["role","aria-labelledby"],Qe=["id"],Ye=["id","aria-selected","aria-disabled","onClick"],fe=ue({__name:"Dropdown",props:Fe({dataError:{},disabled:{type:Boolean,default:!1},icon:{default:"arrow-bottom"},label:{},labelPosition:{default:ie.inside},lazyload:{type:Boolean,default:!0},listboxHeight:{default:300},loadFlags:{type:Boolean,default:!1},mandatory:{type:Boolean},message:{},name:{},options:{},placeholder:{default:"SÃ©lectionnez une option"},readonly:{type:Boolean,default:!1},searchField:{type:Boolean,default:!1},searchFieldMode:{default:X.CONTAINS},selectionType:{default:k.SIMPLE},size:{default:ce.MEDIUM}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const l=u,K=Ne(),F=g(!1),c=g(!1),j=g(!1),v=Me(u,"modelValue"),m=g(""),U=g(null),M=g(null),L=g(null),s=g(0),n=g(""),I=g({}),N=g(null),_=g(!1);De(U,()=>E());const ee=()=>{c.value=!c.value,s.value=-1,c.value&&setTimeout(()=>{var e,a,o;Ee(),l.selectionType===k.MULTI&&v.value&&((e=v.value)==null?void 0:e.length)>0&&(s.value=(a=O(v.value[0]))==null?void 0:a.index),l.selectionType===k.SIMPLE&&((o=v.value)==null?void 0:o.length)>0&&(s.value=O(v.value).index),q(S.DEFAULT)},200)},E=e=>{c.value=!1,_.value=!1,e&&N.value.focus()},me=()=>{var e;m.value&&(s.value=-1),m.value||(s.value=-1),l.selectionType===k.MULTI&&m.value.length===0&&v.value.length>0&&(s.value=O(v.value[0]).index),l.selectionType===k.SIMPLE&&m.value.length===0&&((e=v.value)==null?void 0:e.length)>0&&(s.value=O(v.value).index),q(S.DEFAULT)},ae=()=>{m.value?m.value="":E(!0)},be=e=>{v.value=e},ye=()=>{var e;if(ge(y.value)){const o=Q(y.value,s.value).label;m.value="",H(O(o)),(e=N.value)==null||e.focus()}else E(!0),m.value=""},ge=e=>e.some(a=>a.optionsList.some(o=>!o.disabled)),Q=(e,a)=>e.flatMap(o=>o.optionsList).find(o=>o.index===a),q=e=>{const o=Te(y.value),b=e===S.NEXT,h=e===S.PREVIOUS;if(c.value){if(l.readonly)return;_.value=!0,b&&s.value<o&&(s.value+=1),h&&s.value>-1&&(s.value-=1),b&&s.value===o&&(s.value=0),h&&s.value===-1&&(s.value=o-1),setTimeout(()=>{_.value&&he()},200)}else E()},he=()=>{if(oe.value||se.value){const e=I.value[n.value],a=I.value[`${n.value}-option-${s.value}`];e.scrollTo({top:(a==null?void 0:a.offsetTop)-80,left:0,behavior:"smooth"})}},P=e=>{var a;return!!((a=v.value)!=null&&a.includes(e))},A=D(()=>{var e;return l.selectionType===k.MULTI?(e=v.value)==null?void 0:e.join(", "):v.value}),we=D(()=>{var e,a;if((e=l.dataError)!=null&&e.active&&((a=l.dataError)!=null&&a.message))return`error-message--${n.value}`;if(l.message)return`message--${n.value}`}),le=()=>{var e;return(e=l.dataError)!=null&&e.active?l.dataError.active:null},_e=()=>l.mandatory?l.mandatory:void 0,Y=e=>{const a=e.match(/\(([^)]+)\)/);return a?a[1]:null},H=e=>{let a=null;const o=e.label;if(c.value){if(l.readonly)return;l.loadFlags&&(M.value=e.flag,L.value=L.value===Y(o)?null:Y(o)),$e.value==="multi"?(P(o)&&(a=v.value.filter(b=>b!==o)),P(o)||(a=[...v.value,o])):a=o,v.value=a,s.value=e.index,be(a),l.selectionType==="simple"&&E()}else ee()},Ee=()=>{var e;l.searchField&&c.value&&(j.value=!0,((e=K==null?void 0:K.proxy)==null?void 0:e.$refs).search.$refs.inputRef.focus())},Se=e=>s.value===e&&c.value&&_.value,ke=(e,a)=>{const o=e.flatMap(({optionsList:i})=>i).find(({label:i})=>i===a);if(!o)return null;const{flag:{name:b,alt:h}={},phoneCode:t}=o;return{name:b,alt:h,phoneCode:t}},Te=e=>e.reduce((a,o)=>{const b=o.optionsList.filter(h=>!h.disabled).length;return a+b},0),$e=D(()=>l.loadFlags===!0?"simple":l.selectionType),y=D(()=>{let e=0,a=0;const o=l.searchFieldMode===X.CONTAINS?m.value:"",b=l.searchFieldMode===X.STARTWITH?m.value:"",h=l.options.filter(t=>t.label.toLowerCase().includes(String(o).toLowerCase())).filter(t=>t.label.toLowerCase().startsWith(b.toLowerCase())).reduce((t,i)=>{const r=i.groupName||"Sans groupe",G=i.disabled?null:e++;t[r]?a++:(t[r]=[],a=0);let z="";return l.loadFlags&&(z=Y(i.label)),t[r].push({index:G,subIndex:a,label:i.label,value:i.value,color:i.color,disabled:i.disabled,flag:i.flag,icon:i.icon,image:i.image,checkbox:i.checkbox,phoneCode:z}),t},{});return Object.entries(h).map(([t,i])=>({groupName:t,optionsList:i}))}),O=e=>y.value.flatMap(a=>a.optionsList).find(a=>a.label===e),oe=D(()=>{if(_.value&&l.searchField&&c.value&&y.value.length>0&&s.value>=0)return`${n.value}-option-${s.value}`}),se=D(()=>{if(_.value&&!l.searchField&&c.value&&y.value.length>0&&s.value>=0)return`${n.value}-option-${s.value}`});return Le(()=>{F.value=l.options.some(a=>"groupName"in a);const e=ke(y.value,"France (+33)");M.value={name:e==null?void 0:e.name,alt:e==null?void 0:e.alt},L.value=e==null?void 0:e.phoneCode,n.value=Ue("lp-dropdown--")}),(e,a)=>{var o,b,h;return d(),p("div",{ref_key:"targetDropdown",ref:U},[W("div",{class:w([`lp-dropdown__wrapper--${e.size}`,"lp-dropdown__wrapper"])},[e.labelPosition==="outside"?(d(),p("div",{key:0,id:`${n.value}-label`,class:w([{"lp-dropdown__label--mandatory":e.mandatory},"lp-dropdown__label lp-dropdown__label--outside"])},T(e.label),11,ze)):f("",!0),W("div",{class:w(["lp-dropdown",[{"lp-dropdown--readonly":e.readonly},{"lp-dropdown--disabled":e.disabled},{"lp-dropdown--is-open":c.value},{"lp-dropdown--error":(o=e.dataError)==null?void 0:o.active},{"lp-dropdown--label-is-inside":e.labelPosition==="inside"&&(!!e.placeholder||!!A.value)},{"lp-dropdown--label-alone":!e.placeholder&&!A.value&&e.labelPosition==="inside"}]])},[e.loadFlags?(d(),p("div",Be,[M.value?(d(),B(de,{key:0,class:"lp-dropdown__flag",country:M.value},null,8,["country"])):f("",!0),J(" "+T(L.value),1)])):(d(),p(R,{key:1},[e.labelPosition==="inside"?(d(),p("div",{key:0,id:`${n.value}-label`,class:w([{"lp-dropdown__label--mandatory":e.mandatory},"lp-dropdown__label lp-dropdown__label--inside"])},T(e.label),11,Re)):f("",!0),W("div",{ref_key:"dropdownRef",ref:N,class:"lp-dropdown__combobox",role:"combobox","aria-haspopup":"listbox",tabindex:e.disabled?void 0:0,"aria-expanded":`${c.value&&y.value.length>0}`,"aria-controls":n.value,"aria-labelledby":`${n.value}-label`,"aria-describedby":we.value,"aria-invalid":le()?le():void 0,"aria-required":_e,"aria-activedescendant":se.value,onKeydown:[$(ae,["esc"]),$(E,["tab"]),$(C(E,["shift","exact"]),["tab"]),a[0]||(a[0]=$(C(t=>H(Q(y.value,s.value)),["prevent"]),["enter"])),a[1]||(a[1]=$(C(t=>q(V(S).NEXT),["prevent"]),["down"])),a[2]||(a[2]=$(C(t=>q(V(S).PREVIOUS),["prevent"]),["up"])),a[3]||(a[3]=$(C(t=>H(Q(y.value,s.value)),["prevent"]),["space"]))],onClick:C(ee,["prevent"])},[A.value?(d(),p("span",{key:0,class:w(["lp-dropdown__value",{"lp-dropdown__value--error":(b=e.dataError)==null?void 0:b.active}])},T(A.value),3)):f("",!0),e.placeholder&&!A.value?(d(),p("span",je,T(e.placeholder),1)):f("",!0)],40,Ke)],64)),Z(x,{class:w(["lp-dropdown__arrow",{"lp-dropdown__arrow--error":(h=e.dataError)==null?void 0:h.active}]),name:e.icon},null,8,["class","name"])],2),Ie(W("div",{id:n.value,class:"lp-dropdown__listbox",style:ne([{"max-height":e.listboxHeight+"px"}]),role:e.searchField?void 0:"listbox","aria-multiselectable":!e.searchField&&e.selectionType===V(k).MULTI||void 0,"aria-labelledby":e.searchField?void 0:`${n.value}-label`},[e.searchField?(d(),p("div",Ge,[Z(Pe,{id:`${n.value}-search`,ref:"search",modelValue:m.value,"onUpdate:modelValue":a[4]||(a[4]=t=>m.value=t),class:"dropdown__search",name:"nameSearch",type:"text",label:"Rechercher","label-position":V(ie).inside,icon:"search-loupe","is-quiet":"",autocomplete:"off",autofocus:!0,size:e.size||void 0,aria:{ariaDescendant:oe.value||"",ariaAutocomplete:"list"},onInput:me,onKeydown:$(C(E,["shift"]),["tab"]),onEscKeydown:ae,onTabKeydown:E,onEnterPressed:ye,onGoUp:a[5]||(a[5]=t=>q(V(S).PREVIOUS)),onGoDown:a[6]||(a[6]=t=>q(V(S).NEXT))},null,8,["id","modelValue","label-position","size","aria","onKeydown"])])):f("",!0),y.value.length===0?(d(),p("div",We," Aucun RÃ©sultat ")):(d(),p("div",{key:2,ref:t=>I.value[`${n.value}`]=t,class:w(["lp-dropdown__overflow",{"lp-dropdown__overflow--readonly":e.readonly}]),role:e.searchField?"listbox":void 0,"aria-multiselectable":!!(e.searchField&&e.selectionType===V(k).MULTI)||void 0,"aria-labelledby":e.searchField?`${n.value}-label ${n.value}-search-label`:void 0},[(d(!0),p(R,null,te(y.value,(t,i)=>(d(),p("ul",{key:i,class:"lp-dropdown__group",role:F.value?"group":void 0,"aria-labelledby":F.value?`${n.value}-group-${i}`:void 0},[F.value?(d(),p("li",{key:0,id:`${n.value}-group-${i}`,class:w(["lp-dropdown__group-name",{"lp-dropdown__group-name--border":i!==0}]),role:"presentation"},T(t.groupName),11,Qe)):f("",!0),(d(!0),p(R,null,te(t.optionsList,(r,G)=>{var z;return d(),p("li",{key:`${i}-${G}`,id:`${n.value}-option-${r.disabled?i+"-"+G:r.index}`,ref_for:!0,ref:re=>I.value[`${n.value}-option-${r.index}`]=re,class:w(["lp-dropdown__option",[{"lp-dropdown__option--selected":P(r.label)},{"lp-dropdown__option--disabled":r.disabled},{"lp-dropdown__option--focused":Se(r.index)}]]),role:"option","aria-selected":P(r.label),"aria-disabled":r.disabled?r.disabled:void 0,onClick:re=>H(r)},[r.color?(d(),p("span",{key:0,class:"lp-dropdown__color",style:ne({background:r.color})},null,4)):f("",!0),r.icon?(d(),B(x,{key:1,name:r.icon,class:"lp-dropdown__icon"},null,8,["name"])):f("",!0),r.image?(d(),B(qe,Ve({key:2,class:"lp-dropdown__image",ref_for:!0},r.image),null,16)):f("",!0),e.loadFlags&&r.flag?(d(),B(de,{key:3,class:"lp-dropdown__flag",country:{name:(z=r.flag)==null?void 0:z.name,alt:r.flag.alt},lazyload:""},null,8,["country"])):f("",!0),r.checkbox?(d(),p("span",{key:4,class:w([{checked:P(r.label)},"lp-dropdown__checkbox lp-dropdown__checkbox--default checkbox__custom"])},null,2)):f("",!0),J(" "+T(r.label)+" ",1),P(r.label)?(d(),B(x,{key:5,name:"action-check-switch",class:"lp-dropdown__option--checked",title:"option sÃ©lectionnÃ©e"})):f("",!0)],10,Ye)}),128))],8,Je))),128))],10,Xe))],12,He),[[Ce,c.value]])],2),Z(Oe,{id:n.value,message:e.message,"data-error":e.dataError},null,8,["id","message","data-error"])],512)}}}),ta=pe(fe,[["__scopeId","data-v-3180b3b3"]]);fe.__docgenInfo={exportName:"default",displayName:"Dropdown",description:"",tags:{},props:[{name:"dataError",required:!0,type:{name:"ErrorMessage"}},{name:"disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"icon",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'arrow-bottom'"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"lazyload",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"listboxHeight",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"300"}},{name:"loadFlags",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"mandatory",required:!1,type:{name:"boolean"}},{name:"message",required:!1,type:{name:"string"}},{name:"name",required:!0,type:{name:"string"}},{name:"options",required:!0,type:{name:"Options"}},{name:"placeholder",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'SÃ©lectionnez une option'"}},{name:"readonly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchField",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchFieldMode",required:!1,type:{name:"DropdownSearchMode"},defaultValue:{func:!1,value:"DropdownSearchMode.CONTAINS"}},{name:"selectionType",required:!1,type:{name:"DropdownSelectionType"},defaultValue:{func:!1,value:"DropdownSelectionType.SIMPLE"}},{name:"size",required:!1,type:{name:"union",elements:[{name:"DropdownSizes"},{name:"undefined"}]},defaultValue:{func:!1,value:"DropdownSizes.MEDIUM"}},{name:"madatory",defaultValue:{func:!1,value:"false"}}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/Dropdown/New/Dropdown.vue"]};export{X as D,ta as S,k as a,ce as b};
