import{m as j,x as w,y as P,r as u,w as y,j as Q,k as A,o as t,a as d,n as s,t as o,p as i,D as g,P as T,E as m,u as S,C as U}from"./vue.esm-bundler-BV06ZB-3.js";import{g as z}from"./generateId-DPOzJEtM.js";const O=["for"],G=["aria-describedby"],K=["disabled"],$=["id","min","max","disabled","aria-invalid"],H=["disabled"],J={key:0,class:"numberField__text"},L={key:2,class:"numberField__message"},_=j({__name:"NumberField",props:w({value:{},dataError:{},disabled:{type:Boolean},error:{type:Boolean},id:{},label:{default:"Quantité"},labelPosition:{default:"visually-hidden"},max:{},message:{},min:{default:1},small:{type:Boolean},type:{default:"quiet"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(b){const a=b,F=P(b,"modelValue"),h=z,r=u(),f=u(""),p=u(null),q=e=>e>a.max?a.max:e<a.min?a.min:e;y(()=>a.value,e=>{r.value=q(e)},{immediate:!0}),y(r,e=>{F.value=e});const E=()=>{var e,l,n;return a.dataError&&((e=a.dataError)==null?void 0:e.active)&&((n=(l=a.dataError)==null?void 0:l.message)==null?void 0:n.length)},V=e=>{const l=(e==null?void 0:e.target).value;r.value=l?parseInt(l):a.min},k=()=>{a.disabled||r.value===a.max||r.value++},M=()=>{a.disabled||r.value===a.min||r.value--},N=e=>["e","E","+","-","."].includes(e.key)?(e.preventDefault(),!1):!0,B=()=>{!r.value||r.value<a.min?r.value=a.min:r.value>a.max&&(r.value=a.max)},D=()=>{var e,l;return(e=a.dataError)!=null&&e.active&&((l=a.dataError)!=null&&l.message)?f.value:void 0},v=()=>{const e=p.value;f.value=e&&e.id?e.id:"error-message"},C=()=>{var e;return(e=a.dataError)!=null&&e.active?!0:null};return Q(()=>{v()}),A(()=>{r.value=a.min,v()}),(e,l)=>{var n,c;return t(),d("div",{class:i(["numberField",[`numberField--${e.type}`,{"numberField--disabled":e.disabled},{"numberField--small":e.small},{"numberField--max":r.value===e.max}]])},[s("label",{class:i(["numberField__label numberField__label--outside",[{"numberField--disabled":e.disabled,"visually-hidden":e.labelPosition==="visually-hidden"}]]),for:e.id||null},o(e.label||"Quantité"),11,O),s("div",{class:i(["numberField__inner",[{"numberField--error":e.error||e.dataError&&e.dataError.active}]]),"aria-describedby":D()},[s("button",{"aria-label":"Diminuer la quantité de un",class:i(["numberField__btn--less",{numberField__btn:!0,"numberField__btn--disabled":r.value<=e.min}]),disabled:r.value<=e.min||e.disabled,onClick:M}," - ",10,K),g(s("input",{id:e.id||null,ref:"input","onUpdate:modelValue":l[0]||(l[0]=I=>r.value=I),class:"numberField__input",type:"number",min:e.min,max:e.max,disabled:e.disabled,maxlength:4,"aria-invalid":C(),onKeydown:N,onInput:V,onBlur:B},null,40,$),[[T,r.value,void 0,{number:!0}]]),s("button",{"aria-label":"Augmenter la quantité de un",class:i(["numberField__btn--more",{numberField__btn:!0,"numberField__btn--disabled":r.value>=e.max}]),disabled:r.value===e.max||e.disabled,onClick:k}," + ",10,H)],10,G),r.value===e.max&&!e.disabled?(t(),d("span",J," Quantité max. ")):m("",!0),E()?g((t(),d("p",{key:1,ref_key:"errorMessage",ref:p,class:"numberField__error-message","aria-live":"polite"},[U(o((n=e.dataError)==null?void 0:n.message),1)])),[[S(h),"numberField-error-message--"]]):m("",!0),e.message&&!((c=e.dataError)!=null&&c.active)?(t(),d("p",L,o(e.message),1)):m("",!0)],2)}}});_.__docgenInfo={exportName:"default",displayName:"NumberField",description:"",tags:{},props:[{name:"value",required:!1,type:{name:"number"}},{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"error",required:!1,type:{name:"boolean"}},{name:"id",required:!1,type:{name:"string"}},{name:"label",required:!0,type:{name:"string"},defaultValue:{func:!1,value:"'Quantité'"}},{name:"labelPosition",required:!1,type:{name:"union",elements:[{name:'"outside"'},{name:'"visually-hidden"'}]},defaultValue:{func:!1,value:"'visually-hidden'"}},{name:"max",required:!0,type:{name:"number"}},{name:"message",required:!1,type:{name:"string"}},{name:"min",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"1"}},{name:"small",required:!1,type:{name:"boolean"}},{name:"type",required:!1,type:{name:"union",elements:[{name:'"emphasis"'},{name:'"default"'},{name:'"quiet"'},{name:'"ghost"'}]},defaultValue:{func:!1,value:"'quiet'"}}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue3-solaris/src/components/atoms/NumberField/NumberField.vue"]};const X=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"}));export{_,X as a};
