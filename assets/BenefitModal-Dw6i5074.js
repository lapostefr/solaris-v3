import{d as J,m as L,r as $,b as H,c as g,o as Q,a as R,f as o,e as y,t as h,J as X,u as Y,g as d,y as s,v,C as c,B as k,x as Z,G as B,A as p,h as C,F as x,z as ee,I as ae,T as le,L as oe}from"./vue.esm-bundler-CaiLyLZC.js";import{S as te}from"./Icon-CPWlc7Vn.js";import{S as se}from"./Picture-NxZc57wS.js";import{S as q}from"./Button-DSIzHRrB.js";import{u as ne}from"./index-CAhNJgAn.js";import{f as N}from"./focusTrap-BnjFpEHS.js";import{h as ie}from"./closeOnFocusOut-PJkN61SV.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";const re=["aria-label","aria-labelledby","aria-modal","open"],ue={class:"modal__inner"},ce=["aria-label"],me=["src","alt"],fe={key:0},ve={key:0,class:"modal__additional"},pe={key:0,class:"modal__actions"},_e={key:1,class:"modal__stepActions"},ge={role:"navigation","aria-label":"Pagination"},he={class:"modal__bulletContainer"},be=["title","aria-current","onClick"],ye={class:"visually-hidden"},A=J({__name:"BenefitModal",props:L({logo:{},modals:{},disableClickOutside:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},focusTrap:{type:Boolean,default:!1},showTitle:{type:Boolean,default:!0},titleLevel:{default:"h1"},padding:{default:"default"},closable:{type:Boolean,default:!0}},{modelValue:{},modelModifiers:{}}),emits:L(["changed","toggledModal","currentId"],["update:modelValue"]),setup(T,{emit:O}){const l=T,w=O,_=$(!1),a=$(0),r=H(T,"modelValue"),n=g(()=>l.modals.find((e,t)=>t===a.value)),P=g(()=>a.value===0?"Fermer":"Précédent"),z=g(()=>a.value===l.modals.length-1?"Fermer":"Suivant");g(()=>{var e,t;return(t=(e=n.value)==null?void 0:e.background)==null?void 0:t.url});const D=()=>{l.disableClickOutside||u()},u=()=>(l.closable&&w("changed"),a.value=0,_.value=!1,r.value=!1,!1),j=()=>{if(a.value===0){u();return}a.value-=1,b(a.value)},E=()=>{const e=l.modals.length-1;if(a.value===e-1||a.value<e){a.value+=1,b(a.value);return}u()},M=e=>{e&&w("currentId",e)},b=e=>{var m;const t=(m=l.modals[e])==null?void 0:m.id;M(t),a.value=e},K=()=>{var t;const e=(t=l.modals[0])==null?void 0:t.id;M(e)},U=()=>{const e=l.modals.find((t,m)=>m===a.value);return l.showTitle||e==null?void 0:e.title},W=()=>l.showTitle?"modal__title":void 0,G=e=>{ie(e,l.focusTrap,u)},V=()=>{const e=ne();r.value||(_.value=!1),r.value&&!_.value&&(_.value=!0,N.initFocus(e.value))};return Q(()=>{V(),K()}),R(()=>{V()}),(e,t)=>{const m=oe("body-no-scroll");return o(),y(le,{name:"open"},{default:h(()=>{var I,S,F;return[r.value?X((o(),d("section",{key:0,ref_key:"modal",ref:n,onFocusout:G,class:"modal",onKeydown:ae(u,["esc"])},[s("div",{class:"modal__overlay",onClick:D}),s("dialog",{id:"modal__container",class:v(["modal__container",[{"modal--no-title":!e.showTitle}]]),"aria-label":U(),"aria-labelledby":W(),"aria-modal":r.value,open:r.value,role:"dialog"},[s("div",ue,[s("div",{class:v(["modal__top",{isBackground:(I=n.value)==null?void 0:I.background}])},[(S=n.value)!=null&&S.background?(o(),y(se,{key:0,class:"modal__picture","default-source":n.value.background,width:380,height:380},null,8,["default-source"])):c("",!0),e.closable&&u?(o(),d("button",{key:1,class:"modal__closer","aria-label":`Fermer la fenêtre "${(F=n.value)==null?void 0:F.title}"`,onClick:u},[k(te,{size:"small",name:"action-close"})],8,ce)):c("",!0),e.logo?(o(),d("img",{key:2,class:"modal__logo",src:e.logo.url,alt:e.logo.alt},null,8,me)):c("",!0)],2),s("div",{class:v(["modal__contentWrapper",[`modal__contentWrapper--${e.padding}`]])},[e.showTitle?(o(),y(Z(e.titleLevel),{key:0,id:"modal__title",class:"modal__title"},{default:h(()=>{var f;return[B(p((f=n.value)==null?void 0:f.title),1)]}),_:1})):c("",!0),s("div",{class:v(["modal__content",{"modal__content--withAdditional":e.$slots.additional}])},[C(e.$slots,"description",{step:a.value},()=>{var f,i;return[(f=n.value)!=null&&f.description?(o(),d("span",fe,p((i=n.value)==null?void 0:i.description),1)):c("",!0)]},!0),e.$slots.additional?(o(),d("div",ve,[C(e.$slots,"additional",{step:a.value},void 0,!0)])):c("",!0)],2)],2),s("div",{class:v(["modal__bottom",[`modal__bottom--${e.padding}`]])},[e.modals.length===1?(o(),d("div",pe,[C(e.$slots,"actions",{},void 0,!0)])):(o(),d("div",_e,[k(q,{class:"modal__action",type:"ghost",color:"default",onClick:j},{default:h(()=>[B(p(P.value),1)]),_:1}),s("nav",ge,[s("ol",he,[(o(!0),d(x,null,ee(e.modals,(f,i)=>(o(),d("li",{key:i,class:"modal__bullet-item"},[s("button",{class:v(["modal__bullet",{"modal__bullet--current":a.value===i}]),title:`Page ${i+1}`,"aria-current":a.value===i?"page":void 0,onClick:ke=>b(i)},[s("span",ye,"Page "+p(i+1),1)],10,be)]))),128))])]),k(q,{class:"modal__action",color:"default",onClick:E},{default:h(()=>[B(p(z.value),1)]),_:1})]))],2)])],10,re)],32)),[[m,r.value],[Y(N),l.focusTrap]]):c("",!0)]}),_:3})}}}),Fe=de(A,[["__scopeId","data-v-0c029485"]]);A.__docgenInfo={exportName:"default",displayName:"BenefitModal",description:"",tags:{},props:[{name:"logo",required:!1,type:{name:"Logo"}},{name:"modals",required:!0,type:{name:"Array",elements:[{name:"ModalType"}]}},{name:"disableClickOutside",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isLoading",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"focusTrap",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"showTitle",required:!0,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"titleLevel",required:!1,type:{name:"union",elements:[{name:'"h1"'},{name:'"h2"'},{name:'"h3"'},{name:'"h4"'},{name:'"h5"'},{name:'"h6"'}]},defaultValue:{func:!1,value:"'h1'"}},{name:"padding",required:!1,type:{name:"union",elements:[{name:'"small"'},{name:'"default"'},{name:'"large"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"closable",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],events:[{name:"changed",type:{names:["boolean"]}},{name:"toggledModal"},{name:"currentId",type:{names:["number"]}}],slots:[{name:"description",scoped:!0,bindings:[{name:"step",title:"binding"}]},{name:"additional",scoped:!0,bindings:[{name:"step",title:"binding"}]},{name:"actions"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/organisms/Modal/BenefitModal/BenefitModal.vue"]};export{Fe as S};
