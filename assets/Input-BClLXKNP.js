import{r as P,c as z,w as ue,d as de,m as re,a1 as pe,b as me,a as ce,o as fe,g as f,u as r,v as g,y as F,A as S,C as h,h as ae,e as U,t as X,x as be,D as ve,T as ye,G as le,H as ge,f as u,a2 as he,B as we,Q as qe,F as ke,z as Se}from"./vue.esm-bundler-BiAlgFmf.js";import{S as te}from"./Icon-C-Sturzh.js";import{S as Ee,T as Ve}from"./Tooltip-BdO2vyV2.js";import{S as $e}from"./Button-CxIFeNFW.js";import{L as Y}from"./types-DKXD8uiR.js";import{g as Ae}from"./generateId-CVaf2GGW.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Ie(l,w,t,Z,E,V,$,n,b,d,B){var J;const s=P(-1),v=P(!1),C=z(()=>($==null?void 0:$.value)&&((d==null?void 0:d.value)==="text"||(d==null?void 0:d.value)==="number")),A=a=>{const o=/^\d+([.,]\d+)?$/;if(C.value)if(!o.test(a.replace(/\s/g,"")))a=a.replace(/[^\d.,]/g,"").replace(/([.,])[.,]+/g,",").replace(/^([.,]+)/,"").replace(/\./,"_").replace(/\./g,"").replace("_",".").replace(/,/,"_").replace(/,/g,"").replace("_",",");else{const c=Number(a.replaceAll(",","."));t!=null&&t.value&&c&&(a=t.value<c?t.value.toString():a)}return a},y=(a,o)=>{const c=Number(a.replaceAll(",","."));return a!==""&&!isNaN(c)&&(a=o>c?o.toString():a),a},_=()=>{l("enterPressed")},q=a=>{let o=a.target.value;C.value&&(o=A(o),a.target.value=o),E!=null&&E.value&&(o=o.slice(0,E.value)),n!=null&&n.value&&(s.value=-1),l("input",o)},x=a=>{l("focus",a)},Q=()=>{(b==null?void 0:b.value).focus()},N=a=>{const o=B==null?void 0:B.value[`suggestion-${a}-label`];o&&o.scrollIntoView({block:"nearest",behavior:"auto"})},O=()=>{n!=null&&n.value&&m.value&&(s.value++,s.value===n.value.length&&(s.value=0),N(s.value))},K=()=>{n!=null&&n.value&&m.value&&(s.value--,s.value<0&&(s.value=n.value.length-1),N(s.value))},j=()=>{l("tabKeydown")},G=()=>{l("escKeydown")},H=a=>{let o=a.target.value;C.value&&(V!=null&&V.value)&&(o=y(o,V.value),a.target.value=o),n!=null&&n.value&&D.value&&T(n.value[s.value]),l("blur",a)},M=a=>{v.value=!!(a!=null&&a.length)};ue(()=>n==null?void 0:n.value,M);const ee=z(()=>{const a={},o=(w==null?void 0:w.value)??{};return Object.keys(o).forEach(c=>a[`aria-${c}`]=w==null?void 0:w.value[c]),a}),T=a=>{I(),l("suggestionSelect",a)},I=(a=!0)=>{v.value=!1,a&&(s.value=-1)},D=z(()=>(n==null?void 0:n.value)&&s.value>=0&&s.value<n.value.length),m=z(()=>(n==null?void 0:n.value)&&n.value.length>0),W=a=>{switch((d==null?void 0:d.value)==="number"&&["-"].includes(a.key)&&a.preventDefault(),a.key==="Escape"&&!m.value&&l("update:modelValue",""),a.key){case" ":D.value&&(I(),a.preventDefault(),l("closeSuggestions",a));break;case"Enter":m.value&&(n!=null&&n.value)&&D.value&&T(n.value[s.value]),l("enterPressed");break;case"Tab":m.value&&v.value&&I(!1),l("tabKeydown");break;case"Escape":m.value&&v.value&&I(),l("closeSuggestions",a),l("escKeydown");break;case"ArrowDown":a.preventDefault(),O(),l("goDown");break;case"ArrowUp":a.preventDefault(),K(),l("goUp");break}};return v.value=!!((J=n==null?void 0:n.value)!=null&&J.length),{suggestionsLayerIsVisible:v,ariaAttributes:ee,suggestionFocus:s,hasSuggestions:m,checkMin:y,focus:x,sanitizeNumericonly:A,setFocus:Q,goDown:O,goUp:K,tabKeydown:j,escKeydown:G,blur:H,changeSuggestions:M,suggestionSelect:T,change:q,pressEnter:_,onKeydown:W}}var De=(l=>(l.disabled="disabled",l.readonly="readonly",l.active="active",l))(De||{}),Pe=(l=>(l.inside="inside",l.outside="outside",l))(Pe||{}),Be=(l=>(l.simple="simple",l.multiple="multiple",l))(Be||{}),oe=(l=>(l.default="default",l.compact="compact",l.regular="regular",l.small="small",l.medium="medium",l))(oe||{}),Ce=(l=>(l.simple="simple",l.multi="multi",l))(Ce||{}),Ne=(l=>(l.contains="contains",l.startswith="startswith",l))(Ne||{});const Ke=["id","for"],Me=["id","role","readonly","disabled","autocomplete","maxlength","placeholder","name","type","min","max","aria-describedby","aria-invalid","aria-required","aria-controls","aria-expanded","aria-autocomplete","aria-activedescendant"],Te=["id","for"],Le={key:0,class:"input__unit"},Re=["title"],Fe={key:1},Ue=["id","aria-labelledby"],ze=["id","aria-selected","onMousedown"],Qe={key:2,class:"input__message"},se=de({__name:"Input",props:re({dataError:{},aria:{},autocomplete:{},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean},error:{type:Boolean,default:!1},hideLabel:{type:Boolean,default:!1},icon:{},id:{},inputRefStr:{default:"input"},isQuiet:{type:Boolean,default:!1},label:{},labelId:{},labelPosition:{default:Y.inside},mandatory:{type:Boolean,default:!1},message:{},max:{},maxlength:{},min:{},name:{},numericOnly:{type:Boolean,default:!1},placeholder:{},readonly:{type:Boolean,default:!1},role:{},size:{default:oe.medium},success:{type:Boolean,default:!1},suggestions:{},type:{default:"text"},tooltipComponent:{},unit:{},value:{}},{modelValue:{},modelModifiers:{}}),emits:re(["focus","goUp","goDown","tabKeydown","escKeydown","enterPressed","blur","suggestionSelect","input","closeSuggestions","update:modelValue"],["update:modelValue"]),setup(l,{emit:w}){var ne;const t=l,Z=z(()=>({displayElement:"inline-flex",forcePlacement:!1,offset:8,placement:"top",tooltipStyle:Ve.default,trigger:"hover",triggerIcon:"search-loupe",...t.tooltipComponent??{}})),E=w,V=Ae,$=P(),n=P({}),{aria:b,max:d,inputRefStr:B,maxlength:s,min:v,numericOnly:C,suggestions:A,type:y}=pe(t),{suggestionFocus:_,suggestionsLayerIsVisible:q,hasSuggestions:x,focus:Q,blur:N,suggestionSelect:O,change:K,onKeydown:j}=Ie(E,b,d,B,s,v,C,A,$,y,n),G=me(l,"modelValue"),H=P(null),M=P(""),ee=()=>{var e,i,L;return t.dataError&&((e=t.dataError)==null?void 0:e.active)&&((L=(i=t.dataError)==null?void 0:i.message)==null?void 0:L.length)},T=()=>!t.label&&t.placeholder?t.placeholder.toString():void 0,I=()=>{var e,i;return(e=t.dataError)!=null&&e.active&&((i=t.dataError)!=null&&i.message)?M.value:void 0},D=()=>{const e=H.value;M.value=e&&e.id?e.id:"error-message"},m=()=>{var e;return(e=t.dataError)!=null&&e.active?t.dataError.active:void 0},W=()=>t.mandatory?t.mandatory:void 0,J=()=>t.suggestions?"list":void 0,a=()=>{if(t.suggestions)return x.value?q==null?void 0:q.value:"false"},o=()=>t.suggestions?`${t.id}-listbox`:void 0,c=()=>{const{suggestions:e,id:i}=t;return!e||e.length===0||_.value===-1?null:`${i}-suggestion-${e[_.value].label}`},ie=()=>t.suggestions?"combobox":t.role||void 0;return ce(()=>{D()}),fe(()=>{D()}),q.value=!!((ne=t.suggestions)!=null&&ne.length),(e,i)=>{var L;return u(),f("div",{class:g(["input",[`input--${e.labelPosition}`,{"input--small":e.size=="small"||e.size=="compact","input--medium":e.size=="medium"||e.size=="default","input--filled":!!e.value,"input--only":!e.placeholder&&!e.value}]])},[e.label&&e.labelPosition===r(Y).outside?(u(),f("label",{key:0,id:`${e.id}-label`||null,class:g(["input__label-tag",{"input__label-tag--disabled":e.disabled}]),for:e.id},[F("span",{class:g(["input__label input__label--outside",[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}]])},S(e.label),3)],10,Ke)):h("",!0),F("div",{class:g(["input__global",[{"input__global--disabled":e.disabled,"input__global--readonly":e.readonly,"input__global--isQuiet":e.isQuiet,"input__global--error":e.error||e.dataError&&e.dataError.active}]])},[ae(e.$slots,"inputLeft",{},void 0,!0),(u(),U(be(e.label?"div":"label"),{class:g([{"input__wrapper--label":!e.label,"input__wrapper--outside":e.labelPosition===r(Y).outside},"input__wrapper"]),aria:T()},{default:X(()=>{var R,k;return[le(F("input",{id:e.id,ref_key:"inputRef",ref:$,"onUpdate:modelValue":i[0]||(i[0]=p=>G.value=p),role:ie(),readonly:e.readonly,disabled:e.disabled,autocomplete:e.autocomplete,maxlength:r(y)!=="number"?r(s):void 0,placeholder:e.placeholder,class:g(["input__field",[{"input__field--placeholder":e.placeholder&&e.placeholder.length>0,"input--disabled":e.disabled,"input--search":r(y)==="search"}]]),name:e.name,type:r(y)||"text",min:r(y)==="number"?r(v)||0:void 0,max:r(y)==="number"?r(d):void 0,"aria-describedby":I(),"aria-invalid":m()?m():void 0,"aria-required":W()?W():void 0,"aria-controls":o(),"aria-expanded":a(),"aria-autocomplete":(R=r(b))!=null&&R.ariaAutocomplete?r(b).ariaAutocomplete:J(),"aria-activedescendant":(k=r(b))!=null&&k.ariaAutocomplete?r(b).ariaAutocomplete:c(),onKeydown:i[1]||(i[1]=(...p)=>r(j)&&r(j)(...p)),onFocus:i[2]||(i[2]=(...p)=>r(Q)&&r(Q)(...p)),onInput:i[3]||(i[3]=(...p)=>r(K)&&r(K)(...p)),onBlur:i[4]||(i[4]=(...p)=>r(N)&&r(N)(...p))},null,42,Me),[[he,G.value]]),e.label&&e.labelPosition===r(Y).inside?(u(),f("label",{key:0,id:`${e.id}-label`||null,for:e.id,class:g(["input__label-tag",{"input__label-tag--disabled":e.disabled,"input__label-tag--readonly":e.readonly}])},[F("span",{class:g([[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}],"input__label input__label--inside"])},S(e.label),3)],10,Te)):h("",!0)]}),_:1},8,["class","aria"])),ae(e.$slots,"inputRight",{},void 0,!0),e.unit?(u(),f("span",Le,[e.unit.description?(u(),f("abbr",{key:0,title:e.unit.description},S(e.unit.label),9,Re)):(u(),f("span",Fe,S(e.unit.label),1))])):h("",!0),e.icon&&!e.tooltipComponent&&!e.success?(u(),U(te,{key:1,class:"input__icon",name:e.icon},null,8,["name"])):h("",!0),e.tooltipComponent&&!e.success?(u(),U(Ee,ve({key:2,class:"small__popover"},Z.value),{tooltip:X(()=>[ae(e.$slots,"tooltipContent",{},void 0,!0)]),trigger:X(()=>[we($e,{class:"input__icon input__icon--tooltip",icon:Z.value.triggerIcon,type:"ghost"},null,8,["icon"])]),_:3},16)):h("",!0),e.success?(u(),U(te,{key:3,class:"input__icon input__icon--success",name:"action-check"})):h("",!0),r(A)?(u(),U(ye,{key:4,name:"slide-fade"},{default:X(()=>[le(F("ul",{id:`${e.id}-listbox`,role:"listbox",class:"suggestions","aria-labelledby":e.id},[(u(!0),f(ke,null,Se(r(A),(R,k)=>(u(),f("li",{id:`${e.id}-suggestion-${e.label}`,key:`${e.id}-suggestion-${k}`,ref_for:!0,ref:p=>n.value[`suggestion-${k}-label`]=p,role:"option",class:g(["suggestions__item",{"suggestions__item--focused":k===r(_)}]),"aria-selected":k===r(_)?"true":void 0,onMousedown:p=>r(O)(R)},S(R.label),43,ze))),128))],8,Ue),[[qe,r(q)]])]),_:1})):h("",!0)],2),ee()?le((u(),f("p",{key:1,ref_key:"errorMessage",ref:H,class:"input__error-message","aria-live":"polite"},[ge(S(e.dataError?e.dataError.message:""),1)])),[[r(V),"input-error-message--"]]):h("",!0),e.message&&!((L=e.dataError)!=null&&L.active)?(u(),f("p",Qe,S(e.message),1)):h("",!0)],2)}}}),Ye=_e(se,[["__scopeId","data-v-e9b22132"]]);se.__docgenInfo={exportName:"default",displayName:"Input",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"aria",required:!1,type:{name:`{
  [key: string]: string
}`}},{name:"autocomplete",required:!1,type:{name:"string"}},{name:"autofocus",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"error",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"hideLabel",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"icon",required:!1,type:{name:"string"}},{name:"id",required:!0,type:{name:"string"}},{name:"inputRefStr",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'input'"}},{name:"isQuiet",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelId",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"mandatory",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"message",required:!1,type:{name:"string"}},{name:"max",required:!1,type:{name:"number"}},{name:"maxlength",required:!1,type:{name:"number"}},{name:"min",required:!1,type:{name:"number"}},{name:"name",required:!0,type:{name:"string"}},{name:"numericOnly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"readonly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"role",required:!1,type:{name:"string"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.medium"}},{name:"success",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"suggestions",required:!1,type:{name:"Array",elements:[{name:"SuggestionType"}]}},{name:"type",required:!1,type:{name:"InputType"},defaultValue:{func:!1,value:"'text'"}},{name:"tooltipComponent",required:!1,type:{name:"TooltipProps"}},{name:"unit",required:!1,type:{name:"UnitProp"}},{name:"value",required:!1,type:{name:"union",elements:[{name:"string"},{name:"number"}]}}],events:[{name:"focus"},{name:"goUp"},{name:"goDown"},{name:"tabKeydown"},{name:"escKeydown"},{name:"enterPressed"},{name:"blur"},{name:"suggestionSelect"},{name:"input"},{name:"closeSuggestions"},{name:"update:modelValue"}],slots:[{name:"inputLeft"},{name:"inputRight"},{name:"tooltipContent"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/TextInput/Default/Input.vue"]};export{De as A,Pe as L,Ne as S,Ce as T,oe as a,Be as b,Ye as c,Ie as u};
