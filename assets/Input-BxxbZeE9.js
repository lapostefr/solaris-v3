import{r as D,c as U,w as ie,d as ue,m as re,a1 as de,a as pe,k as me,l as ce,e as m,u as r,v as g,t as J,y as S,B as b,f as ae,b as R,E as fe,A as X,C as be,T as ve,G as le,H as ye,o as u,a2 as ge,z as he,Q as we,F as ke,x as qe}from"./vue.esm-bundler-BIhSTzsT.js";import{S as te}from"./Icon-DZ5u0r7n.js";import{S as Ee}from"./Tooltip-Bdf-DHgJ.js";import{S as Se}from"./Button-CGWBbttc.js";import{L as Y}from"./types-DKXD8uiR.js";import{g as $e}from"./generateId-CVaf2GGW.js";import{_ as Ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Ve(l,h,t,Z,$,A,V,n,v,d,B){var W;const s=D(-1),y=D(!1),C=U(()=>(V==null?void 0:V.value)&&((d==null?void 0:d.value)==="text"||(d==null?void 0:d.value)==="number")),q=a=>{const o=/^\d+([.,]\d+)?$/;if(C.value)if(!o.test(a.replace(/\s/g,"")))a=a.replace(/[^\d.,]/g,"").replace(/([.,])[.,]+/g,",").replace(/^([.,]+)/,"").replace(/\./,"_").replace(/\./g,"").replace("_",".").replace(/,/,"_").replace(/,/g,"").replace("_",",");else{const f=Number(a.replaceAll(",","."));t!=null&&t.value&&f&&(a=t.value<f?t.value.toString():a)}return a},w=(a,o)=>{const f=Number(a.replaceAll(",","."));return a!==""&&!isNaN(f)&&(a=o>f?o.toString():a),a},_=()=>{l("enterPressed")},k=a=>{let o=a.target.value;C.value&&(o=q(o),a.target.value=o),$!=null&&$.value&&(o=o.slice(0,$.value)),n!=null&&n.value&&(s.value=-1),l("input",o)},x=a=>{l("focus",a)},z=()=>{(v==null?void 0:v.value).focus()},N=a=>{const o=B==null?void 0:B.value[`suggestion-${a}-label`];o&&o.scrollIntoView({block:"nearest",behavior:"auto"})},Q=()=>{n!=null&&n.value&&c.value&&(s.value++,s.value===n.value.length&&(s.value=0),N(s.value))},K=()=>{n!=null&&n.value&&c.value&&(s.value--,s.value<0&&(s.value=n.value.length-1),N(s.value))},O=()=>{l("tabKeydown")},j=()=>{l("escKeydown")},G=a=>{let o=a.target.value;C.value&&(A!=null&&A.value)&&(o=w(o,A.value),a.target.value=o),n!=null&&n.value&&P.value&&L(n.value[s.value]),l("blur",a)},M=a=>{y.value=!!(a!=null&&a.length)};ie(()=>n==null?void 0:n.value,M);const ee=U(()=>{const a={},o=(h==null?void 0:h.value)??{};return Object.keys(o).forEach(f=>a[`aria-${f}`]=h==null?void 0:h.value[f]),a}),L=a=>{I(),l("suggestionSelect",a)},I=(a=!0)=>{y.value=!1,a&&(s.value=-1)},P=U(()=>(n==null?void 0:n.value)&&s.value>=0&&s.value<n.value.length),c=U(()=>(n==null?void 0:n.value)&&n.value.length>0),H=a=>{switch((d==null?void 0:d.value)==="number"&&["-"].includes(a.key)&&a.preventDefault(),a.key==="Escape"&&!c.value&&l("input",""),a.key){case" ":P.value&&(I(),a.preventDefault(),l("closeSuggestions",a));break;case"Enter":c.value&&(n!=null&&n.value)&&P.value&&L(n.value[s.value]),l("enterPressed");break;case"Tab":c.value&&y.value&&I(!1),l("tabKeydown");break;case"Escape":c.value&&y.value&&I(),l("closeSuggestions",a),l("escKeydown");break;case"ArrowDown":a.preventDefault(),Q(),l("goDown");break;case"ArrowUp":a.preventDefault(),K(),l("goUp");break}};return y.value=!!((W=n==null?void 0:n.value)!=null&&W.length),{suggestionsLayerIsVisible:y,ariaAttributes:ee,suggestionFocus:s,hasSuggestions:c,checkMin:w,focus:x,sanitizeNumericonly:q,setFocus:z,goDown:Q,goUp:K,tabKeydown:O,escKeydown:j,blur:G,changeSuggestions:M,suggestionSelect:L,change:k,pressEnter:_,onKeydown:H}}var _e=(l=>(l.disabled="disabled",l.readonly="readonly",l.active="active",l))(_e||{}),Ie=(l=>(l.inside="inside",l.outside="outside",l))(Ie||{}),Pe=(l=>(l.simple="simple",l.multiple="multiple",l))(Pe||{}),oe=(l=>(l.default="default",l.compact="compact",l.regular="regular",l.small="small",l.medium="medium",l))(oe||{}),De=(l=>(l.simple="simple",l.multi="multi",l))(De||{}),Be=(l=>(l.contains="contains",l.startswith="startswith",l))(Be||{});const Ce=["id","for"],Ne=["id","role","readonly","disabled","autocomplete","maxlength","placeholder","name","type","min","max","aria-describedby","aria-invalid","aria-required","aria-controls","aria-expanded","aria-autocomplete","aria-activedescendant"],Ke=["id","for"],Me={key:0,class:"input__unit"},Le=["title"],Te={key:1},Fe=["id","aria-labelledby"],Re=["id","aria-selected","onMousedown"],Ue={key:2,class:"input__message"},se=ue({__name:"Input",props:re({dataError:{},aria:{},autocomplete:{},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean},error:{type:Boolean,default:!1},hideLabel:{type:Boolean,default:!1},icon:{},id:{},inputRefStr:{default:"input"},isQuiet:{type:Boolean,default:!1},label:{},labelId:{},labelPosition:{default:Y.inside},mandatory:{type:Boolean,default:!1},message:{},max:{},maxlength:{},min:{},name:{},numericOnly:{type:Boolean,default:!1},placeholder:{},readonly:{type:Boolean,default:!1},size:{default:oe.medium},success:{type:Boolean,default:!1},suggestions:{},type:{default:"text"},tooltipComponent:{},unit:{},value:{}},{modelValue:{},modelModifiers:{}}),emits:re(["focus","goUp","goDown","tabKeydown","escKeydown","enterPressed","blur","suggestionSelect","input","closeSuggestions"],["update:modelValue"]),setup(l,{emit:h}){var ne;const t=l,Z=U(()=>({displayElement:"inline-flex",forcePlacement:!1,offset:8,placement:"top",tooltipStyle:"default",trigger:"hover",triggerIcon:"search-loupe",...t.tooltipComponent??{}})),$=h,A=$e,V=D(),n=D({}),{aria:v,max:d,inputRefStr:B,maxlength:s,min:y,numericOnly:C,suggestions:q,type:w}=de(t),{suggestionFocus:_,suggestionsLayerIsVisible:k,hasSuggestions:x,focus:z,blur:N,suggestionSelect:Q,change:K,onKeydown:O}=Ve($,v,d,B,s,y,C,q,V,w,n),j=pe(l,"modelValue"),G=D(null),M=D(""),ee=()=>{var e,i,T;return t.dataError&&((e=t.dataError)==null?void 0:e.active)&&((T=(i=t.dataError)==null?void 0:i.message)==null?void 0:T.length)},L=()=>!t.label&&t.placeholder?t.placeholder.toString():void 0,I=()=>{var e,i;return(e=t.dataError)!=null&&e.active&&((i=t.dataError)!=null&&i.message)?M.value:void 0},P=()=>{const e=G.value;M.value=e&&e.id?e.id:"error-message"},c=()=>{var e;return(e=t.dataError)!=null&&e.active?t.dataError.active:void 0},H=()=>t.mandatory?t.mandatory:void 0,W=()=>t.suggestions?"list":void 0,a=()=>t.suggestions?x.value?k==null?void 0:k.value:"false":!1,o=()=>t.suggestions?`${t.id}-listbox`:void 0,f=()=>{const{suggestions:e,id:i}=t;return!e||e.length===0||_.value===-1?null:`${i}-suggestion-${e[_.value].label}`};return me(()=>{P()}),ce(()=>{P()}),k.value=!!((ne=t.suggestions)!=null&&ne.length),(e,i)=>{var T;return u(),m("div",{class:g(["input",[`input--${e.labelPosition}`,{"input--small":e.size=="small"||e.size=="compact","input--medium":e.size=="medium"||e.size=="default","input--filled":!!e.value,"input--only":!e.placeholder&&!e.value}]])},[e.label&&e.labelPosition===r(Y).outside?(u(),m("label",{key:0,id:`${e.id}-label`||null,class:g(["input__label-tag",{"input__label-tag--disabled":e.disabled}]),for:e.id},[J("span",{class:g(["input__label input__label--outside",[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}]])},S(e.label),3)],10,Ce)):b("",!0),J("div",{class:g(["input__global",[{"input__global--disabled":e.disabled,"input__global--readonly":e.readonly,"input__global--isQuiet":e.isQuiet,"input__global--error":e.error||e.dataError&&e.dataError.active}]])},[ae(e.$slots,"inputLeft",{},void 0,!0),(u(),R(fe(e.label?"div":"label"),{class:g([{"input__wrapper--label":!e.label,"input__wrapper--outside":e.labelPosition===r(Y).outside},"input__wrapper"]),aria:L()},{default:X(()=>{var F,E;return[le(J("input",{id:e.id,ref_key:"inputRef",ref:V,"onUpdate:modelValue":i[0]||(i[0]=p=>j.value=p),role:r(q)?"combobox":void 0,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autocomplete,maxlength:r(w)!=="number"?r(s):void 0,placeholder:e.placeholder,class:g(["input__field",[{"input__field--placeholder":e.placeholder&&e.placeholder.length>0,"input--disabled":e.disabled}]]),name:e.name,type:r(w)||"text",min:r(w)==="number"?r(y)||0:void 0,max:r(w)==="number"?r(d):void 0,"aria-describedby":I(),"aria-invalid":c()?c():void 0,"aria-required":H()?H():void 0,"aria-controls":o(),"aria-expanded":a(),"aria-autocomplete":(F=r(v))!=null&&F.ariaAutocomplete?r(v).ariaAutocomplete:W(),"aria-activedescendant":(E=r(v))!=null&&E.ariaAutocomplete?r(v).ariaAutocomplete:f(),onKeydown:i[1]||(i[1]=(...p)=>r(O)&&r(O)(...p)),onFocus:i[2]||(i[2]=(...p)=>r(z)&&r(z)(...p)),onInput:i[3]||(i[3]=(...p)=>r(K)&&r(K)(...p)),onBlur:i[4]||(i[4]=(...p)=>r(N)&&r(N)(...p))},null,42,Ne),[[ge,j.value]]),e.label&&e.labelPosition===r(Y).inside?(u(),m("label",{key:0,id:`${e.id}-label`||null,for:e.id,class:g(["input__label-tag",{"input__label-tag--disabled":e.disabled,"input__label-tag--readonly":e.readonly}])},[J("span",{class:g([[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}],"input__label input__label--inside"])},S(e.label),3)],10,Ke)):b("",!0)]}),_:1},8,["class","aria"])),ae(e.$slots,"inputRight",{},void 0,!0),e.unit?(u(),m("span",Me,[e.unit.description?(u(),m("abbr",{key:0,title:e.unit.description},S(e.unit.label),9,Le)):(u(),m("span",Te,S(e.unit.label),1))])):b("",!0),e.icon&&!e.tooltipComponent&&!e.success?(u(),R(te,{key:1,class:"input__icon",name:e.icon},null,8,["name"])):b("",!0),e.tooltipComponent&&!e.success?(u(),R(Ee,be({key:2,class:"small__popover"},Z.value),{tooltip:X(()=>[ae(e.$slots,"tooltipContent",{},void 0,!0)]),trigger:X(()=>[he(Se,{class:"input__icon input__icon--tooltip",icon:Z.value.triggerIcon,type:"ghost"},null,8,["icon"])]),_:3},16)):b("",!0),e.success?(u(),R(te,{key:3,class:"input__icon input__icon--success",name:"action-check"})):b("",!0),r(q)?(u(),R(ve,{key:4,name:"slide-fade"},{default:X(()=>[r(k)?le((u(),m("ul",{key:0,id:`${e.id}-listbox`,role:"listbox",class:"suggestions","aria-labelledby":e.id},[(u(!0),m(ke,null,qe(r(q),(F,E)=>(u(),m("li",{id:`${e.id}-suggestion-${e.label}`,key:`${e.id}-suggestion-${E}`,ref_for:!0,ref:p=>n.value[`suggestion-${E}-label`]=p,role:"option",class:g(["suggestions__item",{"suggestions__item--focused":E===r(_)}]),"aria-selected":E===r(_)?"true":void 0,onMousedown:p=>r(Q)(F)},S(F.label),43,Re))),128))],8,Fe)),[[we,r(k)]]):b("",!0)]),_:1})):b("",!0)],2),ee()?le((u(),m("p",{key:1,ref_key:"errorMessage",ref:G,class:"input__error-message","aria-live":"polite"},[ye(S(e.dataError?e.dataError.message:""),1)])),[[r(A),"input-error-message--"]]):b("",!0),e.message&&!((T=e.dataError)!=null&&T.active)?(u(),m("p",Ue,S(e.message),1)):b("",!0)],2)}}}),Je=Ae(se,[["__scopeId","data-v-7ccbc33c"]]);se.__docgenInfo={exportName:"default",displayName:"Input",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"aria",required:!1,type:{name:`{
  [key: string]: string
}`}},{name:"autocomplete",required:!1,type:{name:"string"}},{name:"autofocus",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"error",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"hideLabel",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"icon",required:!1,type:{name:"string"}},{name:"id",required:!0,type:{name:"string"}},{name:"inputRefStr",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'input'"}},{name:"isQuiet",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelId",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"mandatory",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"message",required:!1,type:{name:"string"}},{name:"max",required:!1,type:{name:"number"}},{name:"maxlength",required:!1,type:{name:"number"}},{name:"min",required:!1,type:{name:"number"}},{name:"name",required:!0,type:{name:"string"}},{name:"numericOnly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"readonly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.medium"}},{name:"success",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"suggestions",required:!1,type:{name:"Array",elements:[{name:"SuggestionType"}]}},{name:"type",required:!1,type:{name:"InputType"},defaultValue:{func:!1,value:"'text'"}},{name:"tooltipComponent",required:!1,type:{name:"TooltipProps"}},{name:"unit",required:!1,type:{name:"UnitProp"}},{name:"value",required:!1,type:{name:"union",elements:[{name:"string"},{name:"number"}]}}],events:[{name:"focus"},{name:"goUp"},{name:"goDown"},{name:"tabKeydown"},{name:"escKeydown"},{name:"enterPressed"},{name:"blur"},{name:"suggestionSelect"},{name:"input"},{name:"closeSuggestions"}],slots:[{name:"inputLeft"},{name:"inputRight"},{name:"tooltipContent"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/TextInput/Default/Input.vue"]};export{_e as A,Ie as L,Be as S,De as T,oe as a,Pe as b,Je as c,Ve as u};
