import{d as ge,m as G,b as ce,r as v,c as P,a as _e,f as p,g as h,y as g,B as x,e as I,t as T,H as A,D as H,E as F,x as U,C as k,J as Q,F as Pe,z as ke,v as Ne,A as X}from"./vue.esm-bundler-BiAlgFmf.js";import{S as L}from"./Icon-C-Sturzh.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";const be={key:0,role:"navigation",class:"pagination","aria-label":"Pagination"},we={class:"pagination__list"},xe=["disabled"],Le={key:0,class:"pagination__item pagination__item--other"},Me={key:1},Se={key:2},Ce={key:3,class:"pagination__item pagination__item--other"},Be=["disabled"],Y=ge({__name:"Pagination",props:G({labelPrefix:{},pageParam:{default:"page"},perPage:{},total:{},url:{},withLinks:{type:Boolean},modelValue:{}},{modelValue:{},modelModifiers:{}}),emits:G(["input"],["update:modelValue"]),setup($,{emit:Z}){const u=$,V=Z,t=ce($,"modelValue"),r=v([u.modelValue]),d=v([]),c=v(8),m=v(!0),M=v(0),N=v(!1),y=v([]),S=v(0),O=v(0),R=v(!1),K=v(!1),C=v(null),b=v(!1),w=e=>{e&&(m.value=!1,N.value=!0,t.value!==e&&(r.value=[],d.value=[],t.value=e,C.value=e,V("input",e)))},ee=e=>{w(e),D("none")},B=e=>({click:()=>{b.value=!1,w(e)},keydown:a=>{b.value=!0,(a.key==="Enter"||a.key===" ")&&ee(e)}}),q=P(()=>u.withLinks?"a":"button"),E=e=>{const a=u.withLinks?ae(e):{};return{class:u.withLinks?"pagination__item--link":"pagination__item--no-link",...a,"aria-label":u.labelPrefix?`${u.labelPrefix} page ${e}`:`page ${e}`,"aria-current":t.value===e?"page":void 0,"data-number":e}},ae=e=>{let a={};if(u.withLinks){if(!u.url)throw new Error("Missing required url props with withLinks props");const s=new URL(u.url),i=new URLSearchParams(s.search);e>1?i.set(u.pageParam,e.toString()):i.delete(u.pageParam);const n=i.toString();a={...a,href:s.pathname+(n.length?"?"+n:"")}}return a},l=P(()=>Math.ceil(u.total/u.perPage)),o=P(()=>{if((t==null?void 0:t.value)===void 0)return[];const e=Array(l.value).fill(null).map((i,n)=>n+1),a=f(10,t==null?void 0:t.value),s=(t==null?void 0:t.value)%10===0?((t==null?void 0:t.value)|0)+10:_(10,t==null?void 0:t.value);return e.reduce((i,n)=>{te(i,n);const fe=n<l.value,he=l.value<=c.value;return(!m.value||m.value&&(fe||he))&&se(i,n),r.value.length||t.value===1&&n>3&&l.value>c.value?i:t.value===l.value&&!d.value.length&&l.value>c.value?(n<t.value-3||i.push(n),i):(n>=a&&n<=s&&i.push(n),i)},[])}),te=(e,a)=>{(t==null?void 0:t.value)!==void 0&&a<f(10,t==null?void 0:t.value)&&d.value.forEach(s=>{a%10===0&&a<s&&a>=s-100&&e.push(a),a%100===0&&a<s-100&&e.push(a),s<=20&&a<s&&a<10&&e.push(a)})},se=(e,a)=>{r.value.forEach(s=>{const i=l.value-s<=10?!0:s>=l.value-10;if(a<f(10,s)&&s>=10)return e;le(e,a,s,i),ie(e,a,s,i),oe(e,a,s)})},le=(e,a,s,i)=>{a%10===0&&a%100!==0&&(a<_(100,s+1)&&a>f(100,s)&&!i||s>=f(100,l.value)-10)&&e.push(a),a%10===0&&a%100===0&&a<_(100,s+1)&&e.push(a)},ie=(e,a,s,i)=>{a>s&&a%100===0&&!i&&e.push(a)},oe=(e,a,s)=>{a%10!==0&&(a<=_(10,s+1)||s>=f(10,l.value)-10)&&e.push(a)},ne=P(()=>d.value.length===1?!1:o.value[0]>1),j=e=>{const a=e>3&&e<=l.value,s=l.value>c.value;return m.value&&!N.value&&a&&s},ue=P(()=>{const e=l.value<=c.value,a=o.value[o.value.length-1],s=l.value>c.value;return m.value&&s?!0:e||r.value.length===1||l.value<=10&&t.value!==1||l.value%10===1&&a===l.value-1||a===l.value-10||a===l.value-100?!1:(t==null?void 0:t.value)!==void 0&&l.value<20&&((t==null?void 0:t.value)|0)<10?!r.value.length:!o.value.some(i=>i===l.value)}),z=()=>{if((t==null?void 0:t.value)===void 0)return;const e=(t==null?void 0:t.value)<110?f(100,t==null?void 0:t.value)-1:_(100,t==null?void 0:t.value),a=String(t.value).length===2?_(10,t==null?void 0:t.value):e;d.value=[...d.value,d.value.length?o.value[0]:a]},D=e=>{K.value=e==="next",R.value=e==="prev"},ve=()=>{const e=[...o.value];z(),D("prev"),S.value=J(e,!0)??0},re=()=>{(t==null?void 0:t.value)!==void 0&&(r.value=[...r.value,r!=null&&r.value.length?o==null?void 0:o.value[o.value.length-1]:t==null?void 0:t.value])},W=()=>{M.value++;const e=N.value&&M.value===1;(!m.value||e)&&re(),m.value=!1,N.value=!1},pe=()=>{b.value=!0;const e=[...o.value];W(),D("next"),O.value=J(e)??0},J=(e,a=!1)=>(a?[...o.value].reverse():o.value).find(i=>!e.includes(i)),de=e=>{var a;return(a=y.value)==null?void 0:a.find(s=>s.dataset.number===String(e))},me=()=>{var a,s;if(!((a=y.value)!=null&&a.length)||!b.value)return;let e=null;R.value&&S.value?e=S.value:K.value&&y.value.length>3?e=M.value===1?4:O.value:C.value&&(e=C.value),e!==null&&((s=de(e))==null||s.focus())},_=(e,a)=>e*Math.ceil(a/e),f=(e,a)=>e*Math.floor(a/e);return _e(()=>{me()}),(e,a)=>e.total?(p(),h("nav",be,[g("ul",we,[g("li",null,[g("button",{class:"pagination__item pagination__item--prev",disabled:t.value===1,"aria-label":"Page précédente",onClick:a[0]||(a[0]=s=>t.value&&w(t.value-1))},[x(L,{name:"arrow-large-left"})],8,xe)]),o.value.some(s=>s===1)?k("",!0):(p(),h("li",Le,[(p(),I(U(q.value),H(E(1),F(e.withLinks?{}:B(1))),{default:T(()=>a[2]||(a[2]=[A(" 1 ")])),_:1},16))])),ne.value?(p(),h("li",Me,[g("button",{"arial-label":"Voir plus de pages",class:"pagination__item pagination__item--other",onClick:z,onKeydown:Q(ve,["enter","space"])},[x(L,{name:"settings-menu-action"})],32)])):k("",!0),(p(!0),h(Pe,null,ke(o.value,s=>(p(),h("li",{key:s,class:Ne(["pagination__item pagination__item--number",{"pagination__item--current":t.value===s,"visually-hidden":j(s)}])},[(p(),I(U(q.value),H({ref_for:!0,ref_key:"itemNumber",ref:y},E(s),{tabindex:j(s)?-1:void 0},F(e.withLinks?{}:B(s))),{default:T(()=>[A(X(s),1)]),_:2},1040,["tabindex"]))],2))),128)),ue.value?(p(),h("li",Se,[g("button",{"arial-label":"Voir plus de pages",class:"pagination__item pagination__item--other",onClick:W,onKeydown:Q(pe,["enter","space"])},[x(L,{name:"settings-menu-action"})],32)])):k("",!0),l.value&&!o.value.some(s=>s===l.value)?(p(),h("li",Ce,[(p(),I(U(q.value),H(E(l.value),F(e.withLinks?{}:B(l.value))),{default:T(()=>[A(X(l.value),1)]),_:1},16))])):k("",!0),g("li",null,[g("button",{class:"pagination__item pagination__item--next",disabled:t.value===l.value,"aria-label":"Page suivante",onClick:a[1]||(a[1]=s=>t.value&&w(t.value+1))},[x(L,{name:"arrow-large-right"})],8,Be)])])])):k("",!0)}}),Ie=ye(Y,[["__scopeId","data-v-c71a6e8e"]]);Y.__docgenInfo={exportName:"default",displayName:"Pagination",description:"",tags:{},props:[{name:"labelPrefix",required:!1,type:{name:"string"}},{name:"pageParam",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'page'"}},{name:"perPage",required:!0,type:{name:"number"}},{name:"total",required:!0,type:{name:"number"}},{name:"url",required:!1,type:{name:"string"}},{name:"withLinks",required:!1,type:{name:"boolean"}},{name:"modelValue",required:!0,type:{name:"number"}}],events:[{name:"input"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/Pagination/Pagination.vue"]};export{Ie as S};
