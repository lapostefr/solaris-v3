import{r as A,c as T,w as de,m as pe,x as ae,M as fe,y as me,j as ce,k as be,a as m,u as n,p as v,n as O,t as _,E as c,b as X,B as N,J as ve,G as U,H as ye,T as ge,D as Y,C as he,o as s,a3 as Se,z as le,A as ne,v as qe,N as ke,F as _e,q as Ee}from"./vue.esm-bundler-BV06ZB-3.js";import{S as te}from"./Icon-R0HSrbr6.js";import{S as we}from"./Tooltip--bRklYKV.js";import{S as Ve}from"./Button-DIKv7yJx.js";import{L as K}from"./types-Dd7QR7uO.js";import{g as $e}from"./generateId-DPOzJEtM.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Me(p,y,t,Q,E,w,V,l,B,d,D){var R;const u=A(-1),b=A(!1),P=T(()=>(V==null?void 0:V.value)&&((d==null?void 0:d.value)==="text"||(d==null?void 0:d.value)==="number")),q=a=>{const o=/^\d+([.,]\d+)?$/;if(P.value)if(!o.test(a.replace(/\s/g,"")))a=a.replace(/[^\d.,]/g,"").replace(/([.,])[.,]+/g,",").replace(/^([.,]+)/,"").replace(/\./,"_").replace(/\./g,"").replace("_",".").replace(/,/,"_").replace(/,/g,"").replace("_",",");else{const f=Number(a.replaceAll(",","."));t!=null&&t.value&&f&&(a=t.value<f?t.value.toString():a)}return a},g=(a,o)=>{const f=Number(a.replaceAll(",","."));return a!==""&&!isNaN(f)&&(a=o>f?o.toString():a),a},$=a=>{let o=a.target.value;P.value&&(o=q(o),a.target.value=o),E!=null&&E.value&&(o=o.slice(0,E.value)),l!=null&&l.value&&(u.value=-1),p("input",o)},h=a=>{p("focus",a)},G=()=>{(B==null?void 0:B.value).focus()},C=a=>{const o=D==null?void 0:D.value[`suggestion-${a}-label`];o&&o.scrollIntoView({block:"nearest",behavior:"auto"})},H=()=>{l!=null&&l.value&&S.value?(u.value++,u.value===l.value.length&&(u.value=0),C(u.value)):p("goDown")},J=()=>{l!=null&&l.value&&S.value&&(u.value--,u.value<0&&(u.value=l.value.length-1),C(u.value))},L=a=>{let o=a.target.value;P.value&&(w!=null&&w.value)&&(o=g(o,w.value),a.target.value=o),l!=null&&l.value&&M.value&&I(l.value[u.value]),p("blur",a)},z=a=>{b.value=!!(a!=null&&a.length)};de(()=>l==null?void 0:l.value,z);const F=T(()=>{const a={},o=(y==null?void 0:y.value)??{};return Object.keys(o).forEach(f=>a[`aria-${f}`]=y==null?void 0:y.value[f]),a}),I=a=>{k(),p("suggestionSelect",a)},k=(a=!0)=>{b.value=!1,a&&(u.value=-1)},M=T(()=>(l==null?void 0:l.value)&&u.value>=0&&u.value<l.value.length),S=T(()=>(l==null?void 0:l.value)&&l.value.length>0),W=a=>{if((d==null?void 0:d.value)==="number"&&["-"].includes(a.key)&&a.preventDefault(),a.key==="Escape"&&!S.value&&p("input",""),!!S.value)switch(a.key){case" ":M.value&&(k(),a.preventDefault(),p("closeSuggestions",a));break;case"Enter":l!=null&&l.value&&M.value&&I(l.value[u.value]);break;case"Tab":b.value&&k(!1);break;case"Escape":b.value&&k(),p("closeSuggestions",a);break}};return b.value=!!((R=l==null?void 0:l.value)!=null&&R.length),{suggestionsLayerIsVisible:b,ariaAttributes:F,suggestionFocus:u,hasSuggestions:S,checkMin:g,focus:h,sanitizeNumericonly:q,setFocus:G,goDown:H,goUp:J,blur:L,changeSuggestions:z,suggestionSelect:I,change:$,onKeydown:W}}const Ae=["for"],Be=["id","role","readonly","disabled","autocomplete","maxlength","placeholder","name","type","min","max","aria-describedby","aria-invalid","aria-required","aria-controls","aria-expanded","aria-autocomplete","aria-activedescendant"],De=["for"],Pe={key:0,class:"input__unit"},Ce=["title"],Ne={key:1},Te=["id","aria-labelledby"],Le=["id","aria-selected","onMousedown"],ze={key:2,class:"input__message"},oe=pe({__name:"Input",props:ae({dataError:{},aria:{},autocomplete:{},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean},error:{type:Boolean,default:!1},hideLabel:{type:Boolean,default:!1},icon:{},id:{},inputRefStr:{default:"input"},isQuiet:{type:Boolean,default:!1},label:{},labelPosition:{default:K.inside},mandatory:{type:Boolean,default:!1},message:{},max:{},maxlength:{},min:{},name:{},numericOnly:{type:Boolean,default:!1},placeholder:{},readonly:{type:Boolean,default:!1},size:{default:"medium"},success:{type:Boolean,default:!1},suggestions:{},type:{default:"text"},tooltipComponent:{default:()=>({})},unit:{},value:{}},{modelValue:{},modelModifiers:{}}),emits:ae(["focus","goDown","blur","suggestionSelect","input","closeSuggestions"],["update:modelValue"]),setup(p,{emit:y}){var x;const t=p,Q=T(()=>({displayElement:"inline-flex",forcePlacement:!1,offset:8,placement:"top",tooltipStyle:"default",trigger:"hover",triggerIcon:"search-loupe",...t.tooltipComponent})),E=y,w=$e,V=A(),l=A([]),{aria:B,max:d,inputRefStr:D,maxlength:u,min:b,numericOnly:P,suggestions:q,type:g}=fe(t),{suggestionFocus:$,suggestionsLayerIsVisible:h,hasSuggestions:G,focus:C,goDown:H,goUp:J,blur:L,suggestionSelect:z,change:F,onKeydown:I}=Me(E,B,d,D,u,b,P,q,V,g,l),k=me(p,"modelValue"),M=A(null),S=A(""),W=()=>{var e,r,i;return t.dataError&&((e=t.dataError)==null?void 0:e.active)&&((i=(r=t.dataError)==null?void 0:r.message)==null?void 0:i.length)},R=()=>!t.label&&t.placeholder?t.placeholder.toString():void 0,a=()=>{var e,r;return(e=t.dataError)!=null&&e.active&&((r=t.dataError)!=null&&r.message)?S.value:void 0},o=()=>{const e=M.value;S.value=e&&e.id?e.id:"error-message"},f=()=>{var e;return(e=t.dataError)!=null&&e.active?t.dataError.active:null},Z=()=>t.mandatory?t.mandatory:null,re=()=>t.suggestions?"list":null,ue=()=>t.suggestions?G.value?h==null?void 0:h.value:"false":!1,ie=()=>t.suggestions?`${t.id}-listbox`:null,se=()=>{const{suggestions:e,id:r}=t;return!e||e.length===0||$.value===-1?null:`${r}-suggestion-${e[$.value].label}`};return ce(()=>{o()}),be(()=>{o()}),h.value=!!((x=t.suggestions)!=null&&x.length),(e,r)=>(s(),m("div",{class:v(["input",[`input--${e.labelPosition}`,{"input--small":e.size=="small"||e.size=="compact","input--medium":e.size=="medium"||e.size=="default","input--filled":!!e.value,"input--only":!e.placeholder&&!e.value}]])},[e.label&&e.labelPosition===n(K).outside?(s(),m("label",{key:0,class:v(["input__label-tag",{"input__label-tag--disabled":e.disabled}]),for:e.id},[O("span",{class:v(["input__label input__label--outside",[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}]])},_(e.label),3)],10,Ae)):c("",!0),O("div",{class:v(["input__global",[{"input__global--disabled":e.disabled,"input__global--readonly":e.readonly,"input__global--isQuiet":e.isQuiet,"input__global--error":e.error||e.dataError&&e.dataError.active}]])},[X(e.$slots,"inputLeft",{},void 0,!0),(s(),N(ve(e.label?"div":"label"),{class:v([{"input__wrapper--label":!e.label,"input__wrapper--outside":e.labelPosition===n(K).outside},"input__wrapper"]),aria:R()},{default:U(()=>[Y(O("input",{id:e.id,ref_key:"inputRef",ref:V,"onUpdate:modelValue":r[0]||(r[0]=i=>k.value=i),role:n(q)?"combobox":null,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autocomplete,maxlength:n(g)!=="number"?n(u):void 0,placeholder:e.placeholder,class:v(["input__field",[{"input__field--placeholder":e.placeholder&&e.placeholder.length>0,"input--disabled":e.disabled}]]),name:e.name,type:n(g)||"text",min:n(g)==="number"?n(b)||0:void 0,max:n(g)==="number"?n(d):void 0,"aria-describedby":a(),"aria-invalid":f()?f():null,"aria-required":Z()?Z():null,"aria-controls":ie(),"aria-expanded":ue(),"aria-autocomplete":re(),"aria-activedescendant":se(),onKeydown:[r[1]||(r[1]=le(ne(i=>n(H)(),["prevent"]),["down"])),r[2]||(r[2]=le(ne(i=>n(J)(),["prevent"]),["up"])),r[3]||(r[3]=(...i)=>n(I)&&n(I)(...i))],onFocus:r[4]||(r[4]=(...i)=>n(C)&&n(C)(...i)),onBlur:r[5]||(r[5]=(...i)=>n(L)&&n(L)(...i)),onInput:r[6]||(r[6]=(...i)=>n(F)&&n(F)(...i))},null,42,Be),[[Se,k.value]]),e.label&&e.labelPosition===n(K).inside?(s(),m("label",{key:0,for:e.id,class:v(["input__label-tag",{"input__label-tag--disabled":e.disabled,"input__label-tag--readonly":e.readonly}])},[O("span",{class:v([[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}],"input__label input__label--inside"])},_(e.label),3)],10,De)):c("",!0)]),_:1},8,["class","aria"])),X(e.$slots,"inputRight",{},void 0,!0),e.unit?(s(),m("span",Pe,[e.unit.description?(s(),m("abbr",{key:0,title:e.unit.description},_(e.unit.label),9,Ce)):(s(),m("span",Ne,_(e.unit.label),1))])):c("",!0),e.icon&&!e.tooltipComponent&&!e.success?(s(),N(te,{key:1,class:"input__icon",name:e.icon},null,8,["name"])):c("",!0),e.tooltipComponent&&!e.success?(s(),N(we,ye({key:2,class:"small__popover"},Q.value),{tooltip:U(()=>[X(e.$slots,"tooltipContent",{},void 0,!0)]),trigger:U(()=>[qe(Ve,{class:"input__icon input__icon--tooltip",icon:Q.value.triggerIcon,type:"ghost"},null,8,["icon"])]),_:3},16)):c("",!0),e.success?(s(),N(te,{key:3,class:"input__icon input__icon--success",name:"action-check"})):c("",!0),n(q)?(s(),N(ge,{key:4,name:"slide-fade"},{default:U(()=>[n(h)?Y((s(),m("ul",{key:0,id:`${e.id}-listbox`,role:"listbox",class:"suggestions","aria-labelledby":e.id},[(s(!0),m(_e,null,Ee(n(q),(i,j)=>(s(),m("li",{id:`${e.id}-suggestion-${e.label}`,key:`${e.id}-suggestion-${j}`,ref_for:!0,ref:ee=>l.value[`suggestion-${j}-label`]=ee,role:"option",class:v(["suggestions__item",{"suggestions__item--focused":j===n($)}]),"aria-selected":j===n($)?"true":null,onMousedown:ee=>n(z)(i)},_(i.label),43,Le))),128))],8,Te)),[[ke,n(h)]]):c("",!0)]),_:1})):c("",!0)],2),W()?Y((s(),m("p",{key:1,ref_key:"errorMessage",ref:M,class:"input__error-message","aria-live":"polite"},[he(_(e.dataError?e.dataError.message:""),1)])),[[n(w),"input-error-message--"]]):c("",!0),e.message&&!e.dataError.active?(s(),m("p",ze,_(e.message),1)):c("",!0)],2))}}),Fe=Ie(oe,[["__scopeId","data-v-b9c7fef9"]]);oe.__docgenInfo={exportName:"default",displayName:"Input",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"aria",required:!1,type:{name:`{
  [key: string]: string
}`}},{name:"autocomplete",required:!1,type:{name:"string"}},{name:"autofocus",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"error",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"hideLabel",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"icon",required:!1,type:{name:"string"}},{name:"id",required:!0,type:{name:"string"}},{name:"inputRefStr",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'input'"}},{name:"isQuiet",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"mandatory",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"message",required:!1,type:{name:"string"}},{name:"max",required:!1,type:{name:"number"}},{name:"maxlength",required:!1,type:{name:"number"}},{name:"min",required:!1,type:{name:"number"}},{name:"name",required:!0,type:{name:"string"}},{name:"numericOnly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"readonly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"size",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"compact"'},{name:'"small"'},{name:'"medium"'}]},defaultValue:{func:!1,value:"'medium'"}},{name:"success",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"suggestions",required:!1,type:{name:"Array",elements:[{name:"SuggestionType"}]}},{name:"type",required:!1,type:{name:"InputType"},defaultValue:{func:!1,value:"'text'"}},{name:"tooltipComponent",required:!1,type:{name:"TooltipProps"},defaultValue:{func:!1,value:"() => ({})"}},{name:"unit",required:!1,type:{name:"UnitProp"}},{name:"value",required:!1,type:{name:"union",elements:[{name:"string"},{name:"number"}]}}],events:[{name:"focus"},{name:"goDown"},{name:"blur"},{name:"suggestionSelect"},{name:"input"},{name:"closeSuggestions"}],slots:[{name:"inputLeft"},{name:"inputRight"},{name:"tooltipContent"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue3-solaris/src/components/atoms/TextInput/Default/Input.vue"]};const He=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"}));export{Fe as S,He as _,Me as u};
