import{m as Ue,x as ke,y as xe,r as w,M as je,c as Je,w as A,j as Qe,k as We,a as i,n as $,u as a,p as S,t as V,E as c,z as p,A as k,v as B,G as Xe,T as Ye,o as t,D as ee,N as Ze,L as $e,B as I,f as Se,F as K,q as qe,U as ea,K as aa,H as la,O as sa,l as oa}from"./vue.esm-bundler-BV06ZB-3.js";import{S as Ve}from"./Icon-R0HSrbr6.js";import{_ as Fe}from"./Flag-BFL-r-ou.js";import{S as ra}from"./Picture-BTt4q-w2.js";import{S as ta}from"./Input-B2dYoFF6.js";import{u as da,S as na}from"./useDropdown-DKauCvUi.js";import{o as ia}from"./index-Lw3s2UWX.js";import{_ as ua}from"./_plugin-vue_export-helper-DlAUqK2U.js";var Me=(r=>(r.disabled="disabled",r.readonly="readonly",r.active="active",r))(Me||{}),G=(r=>(r.inside="inside",r.outside="outside",r))(G||{}),ca=(r=>(r.simple="simple",r.multiple="multiple",r))(ca||{}),F=(r=>(r.default="default",r.compact="compact",r.regular="regular",r.small="small",r.medium="medium",r))(F||{}),T=(r=>(r.simple="simple",r.multi="multi",r))(T||{}),De=(r=>(r.contains="contains",r.startswith="startswith",r))(De||{});const pa={class:"dropdown__wrapper"},ma=["aria-describedby","aria-invalid","aria-required"],fa=["for"],va=["tabindex","aria-disabled","aria-readonly"],ya={key:0,class:"dropdown__flag-container"},ba={class:"dropdown__value"},ga={key:1,class:"dropdown__container"},_a={key:0,class:"dropdown__placeholder"},ha={key:1,class:"dropdown__value"},wa={key:2,class:"dropdown__value"},ka=["id"],$a=["id","aria-selected","disabled","data-order","name","value","onKeydown","onChange"],Sa=["id","onUpdate:modelValue","aria-selected","disabled","data-order","name","value","onKeydown"],qa=["for"],Va={key:0,class:"dropdown__color"},Fa={class:"dropdown__text"},Ma={key:1,class:"dropdown__no-result"},Te=Ue({__name:"Dropdown",props:ke({lazyload:{type:Boolean,default:!0},loadFlags:{type:Boolean},active:{default:Me.active},activeGroup:{type:Boolean},dataError:{},id:{},label:{},labelPosition:{default:G.inside},listboxHeight:{default:0},mandatory:{type:Boolean},message:{},name:{},options:{},phoneCode:{},picto:{default:"arrow-bottom"},placeholder:{},selectionType:{},size:{default:F.default},type:{default:T.simple},searchField:{type:Boolean},searchFieldMode:{default:De.contains}},{modelValue:{},modelModifiers:{}}),emits:ke(["simpleSelected","change","multiSelected"],["update:modelValue"]),setup(r,{emit:Ce}){var ge,_e;const d=r,ae=xe(r,"modelValue"),R=Ce,U=oa(),m=w([]),le=w(null),y=w(),se=w(),oe=w(),x=w(!1),re=w({name:"",alt:""}),j=w(null),te=w(""),{id:b,options:de,active:Le,phoneCode:ne,searchField:ie,searchFieldMode:He,mandatory:ue}=je(d),{clickTarget:H,toggleListBox:M,close:g,displayAllFlags:J,multiSelected:ce,focusItem:O,optionSelected:Oe,dynamicListboxHeight:Ee,opened:C,dynamicHeight:pe,simpleValue:u,simpleLabel:L,searches:E,noSearchResult:ze,multiValue:Q,multiLabel:W,dynamicOptions:Ne,optionsList:z,dynamicOptionsList:X,focusedIndex:q,firstIndexOpt:Y,scrollSelectedValue:N,listForScroll:Pe,firstOptionChecked:me}=da(R,b,de,Le,ne,ie,He,m,se,y,oe);u.value=ae.value,ia(le,()=>g());const fe=Je(()=>z.value.find(e=>e.flag&&e.checked));A(u,()=>{g(),u.value!==void 0&&(ae.value=u.value,R("simpleSelected",u.value))});const D=()=>d.selectionType?d.selectionType:d.type;A(de,()=>{Z(fe.value)},{deep:!0});const ve=()=>{const e=z.value.find(l=>l.checked);if(e)return N.value=e.value,{label:e.label||e.value,value:e.value}},Ae=e=>{e.checked=!e.checked,z.value.forEach(l=>{l.id!==e.id&&(l.checked=!1)}),L.value=e.label||e.value,u.value=e.value,Z(e),R("change",e)},Z=e=>{e&&e.flag&&e.label?(x.value=!0,re.value={name:e.flag.name,alt:e.flag.alt}):x.value=!1},Be=()=>{const l=y.value.sort((s,h)=>s.dataset.order-h.dataset.order),f=X.value.findIndex(s=>s.checked&&!s.disabled),v=X.value.every(s=>s.disabled);f>=0?q.value=f:Y.value.disabled===0&&!v?q.value=Y.value.enabled:q.value=0,X.value.length>0&&l[q.value].focus()};A(E,async()=>{await ye()}),A(C,async()=>{await ye()});const ye=async()=>{var f,v;d.selectionType!=="simple"&&Ee(),await sa();const e=m.value[d.id],l=m.value[`${d.id}-optionsList`];me.value=Q.value?(f=z.value.find(s=>s.checked&&!s.disabled))==null?void 0:f.value:void 0,d.searchField&&((v=U==null?void 0:U.proxy)==null?void 0:v.$refs).search.$refs.inputRef.focus(),C.value?(N.value=D()==="multi"?me.value:u.value,l==null||l.scrollTo({top:Ke(),left:0})):(N.value=void 0,e.focus())},Ie=e=>{var he,we;const l=m.value[`${d.id}-optionsList`],f=m.value[`${e.id}-label`],v=e.position,s=e.groupNum+1,h=((he=m.value[`${d.id}-group-${s}`])==null?void 0:he.clientHeight)||0,o=(f==null?void 0:f.clientHeight)||0,n=(((l==null?void 0:l.clientHeight)||0)-o)/2;return d.searchField||((we=y==null?void 0:y.value[v])==null||we.focus(),q.value=v),s*h+v*o-n},Ke=()=>{const e=Oe(Pe.value);if(N.value!==void 0&&e&&!e.disabled)return Ie(e);d.searchField||(q.value=Y.value.enabled,y==null||y.value[q.value].focus())},Ge=()=>{var e,l;return(e=d.dataError)!=null&&e.active&&((l=d.dataError)!=null&&l.message)?te.value:void 0},be=()=>{te.value=j.value.idMessage?j.value.idMessage:"error-message"},Re=()=>{var e;return(e=d.dataError)!=null&&e.active?!0:null};D()==="simple"&&(u.value=(ge=ve())==null?void 0:ge.value,L.value=(_e=ve())==null?void 0:_e.label,Z(fe.value));const _=()=>d.options.length&&!!d.options[0].optionsList&&d.options[0].optionsList.length?d.active:"disabled";return Qe(()=>{be()}),We(()=>{be()}),(e,l)=>{var f,v;return t(),i("div",pa,[$("fieldset",{ref_key:"targetDropdown",ref:le,class:S(["dropdown",[`dropdown--${e.labelPosition}`,{"dropdown--small":e.size==a(F).small||e.size==a(F).compact,"dropdown--medium":e.size==a(F).medium||e.size==a(F).default||e.size==a(F).regular,"dropdown--filled":a(W)&&a(W).length>0||a(L)&&a(L).length>0,"dropdown--placeholder":!!e.placeholder,"dropdown--isOpen":a(C),"dropdown--disabled":_()==="disabled"}]]),"aria-describedby":Ge(),"aria-invalid":Re(),"aria-required":a(ue)||null,onMouseover:l[13]||(l[13]=(...s)=>a(J)&&a(J)(...s))},[e.label?(t(),i("legend",{key:0,ref:s=>m.value[a(b)]=s,class:S(["dropdown__label",[`dropdown__label--${e.labelPosition}`,{"dropdown__label--mandatory":a(ue),"dropdown__label--disabled":_()==="disabled","dropdown__label--readonly":_()==="readonly"}]]),for:a(b)},V(e.label),11,fa)):c("",!0),$("div",{ref:s=>m.value[a(b)]=s,class:S(["dropdown__element",[`dropdown__element--${e.labelPosition}`,{"dropdown__element--inside-label":!!e.label&&e.labelPosition===a(G).inside,"dropdown__element--inside-no-label":!e.label&&e.labelPosition===a(G).inside,"dropdown__element--disabled":_()==="disabled","dropdown__element--readonly":_()==="readonly","dropdown__element--error":(f=e.dataError)==null?void 0:f.active}]]),tabindex:_()!=="disabled"?0:-1,"aria-disabled":_()==="disabled","aria-readonly":_()==="readonly",onClick:l[0]||(l[0]=(...s)=>a(M)&&a(M)(...s)),onKeydown:[l[1]||(l[1]=p(k((...s)=>a(M)&&a(M)(...s),["prevent"]),["space","enter"])),l[2]||(l[2]=p((...s)=>a(M)&&a(M)(...s),["down","up"])),l[3]||(l[3]=p(k((...s)=>a(g)&&a(g)(...s),["shift","exact"]),["tab"]))]},[x.value?(t(),i("span",ya,[B(Fe,{class:"dropdown__flag-top",country:re.value},null,8,["country"]),$("span",ba,V(a(ne)),1)])):(t(),i("span",ga,[e.placeholder&&!a(Q)&&!a(u)?(t(),i("span",_a,V(e.placeholder),1)):c("",!0),D()===a(T).multi&&a(Q)?(t(),i("span",ha,V(a(W)),1)):c("",!0),D()===a(T).simple&&a(u)?(t(),i("span",wa,V(a(L)),1)):c("",!0)])),B(Ve,{name:e.picto,class:S(["dropdown__picto",{"dropdown__picto--isActive":e.picto==="arrow-bottom"&&a(C)}])},null,8,["name","class"])],42,va),B(na,{ref_key:"childMessage",ref:j,message:e.message,error:(v=e.dataError)==null?void 0:v.message,"data-error":e.dataError},null,8,["message","error","data-error"]),B(Ye,{name:"lightbox"},{default:Xe(()=>[ee($("div",{id:`${a(b)}-lightbox`,ref:s=>m.value[`${a(b)}-lightbox`]=s,class:"dropdown__lightbox",role:"listbox","aria-multiselectable":"true",style:$e([e.listboxHeight&&e.listboxHeight>16?{"max-height":e.listboxHeight+"px"}:"",a(pe)?{height:a(pe)+"px"}:""]),onKeydown:[l[10]||(l[10]=p((...s)=>a(H)&&a(H)(...s),["enter","space"])),l[11]||(l[11]=p((...s)=>a(g)&&a(g)(...s),["esc"])),l[12]||(l[12]=p(k((...s)=>a(g)&&a(g)(...s),["exact","prevent"]),["tab"]))]},[a(ie)?(t(),I(ta,{key:0,id:"idSearch",ref_key:"search",ref:se,modelValue:a(E),"onUpdate:modelValue":l[4]||(l[4]=s=>Se(E)?E.value=s:null),class:"dropdown__search",name:"nameSearch",type:"text",label:"Rechercher",icon:"search-loupe","is-quiet":"",autocomplete:"off",onGoDown:Be,onInput:a(J)},null,8,["modelValue","onInput"])):c("",!0),$("div",{ref:s=>m.value[`${a(b)}-optionsList`]=s,class:S(["dropdown__optionsList",{"dropdown__optionsList--readonly":_()==="readonly"}])},[(t(!0),i(K,null,qe(a(Ne),(s,h)=>(t(),i(K,{key:`dropdown-${a(b)}-group-${h}`},[e.activeGroup&&s.groupName?(t(),i("span",{key:0,ref_for:!0,ref:o=>m.value[`${a(b)}-group-${h}`]=o,class:"dropdown__group"},V(s.groupName),513)):c("",!0),(t(!0),i(K,null,qe(s.optionsList,(o,P)=>(t(),i(K,{key:`dropdown-${a(b)}-group-${h}-option-${P}-input`},[D()===a(T).simple?ee((t(),i("input",{key:0,id:o.id,ref_for:!0,ref_key:"optionRef",ref:y,"onUpdate:modelValue":l[5]||(l[5]=n=>Se(u)?u.value=n:null),type:"radio",role:"option","aria-selected":o.value===a(u),class:S(["dropdown__checker",[{"dropdown__checker--disabled":o.disabled}]]),disabled:o.disabled,"data-order":`${h}${P}`,name:o.radioName,value:o.value,onKeydown:[l[6]||(l[6]=p(k((...n)=>a(g)&&a(g)(...n),["prevent"]),["enter","space"])),p(k(n=>a(O)("previous",o.id),["prevent"]),["up"]),p(k(n=>a(O)("next",o.id),["prevent"]),["down"]),l[7]||(l[7]=p(k(()=>{},["prevent"]),["left","right"]))],onChange:n=>Ae(o)},null,42,$a)),[[ea,a(u)]]):c("",!0),D()===a(T).multi?ee((t(),i("input",{key:1,id:o.id,ref_for:!0,ref_key:"optionRef",ref:y,"onUpdate:modelValue":n=>o.checked=n,type:"checkbox",role:"option","aria-selected":o.checked,class:S(["dropdown__checker",[{"dropdown__checker--disabled":o.disabled}]]),disabled:o.disabled,"data-order":`${h}${P}`,name:o.checkboxName,value:o.value,onKeydown:[l[8]||(l[8]=p((...n)=>a(H)&&a(H)(...n),["space"])),p(k(n=>a(O)("previous",o.id),["prevent"]),["up"]),p(k(n=>a(O)("next",o.id),["prevent"]),["down"])],onChange:l[9]||(l[9]=(...n)=>a(ce)&&a(ce)(...n))},null,42,Sa)),[[aa,o.checked]]):c("",!0),$("label",{ref_for:!0,ref:n=>m.value[`${o.id}-label`]=n,for:o.id,class:S(["dropdown__item",[{"dropdown__item--disabled":o.disabled}]])},[o.color?(t(),i("i",Va,[$("span",{class:"dropdown__subcolor",style:$e({background:o.color})},null,4)])):c("",!0),o.icon?(t(),I(Ve,{key:1,name:o.icon,class:"dropdown__icon"},null,8,["name"])):c("",!0),e.loadFlags&&o.flag?(t(),I(Fe,{key:2,ref_for:!0,ref_key:"flag",ref:oe,class:"dropdown__flag",country:{name:o.flag.name,alt:""},lazyload:""},null,8,["country"])):c("",!0),o.image?(t(),I(ra,la({key:3,class:"dropdown__image",ref_for:!0},o.image),null,16)):c("",!0),$("span",Fa,V(o.label||o.value),1)],10,qa)],64))),128))],64))),128))],2),a(ze)?(t(),i("span",Ma,"Aucun résultat")):c("",!0)],44,ka),[[Ze,a(C)]])]),_:1})],42,ma)])}}}),Da=ua(Te,[["__scopeId","data-v-46444ea8"]]);Te.__docgenInfo={exportName:"default",displayName:"Dropdown",description:"",tags:{},props:[{name:"lazyload",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"loadFlags",required:!1,type:{name:"boolean"}},{name:"active",required:!1,type:{name:"Active"},defaultValue:{func:!1,value:"Active.active"}},{name:"activeGroup",required:!1,type:{name:"boolean"}},{name:"dataError",required:!1,type:{name:"DataError"}},{name:"id",required:!0,type:{name:"string"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"listboxHeight",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"mandatory",required:!1,type:{name:"boolean"}},{name:"message",required:!1,type:{name:"string"}},{name:"name",required:!0,type:{name:"string"}},{name:"options",required:!0,type:{name:"Array",elements:[{name:"Group"}]}},{name:"phoneCode",required:!1,type:{name:"string"}},{name:"picto",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'arrow-bottom'"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"selectionType",required:!1,type:{name:"SelectionType"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.default"}},{name:"type",required:!1,type:{name:"Type"},defaultValue:{func:!1,value:"Type.simple"}},{name:"searchField",required:!1,type:{name:"boolean"}},{name:"searchFieldMode",required:!1,type:{name:"SearchFieldMode"},defaultValue:{func:!1,value:"SearchFieldMode.contains"}},{name:"value",defaultValue:{func:!1,value:"null"}}],events:[{name:"simpleSelected"},{name:"change"},{name:"multiSelected"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue3-solaris/src/components/atoms/Dropdown/Default/Dropdown.vue"]};const Pa=Object.freeze(Object.defineProperty({__proto__:null,default:Da},Symbol.toStringTag,{value:"Module"}));export{Me as A,De as S,T,Pa as _,ca as a,F as b,Da as c};
