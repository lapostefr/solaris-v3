import{d as fe,r as d,c as s,o as pe,Y as de,g as N,y as D,h as I,v as E,L as $,C as ge,J as me,I as ve,f as L}from"./vue.esm-bundler-BiAlgFmf.js";import{o as ye}from"./index-a4aneQim.js";import{f as he}from"./generateId-CVaf2GGW.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";var be=(c=>(c.default="default",c.quiet="quiet",c))(be||{}),O=(c=>(c.default="default",c.quiet="quiet",c.spotlight="spotlight",c))(O||{});const Te=["tabindex"],_e=["id","onKeydown"],W=fe({__name:"Tooltip",props:{color:{default:O.default},displayElement:{default:"inline-flex"},forceShow:{type:Boolean},forcePlacement:{type:Boolean,default:!1},isManual:{type:Boolean},long:{type:Boolean},offset:{default:8},placement:{default:"top"},tooltipStyle:{},trigger:{default:"hover"},type:{default:"default"}},emits:["triggerEvent","close"],setup(c,{emit:A}){const t=c,B=A,k=d(null),y=d(null),b=d(t.placement),u=d(""),T=d(),x=["A","BUTTON"],_=d(""),C=d(null),g=d(!1);ye(k,()=>S());const z=s(()=>{let e="inherit",o="inherit",n="inherit",i="inherit";const p=t.offset;let a=p+4;t.color!==O.quiet&&(a=t.type==="empty-no-arrow"?0:p+4);const w=b.value.split("-"),r=w[0],l=w[1];return r==="top"&&(n=`calc(100% + ${a}px)`,l||(i="50%"),l==="start"&&(i="0"),l==="end"&&(o="0")),r==="bottom"&&(e=`calc(100% + ${a}px)`,l||(i="50%"),l==="start"&&(i="0"),l==="end"&&(o="0")),r==="left"&&(o=`calc(100% + ${a}px)`,l||(e="50%"),l==="start"&&(e="0"),l==="end"&&(n="0")),r==="right"&&(i=`calc(100% + ${a}px)`,l||(e="50%"),l==="start"&&(e="0"),l==="end"&&(n="0")),{tooltip:{display:"block",top:e,right:o,bottom:n,left:i}}}),R=s(()=>({display:t.displayElement,"--tooltip-offset":`${t.offset}px`})),U=s(()=>{let e="defaut";return t.tooltipStyle?e=t.tooltipStyle==="default"?"long":"default":t.color==="quiet"?e="default":e=t.long||t.type==="long"?"long":t.type,[`tooltip__popper--${b.value}`,`tooltip__popper--${e}`,g.value?"tooltip__popper--hover-closed":""].join(" ")}),j=s(()=>({"--arrow-border-width":`${t.offset}px`})),K=s(()=>{let e=t.trigger==="clickToOpen"||t.trigger==="clickToToggle"?"click":t.trigger,o=u.value||"";return t.isManual&&(e="",o=""),`tooltip__trigger--${e} tooltip__trigger--${o} ${J.value}`}),J=s(()=>t.forceShow&&u.value!=="closed"?"tooltip__trigger--forced":""),q=s(()=>t.trigger==="hover"||t.trigger==="focusOnly"),P=s(()=>y.value?[...y.value.children].flatMap(e=>[e,...e.children]):[]),Y=s(()=>`tooltip__arrow--${b.value}`),F=s(()=>T.value?T.value.firstElementChild:void 0),G=s(()=>{const e=F.value;if(t.trigger==="focusOnly"&&e&&!x.includes(e.tagName))return 0}),Q=()=>{t.trigger==="clickToOpen"&&(m(),u.value="open",h(!0)),t.trigger==="clickToToggle"&&(m(),u.value=u.value==="open"?"closed":"open",h(u.value==="open")),t.trigger==="focusOnly"&&X(),B("triggerEvent",u.value)},X=()=>{var o;const e=F.value;e instanceof HTMLElement&&(x.includes(e.tagName)||e.tabIndex===0?e.focus():(o=T.value)==null||o.focus())},h=e=>{const o=e?"0":"-1";P.value.forEach(n=>{var a;const i=(a=n.tagName)==null?void 0:a.toUpperCase();(x.includes(i)||n.hasAttribute("tabindex"))&&n.setAttribute("tabindex",o)})},Z=()=>{q.value&&(h(!0),g.value=!1)},V=()=>{g.value=!1},ee=()=>{if(q.value){const e=P.value,o=e[e.length-1];document.activeElement===o&&h(!1)}},te=e=>{["hover","focusOnly"].includes(t.trigger)&&e.preventDefault()},oe=()=>{m(),t.trigger==="hover"&&g.value&&(g.value=!1)},S=()=>{u.value="closed",h(!1),B("close")},m=()=>{const e=t.placement.split("-"),o=k.value,n=o==null?void 0:o.getBoundingClientRect().left,i=o==null?void 0:o.getBoundingClientRect().top,p=o==null?void 0:o.clientWidth,a=o==null?void 0:o.clientHeight,w=y.value,r=w.clientWidth+t.offset,l=w.clientHeight+t.offset,M=window.innerWidth-(n+p+r),ae=window.innerHeight-(i+a+l),se=window.innerWidth-(n+r),re=window.innerHeight-(i+l),ce=window.innerWidth-(n+r-(r-p)/2),ue=window.innerHeight-(i+l-(l-a)/2);let v=e[0],f=e[1];t.forcePlacement||(e[0]==="top"&&i<l&&(v="bottom"),e[0]==="bottom"&&ae<0&&(v="top"),(e[0]==="top"||e[0]==="bottom")&&(e[1]==="start"&&se<0&&(f="end"),e[1]==="end"&&n<r-p&&(f="start"),!e[1]&&ce<0&&(f="end"),!e[1]&&n<(r-p)/2&&(f="start")),e[0]==="left"&&n<r&&(v="right"),e[0]==="right"&&M<0&&(v="left"),(e[0]==="left"||e[0]==="right")&&(e[1]==="start"&&re<0&&(f="end"),e[1]==="end"&&i<l-a&&(f="start"),!e[1]&&ue<0&&(f="end"),!e[1]&&i<(l-a)/2&&(f="start"))),b.value=f?`${v}-${f}`:v},le=e=>{e.key==="Escape"&&(S(),q.value&&(g.value=!0))},ne=s(()=>t.trigger==="clickToToggle"||t.trigger==="clickToOpen"?_.value:void 0),ie=s(()=>t.trigger==="clickToToggle"||t.trigger==="clickToOpen"?u.value==="open":void 0),H=()=>{C.value&&clearTimeout(C.value),C.value=setTimeout(m,100)};return pe(()=>{t.forceShow&&(u.value="open"),y.value&&(_.value=he("popper--")),window.addEventListener("keydown",le),window.addEventListener("resize",m),window.addEventListener("scroll",H)}),de(()=>{window.removeEventListener("resize",m),window.removeEventListener("scroll",H)}),(e,o)=>(L(),N("div",{ref_key:"tooltip",ref:k,class:E(["tooltip",{"tooltip--spotlight":e.color==="spotlight"}]),style:$(R.value)},[D("div",{ref_key:"tooltipTrigger",ref:T,class:E(["tooltip__trigger",K.value]),tabindex:G.value,onClick:Q,onMouseover:oe,onMousedown:te,onFocusin:Z,onFocusout:V},[I(e.$slots,"trigger",{ariaControls:ne.value,ariaExpanded:ie.value,ariaDescribedby:_.value},void 0,!0)],42,Te),D("div",{id:_.value,ref_key:"tooltipPopper",ref:y,role:"tooltip",class:E(["tooltip__popper",U.value]),style:$(z.value.tooltip),onKeydown:me(ve(ee,["exact"]),["tab"]),onFocusout:V},[e.type!=="empty-no-arrow"||e.color==="quiet"?(L(),N("i",{key:0,class:E(["tooltip__arrow",Y.value]),style:$(j.value)},null,6)):ge("",!0),I(e.$slots,"tooltip",{closed:S},void 0,!0)],46,_e)],6))}}),qe=we(W,[["__scopeId","data-v-0e5f5536"]]);W.__docgenInfo={exportName:"default",displayName:"Tooltip",description:"",tags:{},props:[{name:"color",required:!1,type:{name:"Colors"},defaultValue:{func:!1,value:"Colors.default"}},{name:"displayElement",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'inline-flex'"}},{name:"forceShow",required:!1,type:{name:"boolean"}},{name:"forcePlacement",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isManual",required:!1,type:{name:"boolean"}},{name:"long",required:!1,type:{name:"boolean"}},{name:"offset",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"8"}},{name:"placement",required:!1,type:{name:"TooltipPlacement"},defaultValue:{func:!1,value:"'top'"}},{name:"tooltipStyle",required:!1,type:{name:"TooltipStyle"}},{name:"trigger",required:!1,type:{name:"union",elements:[{name:'"hover"'},{name:'"clickToOpen"'},{name:'"clickToToggle"'},{name:'"focusOnly"'}]},defaultValue:{func:!1,value:"'hover'"}},{name:"type",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"long"'},{name:'"empty-border"'},{name:'"empty-no-arrow"'},{name:'"empty"'}]},defaultValue:{func:!1,value:"'default'"}}],events:[{name:"triggerEvent"},{name:"close"}],slots:[{name:"trigger",scoped:!0,bindings:[{name:"aria-controls",title:"binding"},{name:"aria-expanded",title:"binding"},{name:"aria-describedby",title:"binding"}]},{name:"tooltip",scoped:!0,bindings:[{name:"closed",title:"binding"}]}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/Tooltip/Tooltip.vue"]};export{O as C,qe as S,be as T};
