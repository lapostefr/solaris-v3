import{r as f,Q as rt,d as Ze,a1 as et,c as N,w as Ke,a7 as ot,o as it,a6 as je,g as O,y as g,u as V,I as X,H as Q,B as ae,F as Ye,z as Ne,e as Je,t as Le,C as Be,v as J,f as C,A as ke,G as Oe,x as tt,m as Ue,b as dt,D as Re,q as ut}from"./vue.esm-bundler-CaiLyLZC.js";import{S as Pe}from"./Icon-CPWlc7Vn.js";import{S as ct}from"./Modal-BuGuII6G.js";import{S as Xe}from"./Button-DSIzHRrB.js";import{u as pt,a as mt,o as vt}from"./index-CAhNJgAn.js";import{_ as at}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as yt}from"./Message-BhgJ819g.js";import{f as ft}from"./generateId-CVaf2GGW.js";import{L as bt}from"./types-DKXD8uiR.js";var We=(z=>(z.small="small",z.medium="medium",z.large="large",z))(We||{});function nt(z,$e,w,o,E,de,ue,R){const U=f(-1e15),ce=f(!1),ne=rt({startDay:"",startMonth:"",startYear:U.value,endDay:"",endMonth:"",endYear:U.value,startDayInput:"",startMonthInput:"",startYearInput:"",endDayInput:"",endMonthInput:"",endYearInput:"",startNewTime:U.value,endNewTime:U.value}),le=f([{abbr:"Lun",name:"Lundi"},{abbr:"Mar",name:"Mardi"},{abbr:"Mer",name:"Mercredi"},{abbr:"Jeu",name:"Jeudi"},{abbr:"Ven",name:"Vendredi"},{abbr:"Sam",name:"Samedi"},{abbr:"Dim",name:"Dimanche"}]),Me=f(["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]),Ie=f(864e5),pe=f([{d:1,m:1},{d:1,m:5},{d:8,m:5},{d:14,m:7},{d:15,m:8},{d:1,m:11},{d:11,m:11},{d:25,m:12}]),me=f([17152488e5,17485128e5,17787528e5,18095976e5,18428616e5,17119656e5,17452296e5,17754696e5,18063144e5,18395784e5,17161992e5,17494632e5,17797032e5,1810548e6,1843812e6]),Se=(Y,Z,G,b)=>{let B=ue.value,a=w.value,L=E.value!==void 0?E.value:o.value,h=z.value,k=$e.value,$=R.value;b&&(B=b.weekend.value,a=b.disabledDaysByWeek.value,L=b.bankHolidays.value?b.bankHolidays.value:b.holidays.value,k=b.blackList.value,h=b.range.value,$=b.whiteList.value);let W=!1;const A=new Date(Y,Z,G).getTime(),I=new Date(A).getDay(),K=!!(B&&[0,6].includes(I)),j=!!(a&&a.includes(I));if(L){const ye=pe.value.filter(ie=>ie.d===G&&ie.m-1===Z),re=new Date(Y,Z,G,12,0,0,0).getTime(),oe=me.value.includes(re);W=ye.length>0||oe}const ee=!!(k&&k.length>0&&k.includes(A)),ve=!!($&&$.length>0&&!$.includes(A)),se=!!(h&&h.min&&A<h.min),H=!!(h&&h.max&&A>h.max),T=32-new Date(Y,Z,32).getDate(),_e=Array.from({length:T},(ye,re)=>re+1),De=G>_e.length;return K||j||W||ee||ve||se||H||De};return ce.value=de.value==="interval",{nullTime:U,interval:ce,inputData:ne,weekdays:le,allMonths:Me,oneDay:Ie,holidaysList:pe,isDisabled:Se}}const gt={class:"lp-datepicker__direction"},ht=["aria-label","onKeydown"],kt=["aria-label","onKeydown"],_t={class:"lp-datepicker__content"},Dt={class:"lp-datepicker__head"},wt={class:"lp-datepicker__head-month"},$t={class:"lp-datepicker__head-year"},Mt=["title"],It=["aria-current"],lt=Ze({__name:"DatepickerDays",props:{startNumber:{},endNumber:{},isInModal:{type:Boolean},isSmall:{type:Boolean,default:!0},size:{default:We.small},blackList:{},buttonLayout:{default:"centered"},range:{},disabledDaysByWeek:{},holidays:{type:Boolean},bankHolidays:{type:Boolean},typage:{default:"default"},weekend:{type:Boolean},whiteList:{},withReset:{type:Boolean}},emits:["selection","hide","opened","reset"],setup(z,{emit:$e}){const w=z,o=$e,E=f(null),de=f(null),{range:ue,blackList:R,disabledDaysByWeek:U,holidays:ce,bankHolidays:ne,typage:le,weekend:Me,whiteList:Ie}=et(w),{nullTime:pe,allMonths:me,weekdays:Se,interval:Y,isDisabled:Z,oneDay:G}=nt(ue,R,U,ce,ne,le,Me,Ie),b=f(0),B=f(0),a=f([]),L=f([]),h=f(!1),k=f(0),$=f(0),W=f(!1),A=pt(),I=N(()=>{const l=!w.startNumber||w.startNumber===pe.value,s=!w.endNumber||w.endNumber===pe.value;if(!Y.value&&l||Y.value&&l&&s)return[];const r=[];return l||r.push(w.startNumber),s||r.push(w.endNumber),r}),K=N(()=>{if(I.value.length===0)return[];const s=[I.value[0]];if(Y.value&&I.value.length>1){const r=I.value[1];s.push(r)}return s}),j=N(()=>{const s=Y.value?2:1,r=new Date(T.value.year,T.value.month+b.value+-1),c=new Date(T.value.year,T.value.month+b.value+s);return{left:{month:r.getMonth(),year:r.getFullYear()},right:{month:c.getMonth(),year:c.getFullYear()}}}),ee=N(()=>{const l=new Date(a.value[0]).getMonth(),s=new Date(a.value[1]).getMonth(),r=(x=0)=>new Date(T.value.year,T.value.month+b.value+x),c=r().getMonth(),p=r(1).getMonth(),u=Fe(l,s),i=u.includes(c),_=u.includes(p),y=i?"lp-datepicker--has-interval":"",M=_?"lp-datepicker--has-interval":"",F=[{..._e(r().getFullYear(),r().getMonth()),index:0,intervalClass:y}];if(Y.value){const x={..._e(r(1).getFullYear(),r(1).getMonth()),index:1,intervalClass:M};F.push(x)}return F}),ve=N(()=>w.isInModal?"fromModal":"fromDropdown"),se=N(()=>{const l=w.size==="small",s=w.size==="medium",r=w.size==="large";return{isSmall:l,isMedium:s,isLarge:r}}),H=N(()=>{const l=new Date;return l.setHours(12,0,0,0),{time:l.getTime(),date:l}});Ke($,l=>{l&&(b.value=0)}),Ke(()=>[I.value,W.value],([l,s])=>{l.length===2&&s&&(B.value=0)});const T=N(()=>{if($.value){const c=$.value,p=new Date(c),u=p.getFullYear(),i=p.getMonth();return{year:u,month:i,time:c}}if(I.value.length===0&&!W.value)return{year:H.value.date.getFullYear(),month:H.value.date.getMonth(),time:H.value.time};if(I.value.length===2&&W.value){const c=new Date(I.value[1]).getFullYear(),p=new Date(I.value[1]).getMonth()-B.value,u=I.value[1];return{year:c,month:p,time:u}}const l=new Date(I.value[0]).getFullYear(),s=new Date(I.value[0]).getMonth(),r=I.value[0];return{year:l,month:s,time:r}}),_e=(l,s)=>{const r=De(l,s),c=ye(l,s),p=re(r.length,c.length,l,s),u=[...c,...r,...p],i=7;return{days:r,month:s,next:p,previous:c,year:l,weeklyList:u.reduce((y,M,S)=>{const F=Math.floor(S/i);return y[F]=y[F]||[],y[F].push(M),y},[])}},De=(l,s)=>{const r=32-new Date(l,s,32).getDate();return Array.from({length:r},(u,i)=>i+1).map((u,i)=>{const _=new Date(l,s,u,12,0,0).getTime(),y=we(l,s,u,"CURRENT"),M=i===0;return{class:"lp-datepicker__day",day:u,itemProps:y,month:new Date(l,s,u,12,0,0).getMonth(),year:new Date(l,s,u,12,0,0).getFullYear(),time:_,isFirst:M,type:"day"}})},ye=(l,s)=>{const r=32-new Date(l,s-1,32).getDate(),c=new Date(l,s,1).getDay(),p=c>0?c-1:6,u=r-(p-1);return Array.from({length:p},(y,M)=>M+u).map(y=>{const M=new Date(l,s-1,y,12,0,0).getTime(),S=we(l,s-1,y,"PREVIOUS");return{class:"lp-datepicker__previous",day:y,itemProps:S,month:new Date(l,s-1,y).getMonth(),year:new Date(l,s-1,y).getFullYear(),time:M,type:"previous"}})},re=(l,s,r,c)=>{const p=l+s,i=Math.ceil(p/7)*7-p;return Array.from({length:i},(M,S)=>S+1).map(M=>{const S=new Date(r,c+1,M,12,0,0).getTime(),F=we(r,c+1,M,"NEXT");return{class:"lp-datepicker__next",day:M,itemProps:F,month:new Date(S).getMonth(),year:new Date(S).getFullYear(),time:S,type:"next"}})},oe=(l,s,r,c)=>{if(Z(l,s,r))return;h.value&&(a.value=[],h.value=!1);const p=new Date(l,s,r,12,0,0).getTime();k.value=p,$.value=0,Y.value||(a.value=[p],o("selection",a.value),b.value=0),Y.value&&(a.value.length<2?(B.value=c,a.value.push(p),L.value=[],a.value.sort(),W.value=!0,o("selection",a.value),b.value=0):(B.value=0,a.value=[p],o("selection",a.value)))},ie=()=>{o("hide",{from:ve.value})},Ae=()=>{h.value=!0,o("reset");const l=A.value.querySelector('[data-time-to-focus="'+k.value+'"]');l==null||l.focus()},Te=l=>{if(Y.value&&a.value.length===1){const s=G.value;if(l<a.value[0]){const r=l,c=a.value[0]-s;L.value=Array.from({length:(c-r)/s+1},(p,u)=>r+u*s)}if(l>a.value[0]){const r=a.value[0]+s,c=l;L.value=Array.from({length:(c-r)/s+1},(p,u)=>r+u*s)}}},fe=async(l,s)=>{const r=l,c=s==="left"||s==="right",p=s==="left"||s==="up",u=c?G.value:G.value*7,i=p?-1*u:u,_=xe(r,i);k.value=_,$.value=_,await je(),A.value.querySelector('[data-time-to-focus="'+k.value+'"]').focus()},xe=(l,s)=>{let r=l;r+=s;const c=new Date(r);return c.setHours(12,0,0,0),c.getTime()},Fe=(l,s)=>{if(isNaN(s))return[];let r=[];if(l<=s)r=Array.from({length:s-l+1},(p,u)=>l+u);else{const p=Array.from({length:12-l},(i,_)=>l+_),u=Array.from({length:s+1},(i,_)=>_);r=p.concat(u)}return r},Ve=()=>{A.value.querySelector(".lp-datepicker__arrow--right").focus()},P=async()=>{A.value.querySelector(".lp-datepicker__closer").focus()},qe=async()=>{A.value.querySelector('[data-time-to-focus="'+k.value+'"]').focus()},ze=async()=>{A.value.querySelector(".lp-datepicker__arrow--left").focus()},we=(l,s,r,c)=>{let p="button",u="",i=" lp-datepicker__td ",_=!1,y=-1,M=null,S=!1;const F=new Date(l,s,r,12,0,0),x=F.getTime(),He={weekday:"long",year:"numeric",month:"long",day:"numeric"},be=F.toLocaleDateString("fr-FR",He);let ge=`${be}.`;const Ce=c==="NEXT"||c==="PREVIOUS";(Z(l,s,r)||Ce)&&(p="span",u+=" lp-datepicker--disabled ",_=!0,ge=`Date non sélectionnable. ${be}.`),a.value.includes(x)&&I.value.length!==0&&!h.value&&(p="button",u+=" lp-datepicker__selected ",y=-1,ge=`Sélectionné, ${be}.`,i+=" lp-datepicker--parent-selected "),x===H.value.time&&(u+=" lp-datepicker__today ",ge=`Aujourd'hui, ${be}.`,M="date"),x===H.value.time&&a.value.includes(x)&&(ge=`Aujourd'hui, Sélectionné, ${be}.`),(x===a.value[0]||x===a.value[1])&&!h.value&&(S=!0),k.value===x&&(y=0);const e=a.value[0]!==a.value[1];return a.value.length>0&&x===a.value[0]&&e&&!h.value&&(i+=" lp-datepicker--start "),a.value.length===2&&x===a.value[1]&&e&&!h.value&&(i+=" lp-datepicker--end "),a.value.length===2&&x>a.value[0]&&x<a.value[1]&&!h.value&&(u+=" lp-datepicker__interval ",i+=" lp-datepicker--parent-interval "),{tag:p,elementClass:u,parentClass:i,disabled:_,tabindex:y,ariaLabel:ge,ariaCurrent:M,ariaSelected:S}};return ot(()=>{const l=ee.value.flatMap(s=>s.days).map(s=>s.time);l.includes(k.value)||(k.value=l[0])}),it(async()=>{const l=A.value;o("opened",l.getBoundingClientRect()),qe(),w.isInModal&&await je(),l.querySelector('[data-time-to-focus="'+k.value+'"]').focus()}),a.value=K.value.sort(),k.value=T.value.time,(l,s)=>(C(),O("div",{ref_key:"datepickerBox",ref:E,class:J(["lp-datepicker",[{"lp-datepicker--interval":V(Y)},{"lp-datepicker--in-modal":l.isInModal},{"lp-datepicker--medium":se.value.isMedium},{"lp-datepicker--large":se.value.isLarge},{"lp-datepicker--frontof":l.isSmall}]]),onKeydown:X(ie,["esc"])},[g("div",gt,[g("button",{"aria-label":`${V(me)[j.value.left.month]} ${j.value.left.year}`,class:"lp-datepicker__arrow lp-datepicker__arrow--left",onKeydown:X(Q(P,["exact","shift","prevent"]),["tab"]),onClick:s[0]||(s[0]=r=>b.value-=1)},[ae(Pe,{class:"lp-datepicker__arrow-icon",name:"arrow-left",type:"light"})],40,ht),g("button",{ref_key:"datepickerArrowRight",ref:de,"aria-label":`${V(me)[j.value.right.month]} ${j.value.right.year}`,class:"lp-datepicker__arrow lp-datepicker__arrow--right",onKeydown:X(Q(qe,["exact","prevent"]),["tab"]),onClick:s[1]||(s[1]=r=>b.value+=1)},[ae(Pe,{class:"lp-datepicker__arrow-icon",name:"arrow-right",type:"light"})],40,kt)]),g("div",_t,[(C(!0),O(Ye,null,Ne(ee.value,(r,c)=>(C(),O("table",{key:`range-${c}`,class:J(["lp-datepicker__inside",r.intervalClass])},[g("caption",null,[g("div",Dt,[g("span",wt,ke(V(me)[r.month]),1),g("span",$t,ke(r.year),1)])]),g("thead",null,[g("tr",null,[(C(!0),O(Ye,null,Ne(V(Se),(p,u)=>(C(),O("th",{key:`weekdays-${p}-${u}`,scope:"col",class:"lp-datepicker__th"},[g("abbr",{title:p.name,class:"lp-datepicker__weekday"},ke(p.abbr),9,Mt)]))),128))])]),g("tbody",null,[(C(!0),O(Ye,null,Ne(r.weeklyList,(p,u)=>(C(),O("tr",{key:`line-${c}-${u}`},[(C(!0),O(Ye,null,Ne(p,(i,_)=>(C(),O("td",{key:`item-${c}-${u}-${_}`,class:J([i.itemProps.parentClass,{"lp-datepicker__previous--hidden":i.type==="previous","lp-datepicker__next--hidden":i.type==="next"}]),"aria-current":i.itemProps.ariaCurrent},[(C(),Je(tt(i.itemProps.tag),{"aria-label":i.itemProps.ariaLabel,"aria-selected":i.itemProps.ariaSelected,"data-time-to-focus":i.time,tabindex:i.itemProps.tabindex,class:J([[i.itemProps.elementClass,{"lp-datepicker__first":i.isFirst&&!r.index}],"lp-datepicker__day"]),onMouseover:y=>Te(i.time),onClick:y=>oe(i.year,i.month,i.day,r.index),onKeydown:[X(Q(y=>oe(i.year,i.month,i.day,r.index),["prevent"]),["space"]),X(Q(y=>oe(i.year,i.month,i.day,r.index),["prevent"]),["enter"]),X(Q(Ve,["exact","shift","prevent"]),["tab"]),X(Q(y=>fe(i.time,"up"),["prevent"]),["up"]),X(Q(y=>fe(i.time,"down"),["prevent"]),["down"]),X(Q(y=>fe(i.time,"left"),["prevent"]),["left"]),X(Q(y=>fe(i.time,"right"),["prevent"]),["right"])]},{default:Le(()=>[Oe(ke(i.day),1)]),_:2},1064,["aria-label","aria-selected","data-time-to-focus","tabindex","class","onMouseover","onClick","onKeydown"]))],10,It))),128))]))),128))])],2))),128))]),g("div",{class:J(["lp-datepicker__actions",`lp-datepicker__actions--${l.withReset&&l.buttonLayout==="centered"?"btns-":""}${l.buttonLayout}`])},[l.withReset?(C(),Je(Xe,{key:0,"aria-label":"réinitialiser le calendrier",type:"ghost",color:"darkgrey",size:"small",class:"lp-datepicker__reset",onClick:Ae},{default:Le(()=>s[2]||(s[2]=[Oe(" Réinitialiser ")])),_:1})):Be("",!0),ae(Xe,{"aria-label":"Fermer le calendrier",color:"default",type:l.withReset?"secondary":"ghost",size:"small",class:"lp-datepicker__closer",onKeydown:X(Q(ze,["exact","prevent"]),["tab"]),onClick:ie},{default:Le(()=>s[3]||(s[3]=[Oe(" Fermer ")])),_:1},8,["type","onKeydown"])],2)],34))}}),Ge=at(lt,[["__scopeId","data-v-df2a2013"]]);lt.__docgenInfo={exportName:"default",displayName:"DatepickerDays",description:"",tags:{},props:[{name:"startNumber",required:!1,type:{name:"number"}},{name:"endNumber",required:!1,type:{name:"number"}},{name:"isInModal",required:!1,type:{name:"boolean"}},{name:"isSmall",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.small"}},{name:"blackList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"buttonLayout",required:!1,type:{name:"union",elements:[{name:'"centered"'},{name:'"align-right"'}]},defaultValue:{func:!1,value:"'centered'"}},{name:"range",required:!1,type:{name:"Range"}},{name:"disabledDaysByWeek",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"holidays",required:!1,type:{name:"boolean"}},{name:"bankHolidays",required:!1,type:{name:"boolean"}},{name:"typage",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"interval"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"weekend",required:!1,type:{name:"boolean"}},{name:"whiteList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"withReset",required:!1,type:{name:"boolean"}}],events:[{name:"selection"},{name:"hide"},{name:"opened"},{name:"reset"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/Datepicker/Tools/DatepickerDays.vue"]};const Qe=z=>/^(0?[1-9]|[12][0-9]|3[01])[/](0?[1-9]|1[012])[/]\d{4}$/.test(z),Ee={xxs:320,xs:375,s:700,m:992,l:1280,xl:1440,xxl:1680,xxxl:3e3},St=["aria-describedby","aria-invalid","aria-required"],xt=["aria-label","value","readonly","tabindex","disabled"],qt=["aria-label","value","readonly","tabindex","disabled"],Rt=["aria-label","value","readonly","tabindex","disabled"],Bt=["aria-describedby","aria-invalid","aria-required"],Lt={class:"lp-datepicker__inputs"},At=["aria-label","value","readonly","tabindex","disabled"],Tt=["aria-label","value","readonly","tabindex","disabled"],Ft=["aria-label","value","readonly","tabindex","disabled"],Vt=["aria-expanded","disabled"],Ct=["aria-expanded","disabled"],Yt={key:1,class:"lp-datepicker__dropdown"},st=Ze({__name:"Datepicker",props:Ue({aria:{},dataError:{},disabled:{type:Boolean},end:{},size:{default:We.medium},start:{},blackList:{},buttonLayout:{},range:{},disabledDaysByWeek:{},holidays:{type:Boolean},bankHolidays:{type:Boolean},mandatory:{type:Boolean},typage:{default:"default"},inputReadonly:{type:Boolean},label:{},labelPosition:{default:bt.inside},message:{},weekend:{type:Boolean},whiteList:{},withReset:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:Ue(["input","blur","change","selection","reset"],["update:modelValue"]),setup(z,{emit:$e}){var Ce;const w=dt(z,"modelValue"),o=z,E=$e,de=f(ft("lp-datepicker-id--")),ue=ut(),R=(Ce=ue==null?void 0:ue.proxy)==null?void 0:Ce.$el,U=f(),ce=f(),ne=f(),le=f(),{range:Me,blackList:Ie,disabledDaysByWeek:pe,holidays:me,bankHolidays:Se,typage:Y,weekend:Z,whiteList:G}=et(o),{nullTime:b,interval:B,inputData:a}=nt(Me,Ie,pe,me,Se,Y,Z,G),L=f(b.value),h=f(b.value),k=f(!1),$=f(!1),W=f({left:"0px",right:"inherit",transform:"translateX(0)",isSmall:!1}),A=f({maxHeight:"auto"}),I=N(()=>j.value?"fieldset":"div"),K=N(()=>o.typage==="default"),j=N(()=>!K.value&&o.labelPosition==="outside"),ee=N(()=>K.value&&o.label||o.start.label),ve=f("lp-datepicker__opened--bottom"),se=f(!1),H=f(!1),T=e=>{H.value=!1;const t=e.target,n=t.value,d=t.dataset.datepickerName||"",v=t.selectionStart,m=n.replace(/\D/g,"");if(t.value=m,v!==null){const D=n.length-m.length;t.setSelectionRange(v-D,v-D)}qe(m,d,"start"),B.value&&qe(m,d,"end"),(/^\d*$/.test(n)||!m)&&E("input",e)},_e=N(()=>({colorBorderTop:"supernova",mobileFull:!1,size:"default",showTitle:!1,title:K.value?"Choisir la date":"Choisir les dates"})),De=e=>{const t=e.height,n=U.value;if(!n)return;const d=n.getBoundingClientRect(),v=d.top,m=window.innerHeight-d.bottom;let D="bottom";m<t+16&&v>t+16&&(D="top"),ve.value=`lp-datepicker__opened--${D}`,d.top>=0&&d.bottom<=window.innerHeight&&d.left>=0&&d.right<=window.innerWidth||n.scrollIntoView({behavior:"smooth",block:"center"})},ye=N(()=>{const e={},t=o.aria??{};return Object.keys(t).forEach(n=>e[`aria-${n}`]=t[n]),e}),re=N(()=>{var t,n;const e=[];return(t=o.aria)!=null&&t.describedby&&e.push(o.aria.describedby),(n=o.dataError)!=null&&n.active?e.push(`error-message--${de.value}`):o.message&&e.push(`message--${de.value}`),e.length>0?e.join(" "):void 0}),oe=mt({tablet_landscape:Ee.m,tablet:Ee.s}),ie=e=>{const t=oe.isGreaterOrEqual("tablet_landscape"),n=oe.isGreaterOrEqual("tablet"),d=t,v=B.value&&d?758:Ee.xs,m=v===Ee.xs,D=(R==null?void 0:R.getBoundingClientRect().left)+v>window.innerWidth,te=D?"inherit":"0px",he=D?"0px":"inherit";W.value={left:n?te:"50%",transform:n?"":"translateX(-50%)",right:he,isSmall:m},e==="modale"?($.value=!$.value,k.value=!1):(k.value=!k.value,$.value=!1),H.value&&Ae()},Ae=()=>{L.value=b.value,h.value=b.value},Te=()=>{H.value=!0,Object.keys(a).forEach(d=>{d.endsWith("Input")&&(a[d]="")});const e=L.value!==b.value,t=h.value!==b.value,n=[...e?[L.value]:[],...t?[h.value]:[]];E("reset",n),e&&t&&(h.value=b.value)},fe=e=>{var d,v;let t="dropdown";e.from==="fromDropdown"&&(k.value=!k.value),e.from==="fromModal"&&(t="modal",$.value=!$.value),(d=le.value)==null||d.focus(),(v=ne.value)==null||v.focus();const n=R==null?void 0:R.querySelector(".lp-datepicker__toggle--"+t);n==null||n.focus()},xe=()=>{if(k.value){k.value=!1;const e=R==null?void 0:R.querySelector(".lp-datepicker__toggle--dropdown");e==null||e.focus()}},Fe=()=>{$.value&&($.value=!1);const e=R==null?void 0:R.querySelector(".lp-datepicker__toggle--modal");e==null||e.focus()},Ve=e=>{const t={day:`${e}DayInput`,month:`${e}MonthInput`,year:`${e}YearInput`},n=a[t.day];if(n){const m=parseInt(n);a[t.day]=m===0?"01":m.toString().padStart(2,"0")}const d=a[t.month];["0","1"].includes(d)&&(a[t.month]="01");const v=a[t.year];if(v){const m=parseInt(v);m<100?a[t.year]=(m+2e3).toString():a[t.year]=m.toString().padStart(4,"0")}},P=(e,t)=>{if(o.inputReadonly){se.value=!1;return}if(se.value=!!e,k.value=!1,e===!1&&t==="start"){if(Ve(t),!a.startDayInput||!a.startMonthInput||!a.startYearInput)return;const n=`${a.startDayInput}/${a.startMonthInput}/${a.startYearInput}`;E("input",n),E("blur"),w.value&&(w.value[0]=`${n}`)}if(e===!1&&t==="end"){if(Ve(t),!a.endDayInput||!a.endMonthInput||!a.endYearInput)return;const n=`${a.endDayInput}/${a.endMonthInput}/${a.endYearInput}`;E("input",n),E("blur"),w.value&&(w.value[1]=`${n}`)}},qe=(e,t,n)=>{if(t===`${n}-day`){const d=r(e,a[`${n}MonthInput`],a[`${n}YearInput`]);a[`${n}DayInput`]=d,a[`${n}Day`]=d,a[`${n}DayInput`]==="0"&&(a[`${n}Day`]="01")}if(t===`${n}-month`){const d=c(e,n,a[`${n}DayInput`],a[`${n}YearInput`]);a[`${n}MonthInput`]=d,a[`${n}Month`]=d,a[`${n}MonthInput`]==="0"&&(a[`${n}Month`]="01")}if(t===`${n}-year`){const d=p(e,n,a[`${n}DayInput`],a[`${n}MonthInput`]);a[`${n}YearInput`]=e,a[`${n}Year`]=d}ze(n)},ze=e=>{a[`${e}NewTime`]=x(a[`${e}Year`],a[`${e}Month`],a[`${e}Day`]);const t=we("start"),n=we("end");e==="start"?L.value=t?b.value:a.startNewTime:e==="end"&&(h.value=n?b.value:a.endNewTime)},we=e=>a[`${e}DayInput`]===""||a[`${e}MonthInput`]===""||a[`${e}YearInput`]==="",l=(e,t,n)=>t?`0${e}`:n?`0${e[0]}`:e.length===2&&e==="00"?"01":e,s=(e,t,n)=>{const d=parseInt(e),v=parseInt(t);let m=parseInt(n);m=m<100?m+2e3:m;const D=new Date(m,v,0).getDate();return{dayValue:d,monthValue:v,yearValue:m,daysInMonth:D}},r=(e,t,n)=>{const{dayValue:d,daysInMonth:v}=s(e,t,n),m=Math.floor(v/10)||3,D=e.length===1&&d>m,te=d>v||(!t||!n)&&d>31;return l(e,D,te)},c=(e,t,n,d)=>{const{monthValue:v,dayValue:m,daysInMonth:D}=s(n,e,d),te=e.length===1&&v>1,he=v>12,q=l(e,te,he);return u(m,D,t),q},p=(e,t,n,d)=>{const{dayValue:v,daysInMonth:m,yearValue:D}=s(n,d,e);return u(v,m,t),D},u=(e,t,n)=>{if(e>t){const v=n==="start"?"startDayInput":"endDayInput",m=n==="start"?"startDay":"endDay";a[v]=t.toString(),a[m]=t.toString()}},i=e=>{var n,d,v,m;H.value&&(Ae(),H.value=!1);const t=new Date(e[0]);if(a.startDay=_(t.getDate()),a.startMonth=_(t.getMonth()+1),a.startYear=t.getFullYear(),F("start"),L.value=e[0],B.value||(w.value=[S(String(e[0]))],E("selection",e[0]),xe(),Fe(),(n=le.value)==null||n.focus(),(d=ne.value)==null||d.focus()),B.value&&e.length===1&&(w.value=[S(String(e[0]))],E("selection",e[0])),B.value&&e.length===2){const D=new Date(e[1]);a.endDay=_(D.getDate()),a.endMonth=_(D.getMonth()+1),a.endYear=D.getFullYear(),F("end"),h.value=e[1],w.value=[S(String(e[0])),S(String(e[1]))],E("selection",e),xe(),Fe(),(v=le.value)==null||v.focus(),(m=ne.value)==null||m.focus()}},_=e=>e.toLocaleString("fr-FR",{minimumIntegerDigits:2}),y=e=>e.split("/"),M=e=>{const t=y(e),n=t[0],d=t[1],v=parseInt(t[2]);return x(v,d,n)},S=e=>{const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),d=String(t.getMonth()+1).padStart(2,"0"),v=t.getFullYear();return`${n}/${d}/${v}`},F=e=>{a[`${e}DayInput`]=a[`${e}Day`],a[`${e}MonthInput`]=a[`${e}Month`],a[`${e}YearInput`]=""+a[`${e}Year`]},x=(e,t,n)=>new Date(e,parseInt(t)-1,parseInt(n),12,0,0).getTime(),He=e=>{if(!e.date||!Qe(e.date))return;const t=e.date,n=y(t);a.startDay=n[0],a.startMonth=n[1],a.startYear=parseInt(n[2]),F("start"),L.value=M(t)},be=e=>{if(!e||!e.date||!Qe(e.date))return;const t=e.date,n=y(t);a.endDay=n[0],a.endMonth=n[1],a.endYear=parseInt(n[2]),F("end"),h.value=M(t)},ge=()=>{He(o.start),B.value&&be(o.end)};return vt(U,()=>xe()),L.value=b.value,h.value=b.value,ge(),(e,t)=>{var n;return C(),Je(tt(I.value),{class:J(["lp-datepicker__container",[{"lp-datepicker--error":(n=e.dataError)==null?void 0:n.active},{"lp-datepicker__container--outside-default":K.value&&o.labelPosition==="outside"}]])},{default:Le(()=>{var d,v,m,D,te,he;return[j.value&&o.label?(C(),O("legend",{key:0,class:J([{"lp-datepicker__label--outside":j.value}])},ke(o.label),3)):Be("",!0),g("div",{ref_key:"datepicker",ref:U,class:J(["lp-datepicker__wrapper",[`lp-datepicker__wrapper--${o.size}`,{"lp-datepicker__wrapper--outside":K.value&&o.labelPosition==="outside"},{"lp-datepicker__wrapper--focused":se.value},{"lp-datepicker__wrapper--disabled":o.disabled},{"lp-datepicker__wrapper--interval":V(B)},{"lp-datepicker__wrapper--readonly":o.inputReadonly},{"lp-datepicker__wrapper--empty":V(a).startDayInput===""&&V(a).startMonthInput===""&&V(a).startYearInput===null},{"lp-datepicker--error":(d=e.dataError)==null?void 0:d.active}]])},[g("fieldset",Re({class:["lp-datepicker__date",{[`lp-datepicker__default-${o.labelPosition}`]:K.value}]},ye.value,{"aria-describedby":re.value,"aria-invalid":((v=o.dataError)==null?void 0:v.active)??!1,"aria-required":o.mandatory}),[g("legend",{class:J(["lp-datepicker__label",[{"visually-hidden":j.value,"lp-datepicker__label--mandatory":o.mandatory,"lp-datepicker__label--outside-default":o.labelPosition==="outside"},K.value?`lp-datepicker__label--${o.labelPosition}`:"lp-datepicker__label--inside"]])},ke(ee.value),3),g("div",{class:J(["lp-datepicker__inputs",{[`lp-datepicker__inputs--${o.labelPosition}`]:K.value}])},[g("input",{id:"datepicker-start",type:"text",class:"lp-datepicker__input lp-datepicker__input--day",maxlength:"2","aria-label":`${ee.value}, Jour, Format attendu : JJ (exemple: 12)`,value:V(a).startDayInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,inputmode:"numeric",placeholder:"JJ","data-datepicker-name":"start-day",onInput:T,onFocus:t[0]||(t[0]=q=>P(!0,"start")),onBlur:t[1]||(t[1]=q=>P(!1,"start"))},null,40,xt),t[15]||(t[15]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--month",maxlength:"2","aria-label":`${ee.value}, Mois, Format attendu : MM (exemple : 08)`,value:V(a).startMonthInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,inputmode:"numeric",placeholder:"MM","data-datepicker-name":"start-month",onInput:T,onFocus:t[2]||(t[2]=q=>P(!0,"start")),onBlur:t[3]||(t[3]=q=>P(!1,"start"))},null,40,qt),t[16]||(t[16]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--year",maxlength:"4","aria-label":`${ee.value}, Année, Format attendu : AAAA (exemple : 2018)`,value:V(a).startYearInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,inputmode:"numeric",placeholder:"AAAA","data-datepicker-name":"start-year",onInput:T,onFocus:t[4]||(t[4]=q=>P(!0,"start")),onBlur:t[5]||(t[5]=q=>P(!1,"start"))},null,40,Rt)],2)],16,St),V(B)?(C(),O("fieldset",Re({key:0,class:"lp-datepicker__date lp-datepicker__label--inside"},ye.value,{"aria-describedby":re.value,"aria-invalid":((m=o.dataError)==null?void 0:m.active)??!1,"aria-required":e.mandatory}),[e.end?(C(),O("legend",{key:0,class:J(["lp-datepicker__label",{"lp-datepicker__label--mandatory":e.mandatory,"visually-hidden":j.value}])},ke(e.end.label),3)):Be("",!0),g("div",Lt,[g("input",{id:"datepicker-end",type:"text",class:"lp-datepicker__input lp-datepicker__input--day",maxlength:"2","aria-label":`${(D=e.end)==null?void 0:D.label}, Jour, Format attendu : JJ (exemple: 12)`,value:V(a).endDayInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,inputmode:"numeric",placeholder:"JJ","data-datepicker-name":"end-day",onInput:T,onFocus:t[6]||(t[6]=q=>P(!0,"end")),onBlur:t[7]||(t[7]=q=>P(!1,"end"))},null,40,At),t[17]||(t[17]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--month",maxlength:"2","aria-label":`${(te=e.end)==null?void 0:te.label}, Mois, Format attendu : MM (exemple: 08)`,value:V(a).endMonthInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,inputmode:"numeric",placeholder:"MM","data-datepicker-name":"end-month",onInput:T,onFocus:t[8]||(t[8]=q=>P(!0,"end")),onBlur:t[9]||(t[9]=q=>P(!1,"end"))},null,40,Tt),t[18]||(t[18]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--year",maxlength:"4","aria-label":`${(he=e.end)==null?void 0:he.label}, Année, Format attendu : AAAA (exemple: 2018)`,value:V(a).endYearInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,inputmode:"numeric",placeholder:"AAAA","data-datepicker-name":"end-year",onInput:T,onFocus:t[10]||(t[10]=q=>P(!0,"end")),onBlur:t[11]||(t[11]=q=>P(!1,"end"))},null,40,Ft)])],16,Bt)):Be("",!0),g("button",{ref_key:"datepickerButtonDropdown",ref:ne,"aria-expanded":k.value,"aria-label":"Choisir la date dans un calendrier",class:J([[`lp-datepicker__toggle--${e.size}`,{"lp-datepicker__toggle--readonly":e.inputReadonly}],"lp-datepicker__toggle lp-datepicker__toggle--dropdown"]),disabled:o.disabled,onClick:t[12]||(t[12]=q=>ie("dropdown"))},[ae(Pe,{name:"editing-calendar",type:"light"})],10,Vt),g("button",{ref_key:"datepickerButtonModal",ref:le,"aria-expanded":$.value,"aria-label":"Choisir la date dans un calendrier",class:J([[`lp-datepicker__toggle--${e.size}`,{"lp-datepicker__toggle--readonly":e.inputReadonly}],"lp-datepicker__toggle lp-datepicker__toggle--modal"]),disabled:o.disabled,onClick:t[13]||(t[13]=q=>ie("modale"))},[ae(Pe,{name:"editing-calendar",type:"light"})],10,Ct),ae(ct,Re({modelValue:$.value,"onUpdate:modelValue":t[14]||(t[14]=q=>$.value=q)},_e.value,{class:"lp-datepicker__modal"}),{content:Le(()=>[ae(Ge,Re({ref_key:"datepickerDropdown",ref:ce,class:["lp-datepicker__opened",ve.value],"is-in-modal":!0,"is-small":W.value.isSmall,style:[W.value,A.value],"start-number":L.value,"end-number":h.value},e.$props,{onOpened:De,onSelection:i,onHide:fe,onReset:Te}),null,16,["is-small","class","style","start-number","end-number"])]),_:1},16,["modelValue"]),k.value?(C(),O("div",Yt,[ae(Ge,Re({ref_key:"datepickerDropdown",ref:ce,class:["lp-datepicker__opened",ve.value],style:[W.value,A.value],"start-number":L.value,"end-number":h.value},o,{onOpened:De,onSelection:i,onHide:fe,onReset:Te}),null,16,["class","style","start-number","end-number"])])):Be("",!0)],2),ae(yt,{id:de.value,message:e.message,"data-error":e.dataError},null,8,["id","message","data-error"])]}),_:1},8,["class"])}}}),jt=at(st,[["__scopeId","data-v-6385e0a3"]]);st.__docgenInfo={exportName:"default",displayName:"Datepicker",description:"",tags:{},props:[{name:"aria",required:!1,type:{name:`{
  [key: string]: string
}`}},{name:"dataError",required:!1,type:{name:"DataError"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"end",required:!1,type:{name:"DateType"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.medium"}},{name:"start",required:!0,type:{name:"DateType"}},{name:"blackList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"buttonLayout",required:!1,type:{name:"union",elements:[{name:'"centered"'},{name:'"align-right"'}]}},{name:"range",required:!1,type:{name:"Range"}},{name:"disabledDaysByWeek",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"holidays",required:!1,type:{name:"boolean"}},{name:"bankHolidays",required:!1,type:{name:"boolean"}},{name:"mandatory",required:!1,type:{name:"boolean"}},{name:"typage",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"interval"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"inputReadonly",required:!1,type:{name:"boolean"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"message",required:!1,type:{name:"string"}},{name:"weekend",required:!1,type:{name:"boolean"}},{name:"whiteList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"withReset",required:!1,type:{name:"boolean"}}],events:[{name:"input"},{name:"blur"},{name:"change"},{name:"selection"},{name:"reset"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/Datepicker/Datepicker.vue"]};export{jt as S,We as a,Qe as i};
