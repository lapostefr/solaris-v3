import{m as j,r as B,c as K,k as U,a0 as Y,o as a,a as o,n as i,B as y,G as u,C as v,t as l,J as P,E as r,L as H,p as _,b as k,H as Q,F as T,q as I,v as M,l as X,V}from"./vue.esm-bundler-BV06ZB-3.js";import{S as L}from"./Divider-8H8YcS_F.js";import{S as Z}from"./Picture-BTt4q-w2.js";import{S as x}from"./Icon-R0HSrbr6.js";import{S as O}from"./Button-DIKv7yJx.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as ee}from"./Modal-NRfyb4RI.js";const te={class:"summary-step"},ae={key:0,class:"header__text"},se={key:1,class:"header__text__subtitle"},oe=["src","alt","width","height"],ie={key:0,class:"summary-step__picture"},ne={key:0,class:"summary-step__line summary-step__line--step"},re={class:"summary-step__line"},le={class:"summary-step__item"},me=["innerHTML"],de={key:0,class:"summary-step__line"},ue={class:"summary-step__item summary-step__item--subInfo"},pe={class:"summary-step__line summary-step__line--price"},ce={class:"summary-step__item summary-step__item--bold"},ye={key:0,class:"summary-step__informations"},he={class:"summary-step__line"},_e={class:"summary-step__item"},be={class:"summary-step__item"},fe={class:"summary-step__caption__list"},ve=["innerHTML"],ge={key:1,class:"summary-step__checkbox"},G=j({__name:"SummaryStep",props:{btnFullWidth:{type:Boolean},id:{},showDetails:{type:Boolean,default:!0},subtitleTag:{default:"h3"},titleTag:{default:"h2"},button:{default:"Étape suivante"},buttonDivider:{type:Boolean},displayCloseModalButton:{type:Boolean},emptySpaceBottom:{default:()=>({active:!1})},hasHeader:{type:Boolean},header:{},image:{},isLoading:{type:Boolean},hiddenButton:{type:Boolean},nextStepDisabled:{type:Boolean},price:{},steps:{},stickyDesktop:{default:"default"}},emits:["nextStep","closeModal","stepIcon"],setup(z,{emit:E}){const m=z,S=E,p=X(),b=B(!1),f=B(""),w=B(!1),g=B(0),D=()=>{S("nextStep")},q=()=>{S("closeModal",!1)},C=e=>{S("stepIcon",e)},$=K(()=>m.hasHeader&&m.stickyDesktop==="bottom"&&w.value),h=()=>{window.innerWidth>=1280?m.stickyDesktop==="block"&&(f.value="bottom: 8px"):f.value=""},N=()=>{w.value=window.pageYOffset<g.value,g.value=window.pageYOffset},t=()=>{h(),m.stickyDesktop==="bottom"&&m.hasHeader&&N()};return U(()=>{p!=null&&p.proxy.$slots&&(b.value=!(p!=null&&p.proxy.$slots.input)),h(),window.addEventListener("scroll",t),window.addEventListener("resize",h)}),Y(()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",h)}),(e,d)=>(a(),o("div",te,[i("div",{class:_(["summary-step__header",{"summary-step__header--subtitle":e.header.subtitle}])},[e.header.title||e.header.subtitle?(a(),o("div",ae,[e.header.title?(a(),y(P(e.titleTag),{key:0,class:"header__text__title"},{default:u(()=>[v(l(e.header.title),1)]),_:1})):r("",!0),e.header.subtitle?(a(),o("div",se,l(e.header.subtitle),1)):r("",!0)])):r("",!0),e.header.logo?(a(),o("div",{key:1,class:"header__logo",style:H([e.header.logo.maxHeight?{"max-height":e.header.logo.maxHeight+"px"}:""])},[i("img",{class:"header__logo-image",src:e.header.logo.url,alt:e.header.logo.alt,width:e.header.logo.width,height:e.header.logo.height},null,8,oe)],4)):r("",!0)],2),e.image||e.$slots.image?(a(),o("div",ie,[k(e.$slots,"image",{},void 0,!0),e.image?(a(),y(L,{key:0,class:"summary-step__divider",color:"light","padding-top-bottom":0})):r("",!0),e.image?(a(),y(Z,Q({key:1,class:"summary-step__illustration"},e.image),null,16)):r("",!0)])):r("",!0),(a(!0),o(T,null,I(e.steps,(s,c)=>(a(),o("div",{key:c,class:"summary-step__main"},[i("div",{class:_({"summary-step__informations":!s.name})},[M(L,{class:"summary-step__divider",color:"light","padding-top-bottom":0}),s.name||s.icon?(a(),o("div",ne,[s.name?(a(),y(P(e.subtitleTag),{key:0,class:"summary-step__title"},{default:u(()=>[v(l(s.name),1)]),_:2},1024)):r("",!0),s.icon?(a(),y(x,{key:1,class:"summary-step__icon",role:"button",title:"Modifier l'étape "+s.name,tabindex:"0",name:s.icon.name==="edit"?"action-pen":"editing-trash",size:"small",onClick:n=>C(s.icon.eventName)},null,8,["title","name","onClick"])):r("",!0)])):r("",!0),e.showDetails?(a(),o("div",{key:1,class:_(["summary-step__informations",{"summary-step__line--step":!s.name}])},[(a(!0),o(T,null,I(s.options,(n,F)=>(a(),o("div",{key:`option-${F}`},[i("div",re,[i("div",le,l(n.name),1),n.onClick?(a(),y(O,{key:0,class:"summary-step__link",icon:"action-pen","icon-reverse":"",size:"small",type:"ghost",onClick:n.onClick},{default:u(()=>[v(l(n.info),1)]),_:2},1032,["onClick"])):(a(),o("div",{key:1,class:_(["summary-step__item",{"summary-step__item--promoted":n.hasPromotion}]),innerHTML:n.info},null,10,me))]),n.subName&&n.subInfo||n.hasPromotion?(a(),o("div",de,[i("div",ue,l(n.subName),1),i("div",{class:_(["summary-step__item",{"summary-step__item--subInfo":!n.hasPromotion,"summary-step__item--promo":n.hasPromotion}])},l(n.subInfo),3)])):r("",!0)]))),128))],2)):r("",!0)],2)]))),128)),M(L,{class:"summary-step__divider",type:e.steps&&e.steps.length?"dotted":"solid",color:"light","padding-top-bottom":0},null,8,["type"]),i("div",{class:_(["summary-step__bottom",{sticky:e.stickyDesktop==="bottom",sticky__withHeader:e.stickyDesktop==="bottom"&&$.value}])},[i("div",pe,[(a(),y(P(e.subtitleTag),{class:"summary-step__item summary-step__item--total"},{default:u(()=>[v(l(e.price.name),1)]),_:1})),i("div",ce,l(e.price.value)+" € ",1)]),e.price.options?(a(),o("div",ye,[(a(!0),o(T,null,I(e.price.options,(s,c)=>(a(),o("div",{key:`option-${c}`},[i("div",he,[i("div",_e,l(s.name),1),i("div",be,l(s.info),1)])]))),128))])):r("",!0),i("div",fe,[(a(!0),o(T,null,I(e.price.captions,(s,c)=>(a(),o("div",{key:"option-"+c,class:"summary-step__item summary-step__item--caption",innerHTML:s},null,8,ve))),128))]),b.value?r("",!0):(a(),o("div",ge,[k(e.$slots,"input",{id:e.id},void 0,!0)])),e.buttonDivider?(a(),y(L,{key:2,class:"summary-step__divider summary-step__divider--button",color:"light","padding-top-bottom":0})):r("",!0),e.displayCloseModalButton?(a(),y(O,{key:3,class:_(["summary-step__close","summary-step__close__button"]),type:"secondary","icon-reverse":"",color:"darkgrey",size:"regular",onClick:d[0]||(d[0]=s=>q())},{default:u(()=>d[2]||(d[2]=[v(" Fermer ")])),_:1})):e.hiddenButton?r("",!0):(a(),y(O,{key:4,class:_(["summary-step__validate","summary-step__validate__button",{"summary-step__validate__button--fullwidth":e.btnFullWidth}]),icon:"arrow-right","icon-reverse":"",size:"regular","is-loading":e.isLoading,disabled:e.nextStepDisabled,style:H(f.value),onClick:d[1]||(d[1]=s=>D())},{default:u(()=>[v(l(e.button),1)]),_:1},8,["class","is-loading","disabled","style"]))],2)]))}}),W=A(G,[["__scopeId","data-v-5589b286"]]);G.__docgenInfo={exportName:"default",displayName:"SummaryStep",description:"",tags:{},props:[{name:"btnFullWidth",required:!1,type:{name:"boolean"}},{name:"id",required:!0,type:{name:"string"}},{name:"showDetails",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"subtitleTag",required:!1,type:{name:"HeaderTag"},defaultValue:{func:!1,value:"'h3'"}},{name:"titleTag",required:!1,type:{name:"HeaderTag"},defaultValue:{func:!1,value:"'h2'"}},{name:"button",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Étape suivante'"}},{name:"buttonDivider",required:!1,type:{name:"boolean"}},{name:"displayCloseModalButton",required:!1,type:{name:"boolean"}},{name:"emptySpaceBottom",required:!1,type:{name:"EmptySpaceBottom"},defaultValue:{func:!1,value:"() => ({ active: false })"}},{name:"hasHeader",required:!1,type:{name:"boolean"}},{name:"header",required:!0,type:{name:"HeaderType"}},{name:"image",required:!1,type:{name:"Image"}},{name:"isLoading",required:!1,type:{name:"boolean"}},{name:"hiddenButton",required:!1,type:{name:"boolean"}},{name:"nextStepDisabled",required:!1,type:{name:"boolean"}},{name:"price",required:!0,type:{name:"PriceType"}},{name:"steps",required:!1,type:{name:"Array",elements:[{name:"StepsType"}]}},{name:"stickyDesktop",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"block"'},{name:'"button"'},{name:'"bottom"'}]},defaultValue:{func:!1,value:"'default'"}}],events:[{name:"nextStep"},{name:"closeModal"},{name:"stepIcon"}],slots:[{name:"image"},{name:"input",scoped:!0,bindings:[{name:"id",title:"binding"}]}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue3-solaris/src/components/molecules/OrderSummary/SummaryStep/SummaryStep.vue"]};const Le=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"})),ke={key:0,class:"order-summary__validate order-summary__validate--sticky"},Se={class:"order-summary__line"},Be={class:"order-summary__line"},we={class:"order-summary__item"},De={class:"order-summary__item order-summary__item__price"},J=j({__name:"OrderSummary",props:{showMobileDetails:{type:Boolean,default:!0},stepBtnFullWidth:{type:Boolean},stickyMobile:{type:Boolean},button:{default:"Étape suivante"},buttonDivider:{type:Boolean},displayCloseModalButton:{type:Boolean},emptySpaceBottom:{default:()=>({active:!1,height:0})},hasHeader:{type:Boolean},header:{},image:{},isLoading:{type:Boolean},hiddenButton:{type:Boolean},nextStepDisabled:{type:Boolean},price:{},steps:{},stickyDesktop:{default:"default"}},emits:["nextStep","stepIcon"],setup(z,{emit:E}){const m=z,S=E,p=B(null),b=V({bottom:"0px",height:"auto",width:"",left:""}),f=V({increaseSpace:0,bottomSpaceHeight:0}),w=V({height:"110px"}),g=B(!1),D=V({maxHeight:"initial",paddingTop:"0px"}),q=()=>{S("nextStep")},C=t=>{S("stepIcon",t)},$=()=>{g.value=!g.value},h=()=>{var t;if(window.innerWidth>=1280){const e=(t=p==null?void 0:p.value)==null?void 0:t.getBoundingClientRect(),d=window.innerHeight,s=d-e.bottom;let c=e.top>0?e.top:0;c+=s>0?s:0;const n=d-c-f.increaseSpace,F=s>0?s:0,R=m.stickyDesktop==="block"?e.width-16:e.width;b.bottom=`${F}px`,b.height=`${f.bottomSpaceHeight}px`,b.width=`${R}px`,b.left=`${e.left}px`,m.stickyDesktop==="block"&&(D.maxHeight=`${n}px`)}else D.maxHeight="initial"},N=()=>{var d,s,c,n;const t=(d=m.emptySpaceBottom)==null?void 0:d.height,e=t?m.emptySpaceBottom.height:135;t&&(w.height=`${((s=m.emptySpaceBottom)==null?void 0:s.height)+10}px`),f.increaseSpace=(c=m.emptySpaceBottom)!=null&&c.active?e:0,f.bottomSpaceHeight=(n=m.emptySpaceBottom)!=null&&n.active&&m.stickyDesktop==="block"?e+60:100,h()};return U(()=>{N(),window.addEventListener("scroll",h),window.addEventListener("resize",h)}),Y(()=>{window.removeEventListener("scroll",h),window.removeEventListener("resize",h)}),(t,e)=>(a(),o("div",{ref_key:"orderSummary",ref:p,class:_(["order-summary",{"order-summary--sticky-mobile":t.stickyMobile,"order-summary--sticky-desktop":t.stickyDesktop==="block","order-summary--chatbot":t.emptySpaceBottom&&t.emptySpaceBottom.active,"order-summary--chatbot--only":t.emptySpaceBottom&&t.emptySpaceBottom.active&&t.stickyDesktop!=="block"}])},[i("div",{class:_(["order-summary__container",{"order-summary__container--sticky":t.stickyDesktop==="block"}]),style:H(D)},[M(W,{id:"desktop","btn-full-width":t.stepBtnFullWidth,class:"order-summary__element",header:t.header,image:t.image,steps:t.steps,price:t.price,button:t.button,"has-header":t.hasHeader,"button-divider":t.buttonDivider,"hidden-button":t.hiddenButton,"next-step-disabled":t.nextStepDisabled,"sticky-desktop":t.stickyDesktop,"empty-space-bottom":t.emptySpaceBottom,"is-loading":t.isLoading,onNextStep:q,onStepIcon:C},{image:u(()=>[k(t.$slots,"logo",{},void 0,!0)]),input:u(()=>[k(t.$slots,"checkbox",{},void 0,!0)]),_:3},8,["btn-full-width","header","image","steps","price","button","has-header","button-divider","hidden-button","next-step-disabled","sticky-desktop","empty-space-bottom","is-loading"]),M(ee,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=d=>g.value=d),class:"order__modal",title:t.header.title,size:"default"},{content:u(()=>[M(W,{id:"mobile",header:{...t.header,title:null},steps:t.steps,price:t.price,button:t.button,"display-close-modal-button":t.displayCloseModalButton,"show-details":t.showMobileDetails,onCloseModal:$,onNextStep:q,onStepIcon:C},{image:u(()=>[k(t.$slots,"logo",{},void 0,!0)]),input:u(()=>[k(t.$slots,"checkbox",{},void 0,!0)]),_:3},8,["header","steps","price","button","display-close-modal-button","show-details"])]),_:3},8,["modelValue","title"]),t.stickyMobile?(a(),o("div",ke,[i("div",Se,[i("div",Be,[i("div",we,[v(l(t.price.name)+" - ",1),i("button",{class:"order-summary__item__link",onClick:$}," Voir le détail ")])]),i("div",De,l(t.price.value)+"€ ",1)]),t.hiddenButton?r("",!0):(a(),y(O,{key:0,class:"order-summary__validate__button",icon:"arrow-right","icon-reverse":"",size:"regular","is-loading":t.isLoading,onClick:q},{default:u(()=>[v(l(t.button),1)]),_:1},8,["is-loading"])),k(t.$slots,"orderSummaryBottom",{},void 0,!0)])):r("",!0),i("div",{ref:"orderSummaryBottomSpace",class:"order-summary__bottom-space",style:H(b)},null,4)],6),t.emptySpaceBottom&&t.emptySpaceBottom.active&&t.stickyDesktop!=="block"?(a(),o("div",{key:0,class:"order-summary--empty-block",style:H(w)},null,4)):r("",!0)],2))}}),qe=A(J,[["__scopeId","data-v-29433551"]]);J.__docgenInfo={exportName:"default",displayName:"OrderSummary",description:"",tags:{},props:[{name:"showMobileDetails",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"stepBtnFullWidth",required:!1,type:{name:"boolean"}},{name:"stickyMobile",required:!1,type:{name:"boolean"}},{name:"button",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Étape suivante'"}},{name:"buttonDivider",required:!1,type:{name:"boolean"}},{name:"displayCloseModalButton",required:!1,type:{name:"boolean"}},{name:"emptySpaceBottom",required:!1,type:{name:"EmptySpaceBottom"},defaultValue:{func:!1,value:"() => ({ active: false, height: 0 })"}},{name:"hasHeader",required:!1,type:{name:"boolean"}},{name:"header",required:!0,type:{name:"HeaderType"}},{name:"image",required:!1,type:{name:"Image"}},{name:"isLoading",required:!1,type:{name:"boolean"}},{name:"hiddenButton",required:!1,type:{name:"boolean"}},{name:"nextStepDisabled",required:!1,type:{name:"boolean"}},{name:"price",required:!0,type:{name:"PriceType"}},{name:"steps",required:!1,type:{name:"Array",elements:[{name:"StepsType"}]}},{name:"stickyDesktop",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"block"'},{name:'"button"'},{name:'"bottom"'}]},defaultValue:{func:!1,value:"'default'"}}],events:[{name:"nextStep"},{name:"stepIcon"}],slots:[{name:"logo"},{name:"checkbox"},{name:"orderSummaryBottom"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue3-solaris/src/components/molecules/OrderSummary/OrderSummary.vue"]};const Oe=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));export{qe as S,Oe as _,W as a,Le as b};
