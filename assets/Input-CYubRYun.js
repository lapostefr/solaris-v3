import{r as G,c as A,w as ie,d as se,m as ee,a1 as ue,b as de,g as y,u as o,v as h,y as N,A as L,C as S,h as Z,e as T,t as W,x as pe,D as ae,T as me,B as le,f as u,J as ne,a2 as fe,Q as ce,F as be,z as ve}from"./vue.esm-bundler-BQVOD3cV.js";import{S as oe}from"./Icon-CNTEbVSX.js";import{S as ye,T as he}from"./Tooltip-D1JQ9w2q.js";import{S as ge}from"./Button-qisKMu5t.js";import{S as we}from"./Message-COM7xYSp.js";import{L as R}from"./types-DKXD8uiR.js";import{_ as qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Se(l,b,t,H,k,g,$,n,V,d,E){var J;const i=G(-1),m=G(!1),w=A(()=>($==null?void 0:$.value)&&((d==null?void 0:d.value)==="text"||(d==null?void 0:d.value)==="number")),f=a=>{const e=/^\d+([.,]\d+)?$/;if(w.value)if(!e.test(a.replace(/\s/g,"")))a=a.replace(/[^\d.,]/g,"").replace(/([.,])[.,]+/g,",").replace(/^([.,]+)/,"").replace(/\./,"_").replace(/\./g,"").replace("_",".").replace(/,/,"_").replace(/,/g,"").replace("_",",");else{const r=Number(a.replaceAll(",","."));t!=null&&t.value&&r&&(a=t.value<r?t.value.toString():a)}return a},F=(a,e)=>{const r=Number(a.replaceAll(",","."));return a!==""&&!isNaN(r)&&(a=e>r?e.toString():a),a},P=()=>{l("enterPressed")},q=a=>{let e=a.target.value;w.value&&(e=f(e),a.target.value=e),k!=null&&k.value&&(e=e.slice(0,k.value)),n!=null&&n.value&&(i.value=-1),l("input",e)},O=a=>{l("focus",a)},M=()=>{(V==null?void 0:V.value).focus()},_=a=>{const e=E==null?void 0:E.value[`suggestion-${a}-label`];e&&e.scrollIntoView({block:"nearest",behavior:"auto"})},U=()=>{n!=null&&n.value&&c.value&&(i.value++,i.value===n.value.length&&(i.value=0),_(i.value))},C=()=>{n!=null&&n.value&&c.value&&(i.value--,i.value<0&&(i.value=n.value.length-1),_(i.value))},z=()=>{l("tabKeydown")},D=()=>{l("escKeydown")},X=a=>{let e=a.target.value;w.value&&(g!=null&&g.value)&&(e=F(e,g.value),a.target.value=e),n!=null&&n.value&&K.value&&B(n.value[i.value]),l("blur",a)},Q=a=>{m.value=!!(a!=null&&a.length)};ie(()=>n==null?void 0:n.value,Q);const j=A(()=>{const a={},e=(b==null?void 0:b.value)??{};return Object.keys(e).forEach(r=>a[`aria-${r}`]=b==null?void 0:b.value[r]),a}),B=a=>{I(),l("suggestionSelect",a)},I=(a=!0)=>{m.value=!1,a&&(i.value=-1)},K=A(()=>(n==null?void 0:n.value)&&i.value>=0&&i.value<n.value.length),c=A(()=>(n==null?void 0:n.value)&&n.value.length>0),Y=a=>{switch((d==null?void 0:d.value)==="number"&&["-"].includes(a.key)&&a.preventDefault(),a.key==="Escape"&&!c.value&&l("update:modelValue",""),a.key){case" ":K.value&&(I(),a.preventDefault(),l("closeSuggestions",a));break;case"Enter":c.value&&(n!=null&&n.value)&&K.value&&B(n.value[i.value]),l("enterPressed");break;case"Tab":c.value&&m.value&&I(!1),l("tabKeydown");break;case"Escape":c.value&&m.value&&I(),l("closeSuggestions",a),l("escKeydown");break;case"ArrowDown":a.preventDefault(),U(),l("goDown");break;case"ArrowUp":a.preventDefault(),C(),l("goUp");break}};return m.value=!!((J=n==null?void 0:n.value)!=null&&J.length),{suggestionsLayerIsVisible:m,ariaAttributes:j,suggestionFocus:i,hasSuggestions:c,checkMin:F,focus:O,sanitizeNumericonly:f,setFocus:M,goDown:U,goUp:C,tabKeydown:z,escKeydown:D,blur:X,changeSuggestions:Q,suggestionSelect:B,change:q,pressEnter:P,onKeydown:Y}}var ke=(l=>(l.disabled="disabled",l.readonly="readonly",l.active="active",l))(ke||{}),$e=(l=>(l.inside="inside",l.outside="outside",l))($e||{}),Ve=(l=>(l.simple="simple",l.multiple="multiple",l))(Ve||{}),te=(l=>(l.default="default",l.compact="compact",l.regular="regular",l.small="small",l.medium="medium",l))(te||{}),Ee=(l=>(l.simple="simple",l.multi="multi",l))(Ee||{}),Pe=(l=>(l.contains="contains",l.startswith="startswith",l))(Pe||{});const De=["id","for"],Be=["id","for"],Ie=["id","role","readonly","disabled","autocomplete","maxlength","placeholder","name","type","min","max","aria-describedby","aria-invalid","aria-required","aria-controls","aria-expanded","aria-autocomplete","aria-activedescendant","inputmode"],Ae={key:0,class:"input__unit"},_e=["title"],Ce={key:1},Ke=["id","aria-labelledby"],Ne=["id","aria-selected","onMousedown"],re=se({__name:"Input",props:ee({aria:{},autocomplete:{},autofocus:{type:Boolean,default:!1},dataError:{},disabled:{type:Boolean},error:{type:Boolean,default:!1},hideLabel:{type:Boolean,default:!1},icon:{},id:{},inputRefStr:{default:"input"},isQuiet:{type:Boolean,default:!1},label:{},labelId:{},labelPosition:{default:R.inside},mandatory:{type:Boolean,default:!1},message:{},max:{},maxlength:{},min:{},name:{},numericOnly:{type:Boolean,default:!1},placeholder:{},readonly:{type:Boolean,default:!1},role:{},size:{default:te.medium},success:{type:Boolean,default:!1},suggestions:{},type:{default:"text"},tooltipComponent:{},unit:{},value:{}},{modelValue:{},modelModifiers:{}}),emits:ee(["focus","goUp","goDown","tabKeydown","escKeydown","enterPressed","blur","suggestionSelect","input","closeSuggestions","update:modelValue"],["update:modelValue"]),setup(l,{emit:b}){var a;const t=l,H=A(()=>({displayElement:"inline-flex",forcePlacement:!1,offset:8,placement:"top",tooltipStyle:he.default,trigger:"hover",triggerIcon:"search-loupe",...t.tooltipComponent??{}})),k=b,g=G(),$=G({}),{aria:n,max:V,inputRefStr:d,maxlength:E,min:i,numericOnly:m,suggestions:w,type:f}=ue(t),{ariaAttributes:F,suggestionFocus:P,suggestionsLayerIsVisible:q,hasSuggestions:O,focus:M,blur:_,suggestionSelect:U,change:C,onKeydown:z}=Se(k,n,V,d,E,i,m,w,g,f,$),D=de(l,"modelValue"),X=()=>!t.label&&t.placeholder?t.placeholder.toString():void 0,Q=A(()=>{var r,v,p,s,x;const e=[];return(r=t.aria)!=null&&r.describedby&&e.push((p=(v=t.aria)==null?void 0:v.describedby)==null?void 0:p.trim()),(s=t.dataError)!=null&&s.active&&((x=t.dataError)!=null&&x.message)?e.push(`error-message--${t.id}`):t.message&&e.push(`message--${t.id}`),e.length>0?e.join(" "):void 0}),j=()=>{var e;return(e=t.dataError)!=null&&e.active?t.dataError.active:void 0},B=()=>t.mandatory?t.mandatory:void 0,I=()=>t.suggestions?"list":void 0,K=()=>{if(t.suggestions)return O.value?q==null?void 0:q.value:"false"},c=()=>t.suggestions?`${t.id}-listbox`:void 0,Y=()=>{const{suggestions:e,id:r}=t;return!e||e.length===0||P.value===-1?null:`${r}-suggestion-${e[P.value].label}`},J=()=>t.suggestions?"combobox":t.role||void 0;return q.value=!!((a=t.suggestions)!=null&&a.length),(e,r)=>(u(),y("div",{class:h(["input",[`input--${e.labelPosition}`,{"input--small":e.size=="small"||e.size=="compact","input--medium":e.size=="medium"||e.size=="default","input--filled":!!D.value,"input--only":!e.placeholder&&!D.value,"input--has-placeholder":e.placeholder&&e.placeholder.length>0}]])},[e.label&&e.labelPosition===o(R).outside?(u(),y("label",{key:0,id:`${e.id}-label`||null,class:h(["input__label-tag",{"input__label-tag--disabled":e.disabled}]),for:e.id},[N("span",{class:h(["input__label input__label--outside",[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}]])},L(e.label),3)],10,De)):S("",!0),N("div",{class:h(["input__global",[{"input__global--disabled":e.disabled,"input__global--readonly":e.readonly,"input__global--isQuiet":e.isQuiet,"input__global--error":e.error||e.dataError&&e.dataError.active}]])},[Z(e.$slots,"inputLeft",{},void 0,!0),(u(),T(pe(e.label?"div":"label"),{class:h([{"input__wrapper--label":!e.label,"input__wrapper--inside":e.labelPosition===o(R).inside,"input__wrapper--outside":e.labelPosition===o(R).outside},"input__wrapper"]),aria:X()},{default:W(()=>{var v,p;return[e.label&&e.labelPosition===o(R).inside?(u(),y("label",{key:0,id:`${e.id}-label`||null,for:e.id,class:h(["input__label-tag",{"input__label-tag--disabled":e.disabled,"input__label-tag--readonly":e.readonly}])},[N("span",{class:h([[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}],"input__label input__label--inside"])},L(e.label),3)],10,Be)):S("",!0),ne(N("input",ae({id:e.id,ref_key:"inputRef",ref:g,"onUpdate:modelValue":r[0]||(r[0]=s=>D.value=s),role:J(),readonly:e.readonly,disabled:e.disabled,autocomplete:e.autocomplete?e.autocomplete:void 0,maxlength:o(f)!=="number"?o(E):void 0,placeholder:e.placeholder,class:["input__field",[{"input__field--placeholder":e.placeholder&&e.placeholder.length>0,"input--disabled":e.disabled,"input--search":o(f)==="search"}]],name:e.name,type:o(f)||"text",min:o(f)==="number"?o(i)||0:void 0,max:o(f)==="number"?o(V):void 0},o(F),{"aria-describedby":Q.value,"aria-invalid":j()?j():void 0,"aria-required":B()?B():void 0,"aria-controls":c(),"aria-expanded":K(),"aria-autocomplete":(v=o(n))!=null&&v.autocomplete?o(n).autocomplete:I(),"aria-activedescendant":(p=o(n))!=null&&p.activedescendant?o(n).activedescendant:Y(),inputmode:o(m)?"numeric":void 0,onKeydown:r[1]||(r[1]=(...s)=>o(z)&&o(z)(...s)),onFocus:r[2]||(r[2]=(...s)=>o(M)&&o(M)(...s)),onInput:r[3]||(r[3]=(...s)=>o(C)&&o(C)(...s)),onBlur:r[4]||(r[4]=(...s)=>o(_)&&o(_)(...s))}),null,16,Ie),[[fe,D.value]])]}),_:1},8,["class","aria"])),Z(e.$slots,"inputRight",{},void 0,!0),e.unit?(u(),y("span",Ae,[e.unit.description?(u(),y("abbr",{key:0,title:e.unit.description},L(e.unit.label),9,_e)):(u(),y("span",Ce,L(e.unit.label),1))])):S("",!0),e.icon&&!e.tooltipComponent&&!e.success?(u(),T(oe,{key:1,class:"input__icon",name:e.icon},null,8,["name"])):S("",!0),e.tooltipComponent&&!e.success?(u(),T(ye,ae({key:2,class:"small__popover"},H.value),{tooltip:W(()=>[Z(e.$slots,"tooltipContent",{},void 0,!0)]),trigger:W(()=>[le(ge,{class:"input__icon input__icon--tooltip",icon:H.value.triggerIcon,"button-type":"button",type:"ghost"},null,8,["icon"])]),_:3},16)):S("",!0),e.success?(u(),T(oe,{key:3,class:"input__icon input__icon--success",name:"action-check"})):S("",!0),o(w)?(u(),T(me,{key:4,name:"slide-fade"},{default:W(()=>[ne(N("ul",{id:`${e.id}-listbox`,role:"listbox",class:"suggestions","aria-labelledby":e.id},[(u(!0),y(be,null,ve(o(w),(v,p)=>(u(),y("li",{id:`${e.id}-suggestion-${e.label}`,key:`${e.id}-suggestion-${p}`,ref_for:!0,ref:s=>$.value[`suggestion-${p}-label`]=s,role:"option",class:h(["suggestions__item",{"suggestions__item--focused":p===o(P)}]),"aria-selected":p===o(P)?"true":void 0,onMousedown:s=>o(U)(v)},L(v.label),43,Ne))),128))],8,Ke),[[ce,o(q)]])]),_:1})):S("",!0)],2),le(we,{id:e.id,message:e.message,"data-error":e.dataError},null,8,["id","message","data-error"])],2))}}),Qe=qe(re,[["__scopeId","data-v-e87145ca"]]);re.__docgenInfo={exportName:"default",displayName:"Input",description:"",tags:{},props:[{name:"aria",required:!1,type:{name:`{
  [key: string]: string
}`}},{name:"autocomplete",required:!1,type:{name:"string"}},{name:"autofocus",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"dataError",required:!1,type:{name:"DataError"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"error",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"hideLabel",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"icon",required:!1,type:{name:"string"}},{name:"id",required:!0,type:{name:"string"}},{name:"inputRefStr",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'input'"}},{name:"isQuiet",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelId",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"mandatory",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"message",required:!1,type:{name:"string"}},{name:"max",required:!1,type:{name:"number"}},{name:"maxlength",required:!1,type:{name:"number"}},{name:"min",required:!1,type:{name:"number"}},{name:"name",required:!0,type:{name:"string"}},{name:"numericOnly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"readonly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"role",required:!1,type:{name:"string"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.medium"}},{name:"success",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"suggestions",required:!1,type:{name:"Array",elements:[{name:"SuggestionType"}]}},{name:"type",required:!1,type:{name:"InputType"},defaultValue:{func:!1,value:"'text'"}},{name:"tooltipComponent",required:!1,type:{name:"TooltipProps"}},{name:"unit",required:!1,type:{name:"UnitProp"}},{name:"value",required:!1,type:{name:"union",elements:[{name:"string"},{name:"number"}]}}],events:[{name:"focus"},{name:"goUp"},{name:"goDown"},{name:"tabKeydown"},{name:"escKeydown"},{name:"enterPressed"},{name:"blur"},{name:"suggestionSelect"},{name:"input"},{name:"closeSuggestions"},{name:"update:modelValue"}],slots:[{name:"inputLeft"},{name:"inputRight"},{name:"tooltipContent"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/TextInput/Default/Input.vue"]};export{ke as A,$e as L,Pe as S,Ee as T,te as a,Ve as b,Qe as c,Se as u};
