import{d as U,r as B,c as K,o as j,Y,f as a,g as o,y as i,e as y,t as u,H as v,A as l,x as P,C as n,L as H,v as f,h as k,F as I,z as T,B as M,q as Q,P as L}from"./vue.esm-bundler-BiAlgFmf.js";import{S as V}from"./Divider-DYf3QLxh.js";import{S as X}from"./Picture-BXByxoYg.js";import{S as Z}from"./Icon-C-Sturzh.js";import{S as z}from"./Button-CxIFeNFW.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as x}from"./Modal-BV4-zrH4.js";const ee={class:"summary-step"},te={key:0,class:"header__text"},ae={key:1,class:"header__text__subtitle"},se=["src","alt","width","height"],oe={key:0,class:"summary-step__picture"},ie={key:0,class:"summary-step__line summary-step__line--step"},re={class:"summary-step__line"},ne={class:"summary-step__item"},le=["innerHTML"],me={key:0,class:"summary-step__line"},de={class:"summary-step__item summary-step__item--subInfo"},ue={class:"summary-step__line summary-step__line--price"},pe={class:"summary-step__item summary-step__item--bold"},ce={key:0,class:"summary-step__informations"},ye={class:"summary-step__line"},he={class:"summary-step__item"},fe={class:"summary-step__item"},_e={class:"summary-step__caption__list"},be=["innerHTML"],ve={key:1,class:"summary-step__checkbox"},R=U({__name:"SummaryStep",props:{btnFullWidth:{type:Boolean},id:{},showDetails:{type:Boolean,default:!0},subtitleTag:{default:"h3"},titleTag:{default:"h2"},button:{default:"Étape suivante"},buttonDivider:{type:Boolean},displayCloseModalButton:{type:Boolean},emptySpaceBottom:{default:()=>({active:!1})},hasHeader:{type:Boolean},header:{},image:{},isLoading:{type:Boolean},hiddenButton:{type:Boolean},nextStepDisabled:{type:Boolean},price:{},steps:{},stickyDesktop:{default:"default"}},emits:["nextStep","closeModal","stepIcon"],setup(E,{emit:N}){const m=E,S=N,p=Q(),_=B(!1),b=B(""),w=B(!1),g=B(0),D=()=>{S("nextStep")},q=()=>{S("closeModal",!1)},C=e=>{S("stepIcon",e)},$=K(()=>m.hasHeader&&m.stickyDesktop==="bottom"&&w.value),h=()=>{window.innerWidth>=1280?m.stickyDesktop==="block"&&(b.value="bottom: 8px"):b.value=""},F=()=>{w.value=window.pageYOffset<g.value,g.value=window.pageYOffset},t=()=>{h(),m.stickyDesktop==="bottom"&&m.hasHeader&&F()};return j(()=>{p!=null&&p.proxy.$slots&&(_.value=!(p!=null&&p.proxy.$slots.input)),h(),window.addEventListener("scroll",t),window.addEventListener("resize",h)}),Y(()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",h)}),(e,d)=>(a(),o("div",ee,[i("div",{class:f(["summary-step__header",{"summary-step__header--subtitle":e.header.subtitle}])},[e.header.title||e.header.subtitle?(a(),o("div",te,[e.header.title?(a(),y(P(e.titleTag),{key:0,class:"header__text__title"},{default:u(()=>[v(l(e.header.title),1)]),_:1})):n("",!0),e.header.subtitle?(a(),o("div",ae,l(e.header.subtitle),1)):n("",!0)])):n("",!0),e.header.logo?(a(),o("div",{key:1,class:"header__logo",style:H([e.header.logo.maxHeight?{"max-height":e.header.logo.maxHeight+"px"}:""])},[i("img",{class:"header__logo-image",src:e.header.logo.url,alt:e.header.logo.alt,width:e.header.logo.width,height:e.header.logo.height},null,8,se)],4)):n("",!0)],2),e.image||e.$slots.image?(a(),o("div",oe,[k(e.$slots,"image",{},void 0,!0),e.image?(a(),y(V,{key:0,class:"summary-step__divider",color:"light","padding-top-bottom":0})):n("",!0),e.image?(a(),y(X,{key:1,class:"summary-step__illustration","default-source":e.image.defaultSource,"other-sources":e.image.otherSources,width:e.image.width,height:e.image.height},null,8,["default-source","other-sources","width","height"])):n("",!0)])):n("",!0),(a(!0),o(I,null,T(e.steps,(s,c)=>(a(),o("div",{key:c,class:"summary-step__main"},[i("div",{class:f({"summary-step__informations":!s.name})},[M(V,{class:"summary-step__divider",color:"light","padding-top-bottom":0}),s.name||s.icon?(a(),o("div",ie,[s.name?(a(),y(P(e.subtitleTag),{key:0,class:"summary-step__title"},{default:u(()=>[v(l(s.name),1)]),_:2},1024)):n("",!0),s.icon?(a(),y(Z,{key:1,class:"summary-step__icon",role:"button",title:"Modifier l'étape "+s.name,tabindex:"0",name:s.icon.name==="edit"?"action-pen":"editing-trash",size:"small",onClick:r=>C(s.icon.eventName)},null,8,["title","name","onClick"])):n("",!0)])):n("",!0),e.showDetails?(a(),o("div",{key:1,class:f(["summary-step__informations",{"summary-step__line--step":!s.name}])},[(a(!0),o(I,null,T(s.options,(r,O)=>(a(),o("div",{key:`option-${O}`},[i("div",re,[i("div",ne,l(r.name),1),r.onClick?(a(),y(z,{key:0,class:"summary-step__link",icon:"action-pen","icon-reverse":"",size:"small",type:"ghost",onClick:r.onClick},{default:u(()=>[v(l(r.info),1)]),_:2},1032,["onClick"])):(a(),o("div",{key:1,class:f(["summary-step__item",{"summary-step__item--promoted":r.hasPromotion}]),innerHTML:r.info},null,10,le))]),r.subName&&r.subInfo||r.hasPromotion?(a(),o("div",me,[i("div",de,l(r.subName),1),i("div",{class:f(["summary-step__item",{"summary-step__item--subInfo":!r.hasPromotion,"summary-step__item--promo":r.hasPromotion}])},l(r.subInfo),3)])):n("",!0)]))),128))],2)):n("",!0)],2)]))),128)),M(V,{class:"summary-step__divider",type:e.steps&&e.steps.length?"dotted":"solid",color:"light","padding-top-bottom":0},null,8,["type"]),i("div",{class:f(["summary-step__bottom",{sticky:e.stickyDesktop==="bottom",sticky__withHeader:e.stickyDesktop==="bottom"&&$.value}])},[i("div",ue,[(a(),y(P(e.subtitleTag),{class:"summary-step__item summary-step__item--total"},{default:u(()=>[v(l(e.price.name),1)]),_:1})),i("div",pe,l(e.price.value)+" € ",1)]),e.price.options?(a(),o("div",ce,[(a(!0),o(I,null,T(e.price.options,(s,c)=>(a(),o("div",{key:`option-${c}`},[i("div",ye,[i("div",he,l(s.name),1),i("div",fe,l(s.info),1)])]))),128))])):n("",!0),i("div",_e,[(a(!0),o(I,null,T(e.price.captions,(s,c)=>(a(),o("div",{key:"option-"+c,class:"summary-step__item summary-step__item--caption",innerHTML:s},null,8,be))),128))]),_.value?n("",!0):(a(),o("div",ve,[k(e.$slots,"input",{id:e.id},void 0,!0)])),e.buttonDivider?(a(),y(V,{key:2,class:"summary-step__divider summary-step__divider--button",color:"light","padding-top-bottom":0})):n("",!0),e.displayCloseModalButton?(a(),y(z,{key:3,class:f(["summary-step__close","summary-step__close__button"]),type:"secondary","icon-reverse":"",color:"darkgrey",size:"regular",onClick:d[0]||(d[0]=s=>q())},{default:u(()=>d[2]||(d[2]=[v(" Fermer ")])),_:1})):e.hiddenButton?n("",!0):(a(),y(z,{key:4,class:f(["summary-step__validate","summary-step__validate__button",{"summary-step__validate__button--fullwidth":e.btnFullWidth}]),icon:"arrow-right","icon-reverse":"",size:"regular","is-loading":e.isLoading,disabled:e.nextStepDisabled,style:H(b.value),onClick:d[1]||(d[1]=s=>D())},{default:u(()=>[v(l(e.button),1)]),_:1},8,["class","is-loading","disabled","style"]))],2)]))}}),W=A(R,[["__scopeId","data-v-7de895d5"]]);R.__docgenInfo={exportName:"default",displayName:"SummaryStep",description:"",tags:{},props:[{name:"btnFullWidth",required:!1,type:{name:"boolean"}},{name:"id",required:!0,type:{name:"string"}},{name:"showDetails",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"subtitleTag",required:!1,type:{name:"HeaderTag"},defaultValue:{func:!1,value:"'h3'"}},{name:"titleTag",required:!1,type:{name:"HeaderTag"},defaultValue:{func:!1,value:"'h2'"}},{name:"button",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Étape suivante'"}},{name:"buttonDivider",required:!1,type:{name:"boolean"}},{name:"displayCloseModalButton",required:!1,type:{name:"boolean"}},{name:"emptySpaceBottom",required:!1,type:{name:"EmptySpaceBottom"},defaultValue:{func:!1,value:"() => ({ active: false })"}},{name:"hasHeader",required:!1,type:{name:"boolean"}},{name:"header",required:!0,type:{name:"HeaderType"}},{name:"image",required:!1,type:{name:"Image"}},{name:"isLoading",required:!1,type:{name:"boolean"}},{name:"hiddenButton",required:!1,type:{name:"boolean"}},{name:"nextStepDisabled",required:!1,type:{name:"boolean"}},{name:"price",required:!0,type:{name:"PriceType"}},{name:"steps",required:!1,type:{name:"Array",elements:[{name:"StepsType"}]}},{name:"stickyDesktop",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"block"'},{name:'"button"'},{name:'"bottom"'}]},defaultValue:{func:!1,value:"'default'"}}],events:[{name:"nextStep"},{name:"closeModal"},{name:"stepIcon"}],slots:[{name:"image"},{name:"input",scoped:!0,bindings:[{name:"id",title:"binding"}]}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/OrderSummary/SummaryStep/SummaryStep.vue"]};const ge={key:0,class:"order-summary__validate order-summary__validate--sticky"},ke={class:"order-summary__line"},Se={class:"order-summary__line"},Be={class:"order-summary__item"},we={class:"order-summary__item order-summary__item__price"},G=U({__name:"OrderSummary",props:{showMobileDetails:{type:Boolean,default:!0},stepBtnFullWidth:{type:Boolean},stickyMobile:{type:Boolean},button:{default:"Étape suivante"},buttonDivider:{type:Boolean},displayCloseModalButton:{type:Boolean},emptySpaceBottom:{default:()=>({active:!1,height:0})},hasHeader:{type:Boolean},header:{},image:{},isLoading:{type:Boolean},hiddenButton:{type:Boolean},nextStepDisabled:{type:Boolean},price:{},steps:{},stickyDesktop:{default:"default"}},emits:["nextStep","stepIcon"],setup(E,{emit:N}){const m=E,S=N,p=B(null),_=L({bottom:"0px",height:"auto",width:"",left:""}),b=L({increaseSpace:0,bottomSpaceHeight:0}),w=L({height:"110px"}),g=B(!1),D=L({maxHeight:"initial",paddingTop:"0px"}),q=()=>{S("nextStep")},C=t=>{S("stepIcon",t)},$=()=>{g.value=!g.value},h=()=>{var t;if(window.innerWidth>=1280){const e=(t=p==null?void 0:p.value)==null?void 0:t.getBoundingClientRect(),d=window.innerHeight,s=d-e.bottom;let c=e.top>0?e.top:0;c+=s>0?s:0;const r=d-c-b.increaseSpace,O=s>0?s:0,J=m.stickyDesktop==="block"?e.width-16:e.width;_.bottom=`${O}px`,_.height=`${b.bottomSpaceHeight}px`,_.width=`${J}px`,_.left=`${e.left}px`,m.stickyDesktop==="block"&&(D.maxHeight=`${r}px`)}else D.maxHeight="initial"},F=()=>{var d,s,c,r;const t=(d=m.emptySpaceBottom)==null?void 0:d.height,e=t?m.emptySpaceBottom.height:135;t&&(w.height=`${((s=m.emptySpaceBottom)==null?void 0:s.height)+10}px`),b.increaseSpace=(c=m.emptySpaceBottom)!=null&&c.active?e:0,b.bottomSpaceHeight=(r=m.emptySpaceBottom)!=null&&r.active&&m.stickyDesktop==="block"?e+60:100,h()};return j(()=>{F(),window.addEventListener("scroll",h),window.addEventListener("resize",h)}),Y(()=>{window.removeEventListener("scroll",h),window.removeEventListener("resize",h)}),(t,e)=>(a(),o("div",{ref_key:"orderSummary",ref:p,class:f(["order-summary",{"order-summary--sticky-mobile":t.stickyMobile,"order-summary--sticky-desktop":t.stickyDesktop==="block","order-summary--chatbot":t.emptySpaceBottom&&t.emptySpaceBottom.active,"order-summary--chatbot--only":t.emptySpaceBottom&&t.emptySpaceBottom.active&&t.stickyDesktop!=="block"}])},[i("div",{class:f(["order-summary__container",{"order-summary__container--sticky":t.stickyDesktop==="block"}]),style:H(D)},[M(W,{id:"desktop","btn-full-width":t.stepBtnFullWidth,class:"order-summary__element",header:t.header,image:t.image,steps:t.steps,price:t.price,button:t.button,"has-header":t.hasHeader,"button-divider":t.buttonDivider,"hidden-button":t.hiddenButton,"next-step-disabled":t.nextStepDisabled,"sticky-desktop":t.stickyDesktop,"empty-space-bottom":t.emptySpaceBottom,"is-loading":t.isLoading,onNextStep:q,onStepIcon:C},{image:u(()=>[k(t.$slots,"logo",{},void 0,!0)]),input:u(()=>[k(t.$slots,"checkbox",{},void 0,!0)]),_:3},8,["btn-full-width","header","image","steps","price","button","has-header","button-divider","hidden-button","next-step-disabled","sticky-desktop","empty-space-bottom","is-loading"]),M(x,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=d=>g.value=d),class:"order__modal",title:t.header.title,size:"default"},{content:u(()=>[M(W,{id:"mobile",header:{...t.header,title:null},steps:t.steps,price:t.price,button:t.button,"display-close-modal-button":t.displayCloseModalButton,"show-details":t.showMobileDetails,onCloseModal:$,onNextStep:q,onStepIcon:C},{image:u(()=>[k(t.$slots,"logo",{},void 0,!0)]),input:u(()=>[k(t.$slots,"checkbox",{},void 0,!0)]),_:3},8,["header","steps","price","button","display-close-modal-button","show-details"])]),_:3},8,["modelValue","title"]),t.stickyMobile?(a(),o("div",ge,[i("div",ke,[i("div",Se,[i("div",Be,[v(l(t.price.name)+" - ",1),i("button",{class:"order-summary__item__link",onClick:$}," Voir le détail ")])]),i("div",we,l(t.price.value)+"€ ",1)]),t.hiddenButton?n("",!0):(a(),y(z,{key:0,class:"order-summary__validate__button",icon:"arrow-right","icon-reverse":"",size:"regular","is-loading":t.isLoading,onClick:q},{default:u(()=>[v(l(t.button),1)]),_:1},8,["is-loading"])),k(t.$slots,"orderSummaryBottom",{},void 0,!0)])):n("",!0),i("div",{ref:"orderSummaryBottomSpace",class:"order-summary__bottom-space",style:H(_)},null,4)],6),t.emptySpaceBottom&&t.emptySpaceBottom.active&&t.stickyDesktop!=="block"?(a(),o("div",{key:0,class:"order-summary--empty-block",style:H(w)},null,4)):n("",!0)],2))}}),Te=A(G,[["__scopeId","data-v-a56ea4e6"]]);G.__docgenInfo={exportName:"default",displayName:"OrderSummary",description:"",tags:{},props:[{name:"showMobileDetails",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"stepBtnFullWidth",required:!1,type:{name:"boolean"}},{name:"stickyMobile",required:!1,type:{name:"boolean"}},{name:"button",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Étape suivante'"}},{name:"buttonDivider",required:!1,type:{name:"boolean"}},{name:"displayCloseModalButton",required:!1,type:{name:"boolean"}},{name:"emptySpaceBottom",required:!1,type:{name:"EmptySpaceBottom"},defaultValue:{func:!1,value:"() => ({ active: false, height: 0 })"}},{name:"hasHeader",required:!1,type:{name:"boolean"}},{name:"header",required:!0,type:{name:"HeaderType"}},{name:"image",required:!1,type:{name:"Image"}},{name:"isLoading",required:!1,type:{name:"boolean"}},{name:"hiddenButton",required:!1,type:{name:"boolean"}},{name:"nextStepDisabled",required:!1,type:{name:"boolean"}},{name:"price",required:!0,type:{name:"PriceType"}},{name:"steps",required:!1,type:{name:"Array",elements:[{name:"StepsType"}]}},{name:"stickyDesktop",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"block"'},{name:'"button"'},{name:'"bottom"'}]},defaultValue:{func:!1,value:"'default'"}}],events:[{name:"nextStep"},{name:"stepIcon"}],slots:[{name:"logo"},{name:"checkbox"},{name:"orderSummaryBottom"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/OrderSummary/OrderSummary.vue"]};export{Te as S,W as a};
