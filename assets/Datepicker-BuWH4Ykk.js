import{r as g,V as ut,d as at,M as nt,c as H,w as Ge,a8 as ct,l as lt,O as Xe,e as E,t as f,u as R,J as U,I as ee,z as ce,F as Ee,x as Pe,b as Ke,A as Le,B as $e,v as P,o as B,y as ne,H as Je,E as st,m as Qe,a as pt,k as vt,C as We,G as mt,q as yt}from"./vue.esm-bundler-BHwbD8xO.js";import{S as He}from"./Icon-LmhyBlqB.js";import{S as ft}from"./Modal-Bng8ioTX.js";import{S as Ze}from"./Button-Cqby2nDZ.js";import{u as gt,b as bt,o as ht}from"./index-pMn-qRVg.js";import{_ as rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as kt}from"./generateId-DPOzJEtM.js";import{L as _t}from"./types-Dd7QR7uO.js";var Ue=(z=>(z.small="small",z.medium="medium",z.large="large",z))(Ue||{});function ot(z,Me,$,o,Y,Ie,pe,S){const j=g(-1e15),ve=g(!1),le=ut({startDay:"",startMonth:"",startYear:j.value,endDay:"",endMonth:"",endYear:j.value,startDayInput:"",startMonthInput:"",startYearInput:"",endDayInput:"",endMonthInput:"",endYearInput:"",startNewTime:j.value,endNewTime:j.value}),se=g([{abbr:"Lun",name:"Lundi"},{abbr:"Mar",name:"Mardi"},{abbr:"Mer",name:"Mercredi"},{abbr:"Jeu",name:"Jeudi"},{abbr:"Ven",name:"Vendredi"},{abbr:"Sam",name:"Samedi"},{abbr:"Dim",name:"Dimanche"}]),Se=g(["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]),xe=g(864e5),me=g([{d:1,m:1},{d:1,m:5},{d:8,m:5},{d:14,m:7},{d:15,m:8},{d:1,m:11},{d:11,m:11},{d:25,m:12}]),ye=g([17152488e5,17485128e5,17787528e5,18095976e5,18428616e5,17119656e5,17452296e5,17754696e5,18063144e5,18395784e5,17161992e5,17494632e5,17797032e5,1810548e6,1843812e6]),qe=(F,te,G,b)=>{let L=pe.value,a=$.value,A=Y.value!==void 0?Y.value:o.value,h=z.value,k=Me.value,D=S.value;b&&(L=b.weekend.value,a=b.disabledDaysByWeek.value,A=b.bankHolidays.value?b.bankHolidays.value:b.holidays.value,k=b.blackList.value,h=b.range.value,D=b.whiteList.value);let O=!1;const T=new Date(F,te,G).getTime(),x=new Date(T).getDay(),J=!!(L&&[0,6].includes(x)),W=!!(a&&a.includes(x));if(A){const _e=me.value.filter(ie=>ie.d===G&&ie.m-1===te),oe=new Date(F,te,G,12,0,0,0).getTime(),ge=ye.value.includes(oe);O=_e.length>0||ge}const ae=!!(k&&k.length>0&&k.includes(T)),fe=!!(D&&D.length>0&&!D.includes(T)),re=!!(h&&h.min&&T<h.min),X=!!(h&&h.max&&T>h.max),K=32-new Date(F,te,32).getDate(),Q=Array.from({length:K},(_e,oe)=>oe+1),Z=G>Q.length;return J||W||O||ae||fe||re||X||Z};return ve.value=Ie.value==="interval",{nullTime:j,interval:ve,inputData:le,weekdays:se,allMonths:Se,oneDay:xe,holidaysList:me,isDisabled:qe}}const Dt={class:"lp-datepicker__direction"},wt=["aria-label","onKeydown"],$t=["aria-label","onKeydown"],Mt={class:"lp-datepicker__content"},It={class:"lp-datepicker__head"},St={class:"lp-datepicker__head-month"},xt={class:"lp-datepicker__head-year"},qt=["title"],Rt=["aria-current"],it=at({__name:"DatepickerDays",props:{startNumber:{},endNumber:{},isInModal:{type:Boolean},isSmall:{type:Boolean,default:!0},size:{default:Ue.small},blackList:{},buttonLayout:{default:"centered"},range:{},disabledDaysByWeek:{},holidays:{type:Boolean},bankHolidays:{type:Boolean},typage:{default:"default"},weekend:{type:Boolean},whiteList:{},withReset:{type:Boolean}},emits:["selection","hide","opened","reset"],setup(z,{emit:Me}){const $=z,o=Me,Y=g(null),Ie=g(null),{range:pe,blackList:S,disabledDaysByWeek:j,holidays:ve,bankHolidays:le,typage:se,weekend:Se,whiteList:xe}=nt($),{nullTime:me,allMonths:ye,weekdays:qe,interval:F,isDisabled:te,oneDay:G}=ot(pe,S,j,ve,le,se,Se,xe),b=g(0),L=g(0),a=g([]),A=g([]),h=g(!1),k=g(0),D=g(0),O=g(!1),T=gt(),x=H(()=>{const l=!$.startNumber||$.startNumber===me.value,s=!$.endNumber||$.endNumber===me.value;if(!F.value&&l||F.value&&l&&s)return[];const r=[];return l||r.push($.startNumber),s||r.push($.endNumber),r}),J=H(()=>{if(x.value.length===0)return[];const s=[x.value[0]];if(F.value&&x.value.length>1){const r=x.value[1];s.push(r)}return s}),W=H(()=>{const s=F.value?2:1,r=new Date(K.value.year,K.value.month+b.value+-1),d=new Date(K.value.year,K.value.month+b.value+s);return{left:{month:r.getMonth(),year:r.getFullYear()},right:{month:d.getMonth(),year:d.getFullYear()}}}),ae=H(()=>{const l=new Date(a.value[0]).getMonth(),s=new Date(a.value[1]).getMonth(),r=(M=0)=>new Date(K.value.year,K.value.month+b.value+M),d=r().getMonth(),p=r(1).getMonth(),c=Ce(l,s),i=c.includes(d),w=c.includes(p),y=i?"lp-datepicker--has-interval":"",_=w?"lp-datepicker--has-interval":"",N=[{...Q(r().getFullYear(),r().getMonth()),index:0,intervalClass:y}];if(F.value){const M={...Q(r(1).getFullYear(),r(1).getMonth()),index:1,intervalClass:_};N.push(M)}return N}),fe=H(()=>$.isInModal?"fromModal":"fromDropdown"),re=H(()=>{const l=$.size==="small",s=$.size==="medium",r=$.size==="large";return{isSmall:l,isMedium:s,isLarge:r}}),X=H(()=>{const l=new Date;return l.setHours(12,0,0,0),{time:l.getTime(),date:l}});Ge(D,l=>{l&&(b.value=0)}),Ge(()=>[x.value,O.value],([l,s])=>{l.length===2&&s&&(L.value=0)});const K=H(()=>{if(D.value){const d=D.value,p=new Date(d),c=p.getFullYear(),i=p.getMonth();return{year:c,month:i,time:d}}if(x.value.length===0&&!O.value)return{year:X.value.date.getFullYear(),month:X.value.date.getMonth(),time:X.value.time};if(x.value.length===2&&O.value){const d=new Date(x.value[1]).getFullYear(),p=new Date(x.value[1]).getMonth()-L.value,c=x.value[1];return{year:d,month:p,time:c}}const l=new Date(x.value[0]).getFullYear(),s=new Date(x.value[0]).getMonth(),r=x.value[0];return{year:l,month:s,time:r}}),Q=(l,s)=>{const r=Z(l,s),d=_e(l,s),p=oe(r.length,d.length,l,s),c=[...d,...r,...p],i=7;return{days:r,month:s,next:p,previous:d,year:l,weeklyList:c.reduce((y,_,q)=>{const N=Math.floor(q/i);return y[N]=y[N]||[],y[N].push(_),y},[])}},Z=(l,s)=>{const r=32-new Date(l,s,32).getDate();return Array.from({length:r},(c,i)=>i+1).map((c,i)=>{const w=new Date(l,s,c,12,0,0).getTime(),y=De(l,s,c,"CURRENT"),_=i===0;return{class:"lp-datepicker__day",day:c,itemProps:y,month:new Date(l,s,c,12,0,0).getMonth(),year:new Date(l,s,c,12,0,0).getFullYear(),time:w,isFirst:_,type:"day"}})},_e=(l,s)=>{const r=32-new Date(l,s-1,32).getDate(),d=new Date(l,s,1).getDay(),p=d>0?d-1:6,c=r-(p-1);return Array.from({length:p},(y,_)=>_+c).map(y=>{const _=new Date(l,s-1,y,12,0,0).getTime(),q=De(l,s-1,y,"PREVIOUS");return{class:"lp-datepicker__previous",day:y,itemProps:q,month:new Date(l,s-1,y).getMonth(),year:new Date(l,s-1,y).getFullYear(),time:_,type:"previous"}})},oe=(l,s,r,d)=>{const p=l+s,i=Math.ceil(p/7)*7-p;return Array.from({length:i},(_,q)=>q+1).map(_=>{const q=new Date(r,d+1,_,12,0,0).getTime(),N=De(r,d+1,_,"NEXT");return{class:"lp-datepicker__next",day:_,itemProps:N,month:new Date(q).getMonth(),year:new Date(q).getFullYear(),time:q,type:"next"}})},ge=(l,s,r,d)=>{if(te(l,s,r))return;h.value&&(a.value=[],h.value=!1);const p=new Date(l,s,r,12,0,0).getTime();k.value=p,D.value=0,F.value||(a.value=[p],o("selection",a.value),b.value=0),F.value&&(a.value.length<2?(L.value=d,a.value.push(p),A.value=[],a.value.sort(),O.value=!0,o("selection",a.value),b.value=0):(L.value=0,a.value=[p],o("selection",a.value)))},ie=()=>{o("hide",{from:fe.value})},Ae=()=>{h.value=!0,o("reset"),T.value.querySelector('[data-time-to-focus="'+k.value+'"]').focus()},Te=l=>{if(F.value&&a.value.length===1){const s=G.value;if(l<a.value[0]){const r=l,d=a.value[0]-s;A.value=Array.from({length:(d-r)/s+1},(p,c)=>r+c*s)}if(l>a.value[0]){const r=a.value[0]+s,d=l;A.value=Array.from({length:(d-r)/s+1},(p,c)=>r+c*s)}}},be=async(l,s)=>{const r=l,d=s==="left"||s==="right",p=s==="left"||s==="up",c=d?G.value:G.value*7,i=p?-1*c:c,w=Fe(r,i);k.value=w,D.value=w,await Xe(),T.value.querySelector('[data-time-to-focus="'+k.value+'"]').focus()},Fe=(l,s)=>{let r=l;r+=s;const d=new Date(r);return d.setHours(12,0,0,0),d.getTime()},Ce=(l,s)=>{if(isNaN(s))return[];let r=[];if(l<=s)r=Array.from({length:s-l+1},(p,c)=>l+c);else{const p=Array.from({length:12-l},(i,w)=>l+w),c=Array.from({length:s+1},(i,w)=>w);r=p.concat(c)}return r},Re=()=>{T.value.querySelector(".lp-datepicker__arrow--right").focus()},Ye=async()=>{T.value.querySelector(".lp-datepicker__closer").focus()},Be=async()=>{T.value.querySelector('[data-time-to-focus="'+k.value+'"]').focus()},V=async()=>{T.value.querySelector(".lp-datepicker__arrow--left").focus()},De=(l,s,r,d)=>{let p="button",c="",i=" lp-datepicker__td ",w=!1,y=-1,_=null,q=!1;const N=new Date(l,s,r,12,0,0),M=N.getTime(),we={weekday:"long",year:"numeric",month:"long",day:"numeric"},de=N.toLocaleDateString("fr-FR",we);let he=`${de}.`;const Oe=d==="NEXT"||d==="PREVIOUS";(te(l,s,r)||Oe)&&(p="span",c+=" lp-datepicker--disabled ",w=!0,he=`Date non sélectionnable. ${de}.`),a.value.includes(M)&&x.value.length!==0&&!h.value&&(p="button",c+=" lp-datepicker__selected ",y=-1,he=`Sélectionné, ${de}.`,i+=" lp-datepicker--parent-selected "),M===X.value.time&&(c+=" lp-datepicker__today ",he=`Aujourd'hui, ${de}.`,_="date"),M===X.value.time&&a.value.includes(M)&&(he=`Aujourd'hui, Sélectionné, ${de}.`),(M===a.value[0]||M===a.value[1])&&!h.value&&(q=!0),k.value===M&&(y=0);const Ve=a.value[0]!==a.value[1];return a.value.length>0&&M===a.value[0]&&Ve&&!h.value&&(i+=" lp-datepicker--start "),a.value.length===2&&M===a.value[1]&&Ve&&!h.value&&(i+=" lp-datepicker--end "),a.value.length===2&&M>a.value[0]&&M<a.value[1]&&!h.value&&(c+=" lp-datepicker__interval ",i+=" lp-datepicker--parent-interval "),{tag:p,elementClass:c,parentClass:i,disabled:w,tabindex:y,ariaLabel:he,ariaCurrent:_,ariaSelected:q}};return ct(()=>{const l=ae.value.flatMap(s=>s.days).map(s=>s.time);l.includes(k.value)||(k.value=l[0])}),lt(async()=>{const l=T.value;o("opened",l.getBoundingClientRect()),Be(),$.isInModal&&await Xe(),l.querySelector('[data-time-to-focus="'+k.value+'"]').focus()}),a.value=J.value.sort(),k.value=K.value.time,(l,s)=>(B(),E("div",{ref_key:"datepickerBox",ref:Y,class:P(["lp-datepicker",[{"lp-datepicker--interval":R(F)},{"lp-datepicker--in-modal":l.isInModal},{"lp-datepicker--medium":re.value.isMedium},{"lp-datepicker--large":re.value.isLarge},{"lp-datepicker--frontof":l.isSmall}]]),onKeydown:U(ie,["esc"])},[f("div",Dt,[f("button",{"aria-label":`${R(ye)[W.value.left.month]} ${W.value.left.year}`,class:"lp-datepicker__arrow lp-datepicker__arrow--left",onKeydown:U(ee(Ye,["exact","shift","prevent"]),["tab"]),onClick:s[0]||(s[0]=r=>b.value-=1)},[ce(He,{class:"lp-datepicker__arrow-icon",name:"arrow-left",type:"light"})],40,wt),f("button",{ref_key:"datepickerArrowRight",ref:Ie,"aria-label":`${R(ye)[W.value.right.month]} ${W.value.right.year}`,class:"lp-datepicker__arrow lp-datepicker__arrow--right",onKeydown:U(ee(Be,["exact","prevent"]),["tab"]),onClick:s[1]||(s[1]=r=>b.value+=1)},[ce(He,{class:"lp-datepicker__arrow-icon",name:"arrow-right",type:"light"})],40,$t)]),f("div",Mt,[(B(!0),E(Ee,null,Pe(ae.value,(r,d)=>(B(),E("table",{key:`range-${d}`,class:P(["lp-datepicker__inside",r.intervalClass])},[f("caption",null,[f("div",It,[f("span",St,ne(R(ye)[r.month]),1),f("span",xt,ne(r.year),1)])]),f("thead",null,[f("tr",null,[(B(!0),E(Ee,null,Pe(R(qe),(p,c)=>(B(),E("th",{key:`weekdays-${p}-${c}`,scope:"col",class:"lp-datepicker__th"},[f("abbr",{title:p.name,class:"lp-datepicker__weekday"},ne(p.abbr),9,qt)]))),128))])]),f("tbody",null,[(B(!0),E(Ee,null,Pe(r.weeklyList,(p,c)=>(B(),E("tr",{key:`line-${d}-${c}`},[(B(!0),E(Ee,null,Pe(p,(i,w)=>(B(),E("td",{key:`item-${d}-${c}-${w}`,class:P([i.itemProps.parentClass,{"lp-datepicker__previous--hidden":i.type==="previous","lp-datepicker__next--hidden":i.type==="next"}]),"aria-current":i.itemProps.ariaCurrent},[(B(),Ke(st(i.itemProps.tag),{"aria-label":i.itemProps.ariaLabel,"aria-selected":i.itemProps.ariaSelected,"data-time-to-focus":i.time,tabindex:i.itemProps.tabindex,class:P([[i.itemProps.elementClass,{"lp-datepicker__first":i.isFirst&&!r.index}],"lp-datepicker__day"]),onMouseover:y=>Te(i.time),onClick:y=>ge(i.year,i.month,i.day,r.index),onKeydown:[U(ee(y=>ge(i.year,i.month,i.day,r.index),["prevent"]),["space"]),U(ee(y=>ge(i.year,i.month,i.day,r.index),["prevent"]),["enter"]),U(ee(Re,["exact","shift","prevent"]),["tab"]),U(ee(y=>be(i.time,"up"),["prevent"]),["up"]),U(ee(y=>be(i.time,"down"),["prevent"]),["down"]),U(ee(y=>be(i.time,"left"),["prevent"]),["left"]),U(ee(y=>be(i.time,"right"),["prevent"]),["right"])]},{default:Le(()=>[Je(ne(i.day),1)]),_:2},1064,["aria-label","aria-selected","data-time-to-focus","tabindex","class","onMouseover","onClick","onKeydown"]))],10,Rt))),128))]))),128))])],2))),128))]),f("div",{class:P(["lp-datepicker__actions",`lp-datepicker__actions--${l.withReset&&l.buttonLayout==="centered"?"btns-":""}${l.buttonLayout}`])},[l.withReset?(B(),Ke(Ze,{key:0,"aria-label":"réinitialiser le calendrier",type:"ghost",color:"darkgrey",size:"small",class:"lp-datepicker__reset",onClick:Ae},{default:Le(()=>s[2]||(s[2]=[Je(" Réinitialiser ")])),_:1})):$e("",!0),ce(Ze,{"aria-label":"Fermer le calendrier",color:"default",type:l.withReset?"secondary":"ghost",size:"small",class:"lp-datepicker__closer",onKeydown:U(ee(V,["exact","prevent"]),["tab"]),onClick:ie},{default:Le(()=>s[3]||(s[3]=[Je(" Fermer ")])),_:1},8,["type","onKeydown"])],2)],34))}}),et=rt(it,[["__scopeId","data-v-7b072f3d"]]);it.__docgenInfo={exportName:"default",displayName:"DatepickerDays",description:"",tags:{},props:[{name:"startNumber",required:!1,type:{name:"number"}},{name:"endNumber",required:!1,type:{name:"number"}},{name:"isInModal",required:!1,type:{name:"boolean"}},{name:"isSmall",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.small"}},{name:"blackList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"buttonLayout",required:!1,type:{name:"union",elements:[{name:'"centered"'},{name:'"align-right"'}]},defaultValue:{func:!1,value:"'centered'"}},{name:"range",required:!1,type:{name:"Range"}},{name:"disabledDaysByWeek",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"holidays",required:!1,type:{name:"boolean"}},{name:"bankHolidays",required:!1,type:{name:"boolean"}},{name:"typage",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"interval"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"weekend",required:!1,type:{name:"boolean"}},{name:"whiteList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"withReset",required:!1,type:{name:"boolean"}}],events:[{name:"selection"},{name:"hide"},{name:"opened"},{name:"reset"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue3-solaris/src/components/molecules/Datepicker/Tools/DatepickerDays.vue"]};const tt=z=>/^(0?[1-9]|[12][0-9]|3[01])[/](0?[1-9]|1[012])[/]\d{4}$/.test(z),ze={xxs:320,xs:375,s:700,m:992,l:1280,xl:1440,xxl:1680,xxxl:3e3},Bt=["aria-describedby"],Lt=["aria-invalid","aria-required"],At=["aria-label","value","readonly","tabindex","disabled"],Tt=["aria-label","value","readonly","tabindex","disabled"],Ft=["aria-label","value","readonly","tabindex","disabled"],Ct=["aria-invalid","aria-required"],Yt={class:"lp-datepicker__inputs"},Vt=["aria-label","value","readonly","tabindex","disabled"],Nt=["aria-label","value","readonly","tabindex","disabled"],Et=["aria-label","value","readonly","tabindex","disabled"],Pt=["aria-expanded","disabled"],zt=["aria-expanded","disabled"],Ht={key:1,class:"lp-datepicker__dropdown"},Ot={class:"lp-datepicker__error-message-text"},Jt={key:2,class:"lp-datepicker__message"},dt=at({__name:"Datepicker",props:Qe({dataError:{},disabled:{type:Boolean},end:{},size:{default:Ue.medium},start:{},blackList:{},buttonLayout:{},range:{},disabledDaysByWeek:{},holidays:{type:Boolean},bankHolidays:{type:Boolean},mandatory:{type:Boolean},typage:{default:"default"},inputReadonly:{type:Boolean},label:{},labelPosition:{default:_t.inside},message:{},weekend:{type:Boolean},whiteList:{},withReset:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:Qe(["input","blur","change","selection","reset"],["update:modelValue"]),setup(z,{emit:Me}){var je;const $=pt(z,"modelValue"),o=z,Y=Me,Ie=kt,pe=yt(),S=(je=pe==null?void 0:pe.proxy)==null?void 0:je.$el,j=g(),ve=g(),le=g(),se=g(),{range:Se,blackList:xe,disabledDaysByWeek:me,holidays:ye,bankHolidays:qe,typage:F,weekend:te,whiteList:G}=nt(o),{nullTime:b,interval:L,inputData:a}=ot(Se,xe,me,ye,qe,F,te,G),A=g(b.value),h=g(b.value),k=g(!1),D=g(!1),O=g({left:"0px",right:"inherit",transform:"translateX(0)",isSmall:!1}),T=g({maxHeight:"auto"}),x=H(()=>W.value?"fieldset":"div"),J=H(()=>o.typage==="default"),W=H(()=>!J.value&&o.labelPosition==="outside"),ae=H(()=>J.value&&o.label||o.start.label),fe=g("lp-datepicker__opened--bottom"),re=g(!1),X=g(""),K=g(null),Q=g(!1),Z=e=>{Q.value=!1;const t=e.target,n=t.value,u=t.dataset.datepickerName||"",m=t.selectionStart,v=n.replace(/\D/g,"");if(t.value=v,m!==null){const I=n.length-v.length;t.setSelectionRange(m-I,m-I)}De(v,u,"start"),L.value&&De(v,u,"end"),(/^\d*$/.test(n)||!v)&&Y("input",e)},_e=H(()=>({colorBorderTop:"supernova",mobileFull:!1,size:"default",showTitle:!1,title:J.value?"Choisir la date":"Choisir les dates"})),oe=e=>{const t=e.height,n=S==null?void 0:S.getBoundingClientRect(),u=n==null?void 0:n.top,m=window.innerHeight-(n==null?void 0:n.bottom);let v="bottom";m<t+16&&u>t+16&&(v="top"),fe.value=`lp-datepicker__opened--${v}`},ge=()=>{var e,t;return(e=o.dataError)!=null&&e.active&&((t=o.dataError)!=null&&t.message)?X.value:void 0},ie=()=>{const e=K.value;X.value=e&&e.id?e.id:"error-message"},Ae=bt({tablet_landscape:ze.m,tablet:ze.s}),Te=e=>{const t=Ae.isGreaterOrEqual("tablet_landscape"),n=Ae.isGreaterOrEqual("tablet"),u=t,m=L.value&&u?758:ze.xs,v=m===ze.xs,I=(S==null?void 0:S.getBoundingClientRect().left)+m>window.innerWidth,ue=I?"inherit":"0px",ke=I?"0px":"inherit";O.value={left:n?ue:"50%",transform:n?"":"translateX(-50%)",right:ke,isSmall:v},e==="modale"?(D.value=!D.value,k.value=!1):(k.value=!k.value,D.value=!1),Q.value&&be()},be=()=>{A.value=b.value,h.value=b.value},Fe=()=>{Q.value=!0,Object.keys(a).forEach(u=>{u.endsWith("Input")&&(a[u]="")});const e=A.value!==b.value,t=h.value!==b.value,n=[...e?[A.value]:[],...t?[h.value]:[]];Y("reset",n),e&&t&&(h.value=b.value)},Ce=e=>{var u,m;let t="dropdown";e.from==="fromDropdown"&&(k.value=!k.value),e.from==="fromModal"&&(t="modal",D.value=!D.value),(u=se.value)==null||u.focus(),(m=le.value)==null||m.focus();const n=S==null?void 0:S.querySelector(".lp-datepicker__toggle--"+t);n==null||n.focus()},Re=()=>{k.value&&(k.value=!1);const e=S==null?void 0:S.querySelector(".lp-datepicker__toggle--dropdown");e==null||e.focus()},Ye=()=>{D.value&&(D.value=!1);const e=S==null?void 0:S.querySelector(".lp-datepicker__toggle--modal");e==null||e.focus()},Be=e=>{const t={day:`${e}DayInput`,month:`${e}MonthInput`,year:`${e}YearInput`},n=a[t.day];if(n){const v=parseInt(n);a[t.day]=v===0?"01":v.toString().padStart(2,"0")}const u=a[t.month];["0","1"].includes(u)&&(a[t.month]="01");const m=a[t.year];if(m){const v=parseInt(m);v<100?a[t.year]=(v+2e3).toString():a[t.year]=v.toString().padStart(4,"0")}},V=(e,t)=>{if(o.inputReadonly){re.value=!1;return}if(re.value=!!e,k.value=!1,e===!1&&t==="start"){if(Be(t),!a.startDayInput||!a.startMonthInput||!a.startYearInput)return;const n=`${a.startDayInput}/${a.startMonthInput}/${a.startYearInput}`;Y("input",n),Y("blur"),$.value[0]=`${n}`}if(e===!1&&t==="end"){if(Be(t),!a.endDayInput||!a.endMonthInput||!a.endYearInput)return;const n=`${a.endDayInput}/${a.endMonthInput}/${a.endYearInput}`;Y("input",n),Y("blur"),$.value[1]=`${n}`}},De=(e,t,n)=>{if(t===`${n}-day`){const u=p(e,a[`${n}MonthInput`],a[`${n}YearInput`]);a[`${n}DayInput`]=u,a[`${n}Day`]=u,a[`${n}DayInput`]==="0"&&(a[`${n}Day`]="01")}if(t===`${n}-month`){const u=c(e,n,a[`${n}DayInput`],a[`${n}YearInput`]);a[`${n}MonthInput`]=u,a[`${n}Month`]=u,a[`${n}MonthInput`]==="0"&&(a[`${n}Month`]="01")}if(t===`${n}-year`){const u=i(e,n,a[`${n}DayInput`],a[`${n}MonthInput`]);a[`${n}YearInput`]=e,a[`${n}Year`]=u}l(n)},l=e=>{a[`${e}NewTime`]=de(a[`${e}Year`],a[`${e}Month`],a[`${e}Day`]);const t=s("start"),n=s("end");e==="start"?A.value=t?b.value:a.startNewTime:e==="end"&&(h.value=n?b.value:a.endNewTime)},s=e=>a[`${e}DayInput`]===""||a[`${e}MonthInput`]===""||a[`${e}YearInput`]==="",r=(e,t,n)=>t?`0${e}`:n?`0${e[0]}`:e.length===2&&e==="00"?"01":e,d=(e,t,n)=>{const u=parseInt(e),m=parseInt(t);let v=parseInt(n);v=v<100?v+2e3:v;const I=new Date(v,m,0).getDate();return{dayValue:u,monthValue:m,yearValue:v,daysInMonth:I}},p=(e,t,n)=>{const{dayValue:u,daysInMonth:m}=d(e,t,n),v=Math.floor(m/10)||3,I=e.length===1&&u>v,ue=u>m||(!t||!n)&&u>31;return r(e,I,ue)},c=(e,t,n,u)=>{const{monthValue:m,dayValue:v,daysInMonth:I}=d(n,e,u),ue=e.length===1&&m>1,ke=m>12,Ne=r(e,ue,ke);return w(v,I,t),Ne},i=(e,t,n,u)=>{const{dayValue:m,daysInMonth:v,yearValue:I}=d(n,u,e);return w(m,v,t),I},w=(e,t,n)=>{if(e>t){const m=n==="start"?"startDayInput":"endDayInput",v=n==="start"?"startDay":"endDay";a[m]=t.toString(),a[v]=t.toString()}},y=e=>{var n,u,m,v;Q.value&&(be(),Q.value=!1);const t=new Date(e[0]);if(a.startDay=_(t.getDate()),a.startMonth=_(t.getMonth()+1),a.startYear=t.getFullYear(),we("start"),A.value=e[0],L.value||($.value=[M(String(e[0]))],Y("selection",e[0]),Re(),Ye(),(n=se.value)==null||n.focus(),(u=le.value)==null||u.focus()),L.value&&e.length===1&&($.value=[M(String(e[0]))],Y("selection",e[0])),L.value&&e.length===2){const I=new Date(e[1]);a.endDay=_(I.getDate()),a.endMonth=_(I.getMonth()+1),a.endYear=I.getFullYear(),we("end"),h.value=e[1],$.value=[M(String(e[0])),M(String(e[1]))],Y("selection",e),Re(),Ye(),(m=se.value)==null||m.focus(),(v=le.value)==null||v.focus()}},_=e=>e.toLocaleString("fr-FR",{minimumIntegerDigits:2}),q=e=>e.split("/"),N=e=>{const t=q(e),n=t[0],u=t[1],m=parseInt(t[2]);return de(m,u,n)},M=e=>{const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),u=String(t.getMonth()+1).padStart(2,"0"),m=t.getFullYear();return`${n}/${u}/${m}`},we=e=>{a[`${e}DayInput`]=a[`${e}Day`],a[`${e}MonthInput`]=a[`${e}Month`],a[`${e}YearInput`]=""+a[`${e}Year`]},de=(e,t,n)=>new Date(e,parseInt(t)-1,parseInt(n),12,0,0).getTime(),he=e=>{if(!e.date||!tt(e.date))return;const t=e.date,n=q(t);a.startDay=n[0],a.startMonth=n[1],a.startYear=parseInt(n[2]),we("start"),A.value=N(t)},Oe=e=>{if(!e||!e.date||!tt(e.date))return;const t=e.date,n=q(t);a.endDay=n[0],a.endMonth=n[1],a.endYear=parseInt(n[2]),we("end"),h.value=N(t)},Ve=()=>{he(o.start),L.value&&Oe(o.end)};return ht(j,()=>Re()),A.value=b.value,h.value=b.value,Ve(),vt(()=>{ie()}),lt(()=>{ie()}),(e,t)=>{var n;return B(),Ke(st(x.value),{class:P(["lp-datepicker__container",[{"lp-datepicker--error":(n=e.dataError)==null?void 0:n.active},{"lp-datepicker__container--outside-default":J.value&&o.labelPosition==="outside"}]])},{default:Le(()=>{var u,m,v,I,ue,ke,Ne;return[W.value&&o.label?(B(),E("legend",{key:0,class:P([{"lp-datepicker__label--outside":W.value}])},ne(o.label),3)):$e("",!0),f("div",{ref_key:"datepicker",ref:j,class:P(["lp-datepicker__wrapper",[`lp-datepicker__wrapper--${o.size}`,{"lp-datepicker__wrapper--outside":J.value&&o.labelPosition==="outside"},{"lp-datepicker__wrapper--focused":re.value},{"lp-datepicker__wrapper--disabled":o.disabled},{"lp-datepicker__wrapper--interval":R(L)},{"lp-datepicker__wrapper--readonly":o.inputReadonly},{"lp-datepicker__wrapper--empty":R(a).startDayInput===""&&R(a).startMonthInput===""&&R(a).startYearInput===null},{"lp-datepicker--error":(u=e.dataError)==null?void 0:u.active}]]),"aria-describedby":ge()},[f("fieldset",{class:P(["lp-datepicker__date",{[`lp-datepicker__default-${o.labelPosition}`]:J.value}]),"aria-invalid":((m=o.dataError)==null?void 0:m.active)??!1,"aria-required":o.mandatory},[f("legend",{class:P(["lp-datepicker__label",[{"visually-hidden":W.value,"lp-datepicker__label--mandatory":o.mandatory,"lp-datepicker__label--outside-default":o.labelPosition==="outside"},J.value?`lp-datepicker__label--${o.labelPosition}`:"lp-datepicker__label--inside"]])},ne(ae.value),3),f("div",{class:P(["lp-datepicker__inputs",{[`lp-datepicker__inputs--${o.labelPosition}`]:J.value}])},[f("input",{id:"datepicker-start",type:"text",class:"lp-datepicker__input lp-datepicker__input--day",maxlength:"2","aria-label":`${ae.value}, Jour, Format attendu : JJ (exemple: 12)`,value:R(a).startDayInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"JJ","data-datepicker-name":"start-day",onInput:Z,onFocus:t[0]||(t[0]=C=>V(!0,"start")),onBlur:t[1]||(t[1]=C=>V(!1,"start"))},null,40,At),t[15]||(t[15]=f("span",{class:"lp-datepicker__slash"},"/",-1)),f("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--month",maxlength:"2","aria-label":`${ae.value}, Mois, Format attendu : MM (exemple : 08)`,value:R(a).startMonthInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"MM","data-datepicker-name":"start-month",onInput:Z,onFocus:t[2]||(t[2]=C=>V(!0,"start")),onBlur:t[3]||(t[3]=C=>V(!1,"start"))},null,40,Tt),t[16]||(t[16]=f("span",{class:"lp-datepicker__slash"},"/",-1)),f("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--year",maxlength:"4","aria-label":`${ae.value}, Année, Format attendu : AAAA (exemple : 2018)`,value:R(a).startYearInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"AAAA","data-datepicker-name":"start-year",onInput:Z,onFocus:t[4]||(t[4]=C=>V(!0,"start")),onBlur:t[5]||(t[5]=C=>V(!1,"start"))},null,40,Ft)],2)],10,Lt),R(L)?(B(),E("fieldset",{key:0,class:"lp-datepicker__date lp-datepicker__label--inside","aria-invalid":((v=o.dataError)==null?void 0:v.active)??!1,"aria-required":e.mandatory},[f("legend",{class:P(["lp-datepicker__label",{"lp-datepicker__label--mandatory":e.mandatory,"visually-hidden":W.value}])},ne(e.end.label),3),f("div",Yt,[f("input",{id:"datepicker-end",type:"text",class:"lp-datepicker__input lp-datepicker__input--day",maxlength:"2","aria-label":`${e.end.label}, Jour, Format attendu : JJ (exemple: 12)`,value:R(a).endDayInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"JJ","data-datepicker-name":"end-day",onInput:Z,onFocus:t[6]||(t[6]=C=>V(!0,"end")),onBlur:t[7]||(t[7]=C=>V(!1,"end"))},null,40,Vt),t[17]||(t[17]=f("span",{class:"lp-datepicker__slash"},"/",-1)),f("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--month",maxlength:"2","aria-label":`${e.end.label}, Mois, Format attendu : MM (exemple: 08)`,value:R(a).endMonthInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"MM","data-datepicker-name":"end-month",onInput:Z,onFocus:t[8]||(t[8]=C=>V(!0,"end")),onBlur:t[9]||(t[9]=C=>V(!1,"end"))},null,40,Nt),t[18]||(t[18]=f("span",{class:"lp-datepicker__slash"},"/",-1)),f("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--year",maxlength:"4","aria-label":`${e.end.label}, Année, Format attendu : AAAA (exemple: 2018)`,value:R(a).endYearInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"AAAA","data-datepicker-name":"end-year",onInput:Z,onFocus:t[10]||(t[10]=C=>V(!0,"end")),onBlur:t[11]||(t[11]=C=>V(!1,"end"))},null,40,Et)])],8,Ct)):$e("",!0),f("button",{ref_key:"datepickerButtonDropdown",ref:le,"aria-expanded":k.value,"aria-label":"Choisir la date dans un calendrier",class:P([[`lp-datepicker__toggle--${e.size}`,{"lp-datepicker__toggle--readonly":e.inputReadonly}],"lp-datepicker__toggle lp-datepicker__toggle--dropdown"]),disabled:o.disabled,onClick:t[12]||(t[12]=C=>Te("dropdown"))},[ce(He,{name:"editing-calendar",type:"light"})],10,Pt),f("button",{ref_key:"datepickerButtonModal",ref:se,"aria-expanded":D.value,"aria-label":"Choisir la date dans un calendrier",class:P([[`lp-datepicker__toggle--${e.size}`,{"lp-datepicker__toggle--readonly":e.inputReadonly}],"lp-datepicker__toggle lp-datepicker__toggle--modal"]),disabled:o.disabled,onClick:t[13]||(t[13]=C=>Te("modale"))},[ce(He,{name:"editing-calendar",type:"light"})],10,zt),ce(ft,We({modelValue:D.value,"onUpdate:modelValue":t[14]||(t[14]=C=>D.value=C)},_e.value,{class:"lp-datepicker__modal"}),{content:Le(()=>[ce(et,We({ref_key:"datepickerDropdown",ref:ve,class:["lp-datepicker__opened",fe.value],"is-in-modal":!0,"is-small":O.value.isSmall,style:[O.value,T.value],"start-number":A.value,"end-number":h.value},e.$props,{onOpened:oe,onSelection:y,onHide:Ce,onReset:Fe}),null,16,["is-small","class","style","start-number","end-number"])]),_:1},16,["modelValue"]),k.value?(B(),E("div",Ht,[ce(et,We({ref_key:"datepickerDropdown",ref:ve,class:["lp-datepicker__opened",fe.value],style:[O.value,T.value],"start-number":A.value,"end-number":h.value},o,{onOpened:oe,onSelection:y,onHide:Ce,onReset:Fe}),null,16,["class","style","start-number","end-number"])])):$e("",!0)],10,Bt),(I=e.dataError)!=null&&I.active&&((ue=e.dataError)!=null&&ue.message)?mt((B(),E("p",{key:1,ref_key:"errorMessage",ref:K,class:"lp-datepicker__error-message","aria-live":"polite"},[f("span",Ot,ne((ke=e.dataError)==null?void 0:ke.message),1)])),[[R(Ie),"lp-datepicker-error-message--"]]):$e("",!0),e.message&&!((Ne=e.dataError)!=null&&Ne.active)?(B(),E("p",Jt,ne(e.message),1)):$e("",!0)]}),_:1},8,["class"])}}}),ea=rt(dt,[["__scopeId","data-v-15bdb76d"]]);dt.__docgenInfo={exportName:"default",displayName:"Datepicker",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"end",required:!1,type:{name:"DateType"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.medium"}},{name:"start",required:!0,type:{name:"DateType"}},{name:"blackList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"buttonLayout",required:!1,type:{name:"union",elements:[{name:'"centered"'},{name:'"align-right"'}]}},{name:"range",required:!1,type:{name:"Range"}},{name:"disabledDaysByWeek",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"holidays",required:!1,type:{name:"boolean"}},{name:"bankHolidays",required:!1,type:{name:"boolean"}},{name:"mandatory",required:!1,type:{name:"boolean"}},{name:"typage",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"interval"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"inputReadonly",required:!1,type:{name:"boolean"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"message",required:!1,type:{name:"string"}},{name:"weekend",required:!1,type:{name:"boolean"}},{name:"whiteList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"withReset",required:!1,type:{name:"boolean"}}],events:[{name:"input"},{name:"blur"},{name:"change"},{name:"selection"},{name:"reset"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue3-solaris/src/components/molecules/Datepicker/Datepicker.vue"]};export{ea as S,Ue as a,tt as i};
