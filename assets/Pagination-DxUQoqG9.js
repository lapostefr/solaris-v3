import{d as V,m as I,a as ee,r as g,c as P,o as r,e as y,t as L,z as N,b as M,A as C,H as q,C as S,D as B,E as D,B as _,F as ae,x as te,y as F}from"./vue.esm-bundler-DbnnIJWB.js";import{S as w}from"./Icon-BFYv-dj3.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={key:0,class:"pagination"},ie=["disabled"],le={class:"pagination__numbers"},ne=["disabled"],R=V({__name:"Pagination",props:I({pageParam:{default:"page"},perPage:{},total:{},url:{},withLinks:{type:Boolean},modelValue:{}},{modelValue:{},modelModifiers:{}}),emits:I(["input"],["update:modelValue"]),setup(E,{emit:T}){const v=E,U=T,t=ee(E,"modelValue"),u=g([v.modelValue]),p=g([]),f=g(8),m=g(!0),H=g(0),k=g(!1),c=s=>{s&&(m.value=!1,k.value=!0,t.value!==s&&(u.value=[],p.value=[],t.value=s,U("input",s)))},b=()=>v.withLinks?"a":"div",x=s=>{let e={};if(v.withLinks){if(!v.url)throw new Error("Missing required url props with withLinks props");const a=new URL(v.url),i=new URLSearchParams(a.search);s>1?i.set(v.pageParam,s.toString()):i.delete(v.pageParam);const l=i.toString();e={...e,href:a.pathname+(l.length?"?"+l:"")}}return e},o=P(()=>Math.ceil(v.total/v.perPage)),n=P(()=>{const s=Array(o.value).fill(null).map((i,l)=>l+1),e=d(10,t==null?void 0:t.value),a=(t==null?void 0:t.value)%10===0?((t==null?void 0:t.value)|0)+10:h(10,t==null?void 0:t.value);return s.reduce((i,l)=>{O(i,l);const Y=l<o.value,Z=o.value<=f.value;return(!m.value||m.value&&(Y||Z))&&j(i,l),u.value.length||t.value===1&&l>3&&o.value>f.value?i:t.value===o.value&&!p.value.length&&o.value>f.value?(l<t.value-3||i.push(l),i):(l>=e&&l<=a&&i.push(l),i)},[])}),O=(s,e)=>{e<d(10,t==null?void 0:t.value)&&p.value.forEach(a=>{e%10===0&&e<a&&e>=a-100&&s.push(e),e%100===0&&e<a-100&&s.push(e),a<=20&&e<a&&e<10&&s.push(e)})},j=(s,e)=>{u.value.forEach(a=>{const i=o.value-a<=10?!0:a>=o.value-10;if(e<d(10,a)&&a>=10)return s;W(s,e,a,i),$(s,e,a,i),z(s,e,a)})},W=(s,e,a,i)=>{e%10===0&&e%100!==0&&(e<h(100,a+1)&&e>d(100,a)&&!i||a>=d(100,o.value)-10)&&s.push(e),e%10===0&&e%100===0&&e<h(100,a+1)&&s.push(e)},$=(s,e,a,i)=>{e>a&&e%100===0&&!i&&s.push(e)},z=(s,e,a)=>{e%10!==0&&(e<=h(10,a+1)||a>=d(10,o.value)-10)&&s.push(e)},G=P(()=>p.value.length===1?!1:n.value[0]>1),A=s=>{const e=s>3&&s<=o.value,a=o.value>f.value;return m.value&&!k.value&&e&&a},J=P(()=>{const s=o.value<=f.value,e=n.value[n.value.length-1],a=o.value>f.value;return m.value&&a?!0:s||u.value.length===1||o.value<=10&&t.value!==1||o.value%10===1&&e===o.value-1||e===o.value-10||e===o.value-100?!1:o.value<20&&((t==null?void 0:t.value)|0)<10?!u.value.length:!n.value.some(i=>i===o.value)}),K=()=>{const s=(t==null?void 0:t.value)<110?d(100,t==null?void 0:t.value)-1:h(100,t==null?void 0:t.value),e=String(t.value).length===2?h(10,t==null?void 0:t.value):s;p.value=[...p.value,p.value.length?n.value[0]:e]},Q=()=>{u.value=[...u.value,u!=null&&u.value.length?n==null?void 0:n.value[n.value.length-1]:t==null?void 0:t.value]},X=()=>{H.value++;const s=k.value&&H.value===1;(!m.value||s)&&Q(),m.value=!1,k.value=!1},h=(s,e)=>s*Math.ceil(e/s),d=(s,e)=>s*Math.floor(e/s);return(s,e)=>s.total?(r(),y("div",oe,[L("button",{disabled:t.value<=n.value[0],class:"pagination__item pagination__item--prev",title:"Cliquer pour revenir en arriÃ¨re",onClick:e[0]||(e[0]=a=>c(t.value-1))},[N(w,{name:"arrow-large-left"})],8,ie),L("div",le,[n.value.some(a=>a===1)?_("",!0):(r(),M(D(b()),S({key:0,class:"pagination__item pagination__item--other"},x(1),B(s.withLinks?{}:{click:()=>c(1)})),{default:C(()=>e[2]||(e[2]=[q(" 1 ")])),_:1},16)),G.value?(r(),y("button",{key:1,"arial-label":"Voir plus de pages",class:"pagination__item pagination__item--other",onClick:K},[N(w,{name:"settings-menu-action"})])):_("",!0),(r(!0),y(ae,null,te(n.value,a=>(r(),M(D(b()),S({ref_for:!0},x(a),{key:a,class:["pagination__item",{"pagination__item--current":t.value===a,"visually-hidden":A(a)}],tabindex:A(a)?-1:void 0},B(s.withLinks?{}:{click:()=>c(a)})),{default:C(()=>[q(F(a),1)]),_:2},1040,["class","tabindex"]))),128)),J.value?(r(),y("button",{key:2,"arial-label":"Voir plus de pages",class:"pagination__item pagination__item--other",onClick:X},[N(w,{name:"settings-menu-action"})])):_("",!0),o.value&&!n.value.some(a=>a===o.value)?(r(),M(D(b()),S({key:3,class:"pagination__item pagination__item--other"},x(o.value),B(s.withLinks?{}:{click:()=>c(o.value)})),{default:C(()=>[q(F(o.value),1)]),_:1},16)):_("",!0)]),L("button",{disabled:t.value===o.value,class:"pagination__item pagination__item--next",title:"Cliquer pour avancer",onClick:e[1]||(e[1]=a=>c(t.value+1))},[N(w,{name:"arrow-large-right"})],8,ne)])):_("",!0)}}),me=se(R,[["__scopeId","data-v-83f5a34b"]]);R.__docgenInfo={exportName:"default",displayName:"Pagination",description:"",tags:{},props:[{name:"pageParam",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'page'"}},{name:"perPage",required:!0,type:{name:"number"}},{name:"total",required:!0,type:{name:"number"}},{name:"url",required:!1,type:{name:"string"}},{name:"withLinks",required:!1,type:{name:"boolean"}},{name:"modelValue",required:!0,type:{name:"number"}}],events:[{name:"input"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/Pagination/Pagination.vue"]};export{me as S};
