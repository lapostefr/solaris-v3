import{d as B,m as C,b as D,r as y,a as I,o as A,f as d,g as u,y as n,A as t,v as i,G as c,M as Q,C as o,u as w,H as P}from"./vue.esm-bundler-BiAlgFmf.js";import{g as T}from"./generateId-CVaf2GGW.js";const U=["for"],j=["aria-describedby"],G=["disabled"],z=["id","min","max","disabled","aria-invalid"],H=["disabled"],K={key:0,class:"numberField__text"},S={key:2,class:"numberField__message"},$=B({__name:"NumberField",props:C({value:{},dataError:{},disabled:{type:Boolean},error:{type:Boolean},id:{},label:{default:"Quantité"},labelPosition:{default:"visually-hidden"},max:{},message:{},min:{default:1},small:{type:Boolean},type:{default:"quiet"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const r=m,a=D(m,"modelValue"),g=T,b=y(""),v=y(null),F=()=>{var e,l,s;return r.dataError&&((e=r.dataError)==null?void 0:e.active)&&((s=(l=r.dataError)==null?void 0:l.message)==null?void 0:s.length)},_=e=>{const l=(e==null?void 0:e.target).value;a.value=l?parseInt(l):r.min},h=()=>{r.disabled||a.value===r.max||a.value++},q=()=>{r.disabled||a.value===r.min||a.value--},E=e=>["e","E","+","-","."].includes(e.key)?(e.preventDefault(),!1):!0,M=()=>{!a.value||a.value<r.min?a.value=r.min:a.value>r.max&&(a.value=r.max)},V=()=>{var e,l;return(e=r.dataError)!=null&&e.active&&((l=r.dataError)!=null&&l.message)?b.value:void 0},p=()=>{const e=v.value;b.value=e&&e.id?e.id:"error-message"},k=()=>{var e;return(e=r.dataError)!=null&&e.active?!0:void 0};return I(()=>{p()}),A(()=>{p()}),(e,l)=>{var s,f;return d(),u("div",{class:i(["numberField",[`numberField--${e.type}`,{"numberField--disabled":e.disabled},{"numberField--small":e.small},{"numberField--max":a.value===e.max}]])},[n("label",{class:i(["numberField__label numberField__label--outside",[{"numberField--disabled":e.disabled,"visually-hidden":e.labelPosition==="visually-hidden"}]]),for:e.id||void 0},t(e.label||"Quantité"),11,U),n("div",{class:i(["numberField__inner",[{"numberField--error":e.error||e.dataError&&e.dataError.active}]]),"aria-describedby":V()},[n("button",{"aria-label":"Diminuer la quantité de un",class:i(["numberField__btn--less",{numberField__btn:!0,"numberField__btn--disabled":a.value<=e.min}]),disabled:a.value<=e.min||e.disabled,onClick:q}," - ",10,G),c(n("input",{id:e.id||void 0,ref:"input","onUpdate:modelValue":l[0]||(l[0]=N=>a.value=N),class:"numberField__input",type:"number",min:e.min,max:e.max,disabled:e.disabled,maxlength:4,"aria-invalid":k(),onKeydown:E,onInput:_,onBlur:M},null,40,z),[[Q,a.value]]),n("button",{"aria-label":"Augmenter la quantité de un",class:i(["numberField__btn--more",{numberField__btn:!0,"numberField__btn--disabled":a.value>=e.max}]),disabled:a.value===e.max||e.disabled,onClick:h}," + ",10,H)],10,j),a.value===e.max&&!e.disabled?(d(),u("span",K," Quantité max. ")):o("",!0),F()?c((d(),u("p",{key:1,ref_key:"errorMessage",ref:v,class:"numberField__error-message","aria-live":"polite"},[P(t((s=e.dataError)==null?void 0:s.message),1)])),[[w(g),"numberField-error-message--"]]):o("",!0),e.message&&!((f=e.dataError)!=null&&f.active)?(d(),u("p",S,t(e.message),1)):o("",!0)],2)}}});$.__docgenInfo={exportName:"default",displayName:"NumberField",description:"",tags:{},props:[{name:"value",required:!1,type:{name:"number"}},{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"error",required:!1,type:{name:"boolean"}},{name:"id",required:!1,type:{name:"string"}},{name:"label",required:!0,type:{name:"string"},defaultValue:{func:!1,value:"'Quantité'"}},{name:"labelPosition",required:!1,type:{name:"union",elements:[{name:'"outside"'},{name:'"visually-hidden"'}]},defaultValue:{func:!1,value:"'visually-hidden'"}},{name:"max",required:!0,type:{name:"number"}},{name:"message",required:!1,type:{name:"string"}},{name:"min",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"1"}},{name:"small",required:!1,type:{name:"boolean"}},{name:"type",required:!1,type:{name:"union",elements:[{name:'"emphasis"'},{name:'"default"'},{name:'"quiet"'},{name:'"ghost"'}]},defaultValue:{func:!1,value:"'quiet'"}}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/NumberField/NumberField.vue"]};export{$ as _};
