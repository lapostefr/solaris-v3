import{r as f,P as vt,d as st,a1 as rt,c as H,w as Ze,a7 as mt,o as ot,a6 as et,g as V,y as g,u as q,J as j,I as ee,B as ce,F as Ee,z as Pe,e as Ke,t as Le,C as _e,v as P,f as x,A as le,H as Oe,x as it,m as tt,b as yt,a as ft,D as We,G as gt,q as bt}from"./vue.esm-bundler-BiAlgFmf.js";import{S as He}from"./Icon-C-Sturzh.js";import{S as ht}from"./Modal-BV4-zrH4.js";import{S as at}from"./Button-CxIFeNFW.js";import{u as kt,a as _t,o as Dt}from"./index-a4aneQim.js";import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as wt}from"./generateId-CVaf2GGW.js";import{L as $t}from"./types-DKXD8uiR.js";var Ue=(z=>(z.small="small",z.medium="medium",z.large="large",z))(Ue||{});function ut(z,Me,D,o,Y,Ie,pe,B){const U=f(-1e15),ve=f(!1),se=vt({startDay:"",startMonth:"",startYear:U.value,endDay:"",endMonth:"",endYear:U.value,startDayInput:"",startMonthInput:"",startYearInput:"",endDayInput:"",endMonthInput:"",endYearInput:"",startNewTime:U.value,endNewTime:U.value}),re=f([{abbr:"Lun",name:"Lundi"},{abbr:"Mar",name:"Mardi"},{abbr:"Mer",name:"Mercredi"},{abbr:"Jeu",name:"Jeudi"},{abbr:"Ven",name:"Vendredi"},{abbr:"Sam",name:"Samedi"},{abbr:"Dim",name:"Dimanche"}]),Se=f(["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]),xe=f(864e5),me=f([{d:1,m:1},{d:1,m:5},{d:8,m:5},{d:14,m:7},{d:15,m:8},{d:1,m:11},{d:11,m:11},{d:25,m:12}]),ye=f([17152488e5,17485128e5,17787528e5,18095976e5,18428616e5,17119656e5,17452296e5,17754696e5,18063144e5,18395784e5,17161992e5,17494632e5,17797032e5,1810548e6,1843812e6]),Re=(F,te,G,b)=>{let L=pe.value,a=D.value,A=Y.value!==void 0?Y.value:o.value,h=z.value,k=Me.value,$=B.value;b&&(L=b.weekend.value,a=b.disabledDaysByWeek.value,A=b.bankHolidays.value?b.bankHolidays.value:b.holidays.value,k=b.blackList.value,h=b.range.value,$=b.whiteList.value);let J=!1;const T=new Date(F,te,G).getTime(),S=new Date(T).getDay(),O=!!(L&&[0,6].includes(S)),W=!!(a&&a.includes(S));if(A){const De=me.value.filter(de=>de.d===G&&de.m-1===te),ie=new Date(F,te,G,12,0,0,0).getTime(),ge=ye.value.includes(ie);J=De.length>0||ge}const ae=!!(k&&k.length>0&&k.includes(T)),fe=!!($&&$.length>0&&!$.includes(T)),oe=!!(h&&h.min&&T<h.min),X=!!(h&&h.max&&T>h.max),K=32-new Date(F,te,32).getDate(),Q=Array.from({length:K},(De,ie)=>ie+1),Z=G>Q.length;return O||W||J||ae||fe||oe||X||Z};return ve.value=Ie.value==="interval",{nullTime:U,interval:ve,inputData:se,weekdays:re,allMonths:Se,oneDay:xe,holidaysList:me,isDisabled:Re}}const Mt={class:"lp-datepicker__direction"},It=["aria-label","onKeydown"],St=["aria-label","onKeydown"],xt={class:"lp-datepicker__content"},Rt={class:"lp-datepicker__head"},qt={class:"lp-datepicker__head-month"},Bt={class:"lp-datepicker__head-year"},Lt=["title"],At=["aria-current"],ct=st({__name:"DatepickerDays",props:{startNumber:{},endNumber:{},isInModal:{type:Boolean},isSmall:{type:Boolean,default:!0},size:{default:Ue.small},blackList:{},buttonLayout:{default:"centered"},range:{},disabledDaysByWeek:{},holidays:{type:Boolean},bankHolidays:{type:Boolean},typage:{default:"default"},weekend:{type:Boolean},whiteList:{},withReset:{type:Boolean}},emits:["selection","hide","opened","reset"],setup(z,{emit:Me}){const D=z,o=Me,Y=f(null),Ie=f(null),{range:pe,blackList:B,disabledDaysByWeek:U,holidays:ve,bankHolidays:se,typage:re,weekend:Se,whiteList:xe}=rt(D),{nullTime:me,allMonths:ye,weekdays:Re,interval:F,isDisabled:te,oneDay:G}=ut(pe,B,U,ve,se,re,Se,xe),b=f(0),L=f(0),a=f([]),A=f([]),h=f(!1),k=f(0),$=f(0),J=f(!1),T=kt(),S=H(()=>{const l=!D.startNumber||D.startNumber===me.value,s=!D.endNumber||D.endNumber===me.value;if(!F.value&&l||F.value&&l&&s)return[];const r=[];return l||r.push(D.startNumber),s||r.push(D.endNumber),r}),O=H(()=>{if(S.value.length===0)return[];const s=[S.value[0]];if(F.value&&S.value.length>1){const r=S.value[1];s.push(r)}return s}),W=H(()=>{const s=F.value?2:1,r=new Date(K.value.year,K.value.month+b.value+-1),u=new Date(K.value.year,K.value.month+b.value+s);return{left:{month:r.getMonth(),year:r.getFullYear()},right:{month:u.getMonth(),year:u.getFullYear()}}}),ae=H(()=>{const l=new Date(a.value[0]).getMonth(),s=new Date(a.value[1]).getMonth(),r=(I=0)=>new Date(K.value.year,K.value.month+b.value+I),u=r().getMonth(),p=r(1).getMonth(),c=Ce(l,s),i=c.includes(u),M=c.includes(p),y=i?"lp-datepicker--has-interval":"",w=M?"lp-datepicker--has-interval":"",E=[{...Q(r().getFullYear(),r().getMonth()),index:0,intervalClass:y}];if(F.value){const I={...Q(r(1).getFullYear(),r(1).getMonth()),index:1,intervalClass:w};E.push(I)}return E}),fe=H(()=>D.isInModal?"fromModal":"fromDropdown"),oe=H(()=>{const l=D.size==="small",s=D.size==="medium",r=D.size==="large";return{isSmall:l,isMedium:s,isLarge:r}}),X=H(()=>{const l=new Date;return l.setHours(12,0,0,0),{time:l.getTime(),date:l}});Ze($,l=>{l&&(b.value=0)}),Ze(()=>[S.value,J.value],([l,s])=>{l.length===2&&s&&(L.value=0)});const K=H(()=>{if($.value){const u=$.value,p=new Date(u),c=p.getFullYear(),i=p.getMonth();return{year:c,month:i,time:u}}if(S.value.length===0&&!J.value)return{year:X.value.date.getFullYear(),month:X.value.date.getMonth(),time:X.value.time};if(S.value.length===2&&J.value){const u=new Date(S.value[1]).getFullYear(),p=new Date(S.value[1]).getMonth()-L.value,c=S.value[1];return{year:u,month:p,time:c}}const l=new Date(S.value[0]).getFullYear(),s=new Date(S.value[0]).getMonth(),r=S.value[0];return{year:l,month:s,time:r}}),Q=(l,s)=>{const r=Z(l,s),u=De(l,s),p=ie(r.length,u.length,l,s),c=[...u,...r,...p],i=7;return{days:r,month:s,next:p,previous:u,year:l,weeklyList:c.reduce((y,w,R)=>{const E=Math.floor(R/i);return y[E]=y[E]||[],y[E].push(w),y},[])}},Z=(l,s)=>{const r=32-new Date(l,s,32).getDate();return Array.from({length:r},(c,i)=>i+1).map((c,i)=>{const M=new Date(l,s,c,12,0,0).getTime(),y=we(l,s,c,"CURRENT"),w=i===0;return{class:"lp-datepicker__day",day:c,itemProps:y,month:new Date(l,s,c,12,0,0).getMonth(),year:new Date(l,s,c,12,0,0).getFullYear(),time:M,isFirst:w,type:"day"}})},De=(l,s)=>{const r=32-new Date(l,s-1,32).getDate(),u=new Date(l,s,1).getDay(),p=u>0?u-1:6,c=r-(p-1);return Array.from({length:p},(y,w)=>w+c).map(y=>{const w=new Date(l,s-1,y,12,0,0).getTime(),R=we(l,s-1,y,"PREVIOUS");return{class:"lp-datepicker__previous",day:y,itemProps:R,month:new Date(l,s-1,y).getMonth(),year:new Date(l,s-1,y).getFullYear(),time:w,type:"previous"}})},ie=(l,s,r,u)=>{const p=l+s,i=Math.ceil(p/7)*7-p;return Array.from({length:i},(w,R)=>R+1).map(w=>{const R=new Date(r,u+1,w,12,0,0).getTime(),E=we(r,u+1,w,"NEXT");return{class:"lp-datepicker__next",day:w,itemProps:E,month:new Date(R).getMonth(),year:new Date(R).getFullYear(),time:R,type:"next"}})},ge=(l,s,r,u)=>{if(te(l,s,r))return;h.value&&(a.value=[],h.value=!1);const p=new Date(l,s,r,12,0,0).getTime();k.value=p,$.value=0,F.value||(a.value=[p],o("selection",a.value),b.value=0),F.value&&(a.value.length<2?(L.value=u,a.value.push(p),A.value=[],a.value.sort(),J.value=!0,o("selection",a.value),b.value=0):(L.value=0,a.value=[p],o("selection",a.value)))},de=()=>{o("hide",{from:fe.value})},Ae=()=>{h.value=!0,o("reset");const l=T.value.querySelector('[data-time-to-focus="'+k.value+'"]');l==null||l.focus()},Te=l=>{if(F.value&&a.value.length===1){const s=G.value;if(l<a.value[0]){const r=l,u=a.value[0]-s;A.value=Array.from({length:(u-r)/s+1},(p,c)=>r+c*s)}if(l>a.value[0]){const r=a.value[0]+s,u=l;A.value=Array.from({length:(u-r)/s+1},(p,c)=>r+c*s)}}},be=async(l,s)=>{const r=l,u=s==="left"||s==="right",p=s==="left"||s==="up",c=u?G.value:G.value*7,i=p?-1*c:c,M=Fe(r,i);k.value=M,$.value=M,await et(),T.value.querySelector('[data-time-to-focus="'+k.value+'"]').focus()},Fe=(l,s)=>{let r=l;r+=s;const u=new Date(r);return u.setHours(12,0,0,0),u.getTime()},Ce=(l,s)=>{if(isNaN(s))return[];let r=[];if(l<=s)r=Array.from({length:s-l+1},(p,c)=>l+c);else{const p=Array.from({length:12-l},(i,M)=>l+M),c=Array.from({length:s+1},(i,M)=>M);r=p.concat(c)}return r},qe=()=>{T.value.querySelector(".lp-datepicker__arrow--right").focus()},Ve=async()=>{T.value.querySelector(".lp-datepicker__closer").focus()},Be=async()=>{T.value.querySelector('[data-time-to-focus="'+k.value+'"]').focus()},N=async()=>{T.value.querySelector(".lp-datepicker__arrow--left").focus()},we=(l,s,r,u)=>{let p="button",c="",i=" lp-datepicker__td ",M=!1,y=-1,w=null,R=!1;const E=new Date(l,s,r,12,0,0),I=E.getTime(),$e={weekday:"long",year:"numeric",month:"long",day:"numeric"},ue=E.toLocaleDateString("fr-FR",$e);let he=`${ue}.`;const Je=u==="NEXT"||u==="PREVIOUS";(te(l,s,r)||Je)&&(p="span",c+=" lp-datepicker--disabled ",M=!0,he=`Date non sélectionnable. ${ue}.`),a.value.includes(I)&&S.value.length!==0&&!h.value&&(p="button",c+=" lp-datepicker__selected ",y=-1,he=`Sélectionné, ${ue}.`,i+=" lp-datepicker--parent-selected "),I===X.value.time&&(c+=" lp-datepicker__today ",he=`Aujourd'hui, ${ue}.`,w="date"),I===X.value.time&&a.value.includes(I)&&(he=`Aujourd'hui, Sélectionné, ${ue}.`),(I===a.value[0]||I===a.value[1])&&!h.value&&(R=!0),k.value===I&&(y=0);const Ye=a.value[0]!==a.value[1];return a.value.length>0&&I===a.value[0]&&Ye&&!h.value&&(i+=" lp-datepicker--start "),a.value.length===2&&I===a.value[1]&&Ye&&!h.value&&(i+=" lp-datepicker--end "),a.value.length===2&&I>a.value[0]&&I<a.value[1]&&!h.value&&(c+=" lp-datepicker__interval ",i+=" lp-datepicker--parent-interval "),{tag:p,elementClass:c,parentClass:i,disabled:M,tabindex:y,ariaLabel:he,ariaCurrent:w,ariaSelected:R}};return mt(()=>{const l=ae.value.flatMap(s=>s.days).map(s=>s.time);l.includes(k.value)||(k.value=l[0])}),ot(async()=>{const l=T.value;o("opened",l.getBoundingClientRect()),Be(),D.isInModal&&await et(),l.querySelector('[data-time-to-focus="'+k.value+'"]').focus()}),a.value=O.value.sort(),k.value=K.value.time,(l,s)=>(x(),V("div",{ref_key:"datepickerBox",ref:Y,class:P(["lp-datepicker",[{"lp-datepicker--interval":q(F)},{"lp-datepicker--in-modal":l.isInModal},{"lp-datepicker--medium":oe.value.isMedium},{"lp-datepicker--large":oe.value.isLarge},{"lp-datepicker--frontof":l.isSmall}]]),onKeydown:j(de,["esc"])},[g("div",Mt,[g("button",{"aria-label":`${q(ye)[W.value.left.month]} ${W.value.left.year}`,class:"lp-datepicker__arrow lp-datepicker__arrow--left",onKeydown:j(ee(Ve,["exact","shift","prevent"]),["tab"]),onClick:s[0]||(s[0]=r=>b.value-=1)},[ce(He,{class:"lp-datepicker__arrow-icon",name:"arrow-left",type:"light"})],40,It),g("button",{ref_key:"datepickerArrowRight",ref:Ie,"aria-label":`${q(ye)[W.value.right.month]} ${W.value.right.year}`,class:"lp-datepicker__arrow lp-datepicker__arrow--right",onKeydown:j(ee(Be,["exact","prevent"]),["tab"]),onClick:s[1]||(s[1]=r=>b.value+=1)},[ce(He,{class:"lp-datepicker__arrow-icon",name:"arrow-right",type:"light"})],40,St)]),g("div",xt,[(x(!0),V(Ee,null,Pe(ae.value,(r,u)=>(x(),V("table",{key:`range-${u}`,class:P(["lp-datepicker__inside",r.intervalClass])},[g("caption",null,[g("div",Rt,[g("span",qt,le(q(ye)[r.month]),1),g("span",Bt,le(r.year),1)])]),g("thead",null,[g("tr",null,[(x(!0),V(Ee,null,Pe(q(Re),(p,c)=>(x(),V("th",{key:`weekdays-${p}-${c}`,scope:"col",class:"lp-datepicker__th"},[g("abbr",{title:p.name,class:"lp-datepicker__weekday"},le(p.abbr),9,Lt)]))),128))])]),g("tbody",null,[(x(!0),V(Ee,null,Pe(r.weeklyList,(p,c)=>(x(),V("tr",{key:`line-${u}-${c}`},[(x(!0),V(Ee,null,Pe(p,(i,M)=>(x(),V("td",{key:`item-${u}-${c}-${M}`,class:P([i.itemProps.parentClass,{"lp-datepicker__previous--hidden":i.type==="previous","lp-datepicker__next--hidden":i.type==="next"}]),"aria-current":i.itemProps.ariaCurrent},[(x(),Ke(it(i.itemProps.tag),{"aria-label":i.itemProps.ariaLabel,"aria-selected":i.itemProps.ariaSelected,"data-time-to-focus":i.time,tabindex:i.itemProps.tabindex,class:P([[i.itemProps.elementClass,{"lp-datepicker__first":i.isFirst&&!r.index}],"lp-datepicker__day"]),onMouseover:y=>Te(i.time),onClick:y=>ge(i.year,i.month,i.day,r.index),onKeydown:[j(ee(y=>ge(i.year,i.month,i.day,r.index),["prevent"]),["space"]),j(ee(y=>ge(i.year,i.month,i.day,r.index),["prevent"]),["enter"]),j(ee(qe,["exact","shift","prevent"]),["tab"]),j(ee(y=>be(i.time,"up"),["prevent"]),["up"]),j(ee(y=>be(i.time,"down"),["prevent"]),["down"]),j(ee(y=>be(i.time,"left"),["prevent"]),["left"]),j(ee(y=>be(i.time,"right"),["prevent"]),["right"])]},{default:Le(()=>[Oe(le(i.day),1)]),_:2},1064,["aria-label","aria-selected","data-time-to-focus","tabindex","class","onMouseover","onClick","onKeydown"]))],10,At))),128))]))),128))])],2))),128))]),g("div",{class:P(["lp-datepicker__actions",`lp-datepicker__actions--${l.withReset&&l.buttonLayout==="centered"?"btns-":""}${l.buttonLayout}`])},[l.withReset?(x(),Ke(at,{key:0,"aria-label":"réinitialiser le calendrier",type:"ghost",color:"darkgrey",size:"small",class:"lp-datepicker__reset",onClick:Ae},{default:Le(()=>s[2]||(s[2]=[Oe(" Réinitialiser ")])),_:1})):_e("",!0),ce(at,{"aria-label":"Fermer le calendrier",color:"default",type:l.withReset?"secondary":"ghost",size:"small",class:"lp-datepicker__closer",onKeydown:j(ee(N,["exact","prevent"]),["tab"]),onClick:de},{default:Le(()=>s[3]||(s[3]=[Oe(" Fermer ")])),_:1},8,["type","onKeydown"])],2)],34))}}),nt=dt(ct,[["__scopeId","data-v-df2a2013"]]);ct.__docgenInfo={exportName:"default",displayName:"DatepickerDays",description:"",tags:{},props:[{name:"startNumber",required:!1,type:{name:"number"}},{name:"endNumber",required:!1,type:{name:"number"}},{name:"isInModal",required:!1,type:{name:"boolean"}},{name:"isSmall",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.small"}},{name:"blackList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"buttonLayout",required:!1,type:{name:"union",elements:[{name:'"centered"'},{name:'"align-right"'}]},defaultValue:{func:!1,value:"'centered'"}},{name:"range",required:!1,type:{name:"Range"}},{name:"disabledDaysByWeek",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"holidays",required:!1,type:{name:"boolean"}},{name:"bankHolidays",required:!1,type:{name:"boolean"}},{name:"typage",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"interval"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"weekend",required:!1,type:{name:"boolean"}},{name:"whiteList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"withReset",required:!1,type:{name:"boolean"}}],events:[{name:"selection"},{name:"hide"},{name:"opened"},{name:"reset"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/Datepicker/Tools/DatepickerDays.vue"]};const lt=z=>/^(0?[1-9]|[12][0-9]|3[01])[/](0?[1-9]|1[012])[/]\d{4}$/.test(z),ze={xxs:320,xs:375,s:700,m:992,l:1280,xl:1440,xxl:1680,xxxl:3e3},Tt=["aria-describedby"],Ft=["aria-invalid","aria-required"],Ct=["aria-label","value","readonly","tabindex","disabled"],Vt=["aria-label","value","readonly","tabindex","disabled"],Yt=["aria-label","value","readonly","tabindex","disabled"],Nt=["aria-invalid","aria-required"],Et={class:"lp-datepicker__inputs"},Pt=["aria-label","value","readonly","tabindex","disabled"],zt=["aria-label","value","readonly","tabindex","disabled"],Ht=["aria-label","value","readonly","tabindex","disabled"],Jt=["aria-expanded","disabled"],Ot=["aria-expanded","disabled"],Wt={key:1,class:"lp-datepicker__dropdown"},Kt={class:"lp-datepicker__error-message-text"},Ut={key:2,class:"lp-datepicker__message"},pt=st({__name:"Datepicker",props:tt({dataError:{},disabled:{type:Boolean},end:{},size:{default:Ue.medium},start:{},blackList:{},buttonLayout:{},range:{},disabledDaysByWeek:{},holidays:{type:Boolean},bankHolidays:{type:Boolean},mandatory:{type:Boolean},typage:{default:"default"},inputReadonly:{type:Boolean},label:{},labelPosition:{default:$t.inside},message:{},weekend:{type:Boolean},whiteList:{},withReset:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:tt(["input","blur","change","selection","reset"],["update:modelValue"]),setup(z,{emit:Me}){var je;const D=yt(z,"modelValue"),o=z,Y=Me,Ie=wt,pe=bt(),B=(je=pe==null?void 0:pe.proxy)==null?void 0:je.$el,U=f(),ve=f(),se=f(),re=f(),{range:Se,blackList:xe,disabledDaysByWeek:me,holidays:ye,bankHolidays:Re,typage:F,weekend:te,whiteList:G}=rt(o),{nullTime:b,interval:L,inputData:a}=ut(Se,xe,me,ye,Re,F,te,G),A=f(b.value),h=f(b.value),k=f(!1),$=f(!1),J=f({left:"0px",right:"inherit",transform:"translateX(0)",isSmall:!1}),T=f({maxHeight:"auto"}),S=H(()=>W.value?"fieldset":"div"),O=H(()=>o.typage==="default"),W=H(()=>!O.value&&o.labelPosition==="outside"),ae=H(()=>O.value&&o.label||o.start.label),fe=f("lp-datepicker__opened--bottom"),oe=f(!1),X=f(""),K=f(null),Q=f(!1),Z=e=>{Q.value=!1;const t=e.target,n=t.value,d=t.dataset.datepickerName||"",m=t.selectionStart,v=n.replace(/\D/g,"");if(t.value=v,m!==null){const _=n.length-v.length;t.setSelectionRange(m-_,m-_)}we(v,d,"start"),L.value&&we(v,d,"end"),(/^\d*$/.test(n)||!v)&&Y("input",e)},De=H(()=>({colorBorderTop:"supernova",mobileFull:!1,size:"default",showTitle:!1,title:O.value?"Choisir la date":"Choisir les dates"})),ie=e=>{const t=e.height,n=U.value;if(!n)return;const d=n.getBoundingClientRect(),m=d.top,v=window.innerHeight-d.bottom;let _="bottom";v<t+16&&m>t+16&&(_="top"),fe.value=`lp-datepicker__opened--${_}`,d.top>=0&&d.bottom<=window.innerHeight&&d.left>=0&&d.right<=window.innerWidth||n.scrollIntoView({behavior:"smooth",block:"center"})},ge=()=>{var e,t;return(e=o.dataError)!=null&&e.active&&((t=o.dataError)!=null&&t.message)?X.value:void 0},de=()=>{const e=K.value;X.value=e&&e.id?e.id:"error-message"},Ae=_t({tablet_landscape:ze.m,tablet:ze.s}),Te=e=>{const t=Ae.isGreaterOrEqual("tablet_landscape"),n=Ae.isGreaterOrEqual("tablet"),d=t,m=L.value&&d?758:ze.xs,v=m===ze.xs,_=(B==null?void 0:B.getBoundingClientRect().left)+m>window.innerWidth,ne=_?"inherit":"0px",ke=_?"0px":"inherit";J.value={left:n?ne:"50%",transform:n?"":"translateX(-50%)",right:ke,isSmall:v},e==="modale"?($.value=!$.value,k.value=!1):(k.value=!k.value,$.value=!1),Q.value&&be()},be=()=>{A.value=b.value,h.value=b.value},Fe=()=>{Q.value=!0,Object.keys(a).forEach(d=>{d.endsWith("Input")&&(a[d]="")});const e=A.value!==b.value,t=h.value!==b.value,n=[...e?[A.value]:[],...t?[h.value]:[]];Y("reset",n),e&&t&&(h.value=b.value)},Ce=e=>{var d,m;let t="dropdown";e.from==="fromDropdown"&&(k.value=!k.value),e.from==="fromModal"&&(t="modal",$.value=!$.value),(d=re.value)==null||d.focus(),(m=se.value)==null||m.focus();const n=B==null?void 0:B.querySelector(".lp-datepicker__toggle--"+t);n==null||n.focus()},qe=()=>{if(k.value){k.value=!1;const e=B==null?void 0:B.querySelector(".lp-datepicker__toggle--dropdown");e==null||e.focus()}},Ve=()=>{$.value&&($.value=!1);const e=B==null?void 0:B.querySelector(".lp-datepicker__toggle--modal");e==null||e.focus()},Be=e=>{const t={day:`${e}DayInput`,month:`${e}MonthInput`,year:`${e}YearInput`},n=a[t.day];if(n){const v=parseInt(n);a[t.day]=v===0?"01":v.toString().padStart(2,"0")}const d=a[t.month];["0","1"].includes(d)&&(a[t.month]="01");const m=a[t.year];if(m){const v=parseInt(m);v<100?a[t.year]=(v+2e3).toString():a[t.year]=v.toString().padStart(4,"0")}},N=(e,t)=>{if(o.inputReadonly){oe.value=!1;return}if(oe.value=!!e,k.value=!1,e===!1&&t==="start"){if(Be(t),!a.startDayInput||!a.startMonthInput||!a.startYearInput)return;const n=`${a.startDayInput}/${a.startMonthInput}/${a.startYearInput}`;Y("input",n),Y("blur"),D.value&&(D.value[0]=`${n}`)}if(e===!1&&t==="end"){if(Be(t),!a.endDayInput||!a.endMonthInput||!a.endYearInput)return;const n=`${a.endDayInput}/${a.endMonthInput}/${a.endYearInput}`;Y("input",n),Y("blur"),D.value&&(D.value[1]=`${n}`)}},we=(e,t,n)=>{if(t===`${n}-day`){const d=p(e,a[`${n}MonthInput`],a[`${n}YearInput`]);a[`${n}DayInput`]=d,a[`${n}Day`]=d,a[`${n}DayInput`]==="0"&&(a[`${n}Day`]="01")}if(t===`${n}-month`){const d=c(e,n,a[`${n}DayInput`],a[`${n}YearInput`]);a[`${n}MonthInput`]=d,a[`${n}Month`]=d,a[`${n}MonthInput`]==="0"&&(a[`${n}Month`]="01")}if(t===`${n}-year`){const d=i(e,n,a[`${n}DayInput`],a[`${n}MonthInput`]);a[`${n}YearInput`]=e,a[`${n}Year`]=d}l(n)},l=e=>{a[`${e}NewTime`]=ue(a[`${e}Year`],a[`${e}Month`],a[`${e}Day`]);const t=s("start"),n=s("end");e==="start"?A.value=t?b.value:a.startNewTime:e==="end"&&(h.value=n?b.value:a.endNewTime)},s=e=>a[`${e}DayInput`]===""||a[`${e}MonthInput`]===""||a[`${e}YearInput`]==="",r=(e,t,n)=>t?`0${e}`:n?`0${e[0]}`:e.length===2&&e==="00"?"01":e,u=(e,t,n)=>{const d=parseInt(e),m=parseInt(t);let v=parseInt(n);v=v<100?v+2e3:v;const _=new Date(v,m,0).getDate();return{dayValue:d,monthValue:m,yearValue:v,daysInMonth:_}},p=(e,t,n)=>{const{dayValue:d,daysInMonth:m}=u(e,t,n),v=Math.floor(m/10)||3,_=e.length===1&&d>v,ne=d>m||(!t||!n)&&d>31;return r(e,_,ne)},c=(e,t,n,d)=>{const{monthValue:m,dayValue:v,daysInMonth:_}=u(n,e,d),ne=e.length===1&&m>1,ke=m>12,Ne=r(e,ne,ke);return M(v,_,t),Ne},i=(e,t,n,d)=>{const{dayValue:m,daysInMonth:v,yearValue:_}=u(n,d,e);return M(m,v,t),_},M=(e,t,n)=>{if(e>t){const m=n==="start"?"startDayInput":"endDayInput",v=n==="start"?"startDay":"endDay";a[m]=t.toString(),a[v]=t.toString()}},y=e=>{var n,d,m,v;Q.value&&(be(),Q.value=!1);const t=new Date(e[0]);if(a.startDay=w(t.getDate()),a.startMonth=w(t.getMonth()+1),a.startYear=t.getFullYear(),$e("start"),A.value=e[0],L.value||(D.value=[I(String(e[0]))],Y("selection",e[0]),qe(),Ve(),(n=re.value)==null||n.focus(),(d=se.value)==null||d.focus()),L.value&&e.length===1&&(D.value=[I(String(e[0]))],Y("selection",e[0])),L.value&&e.length===2){const _=new Date(e[1]);a.endDay=w(_.getDate()),a.endMonth=w(_.getMonth()+1),a.endYear=_.getFullYear(),$e("end"),h.value=e[1],D.value=[I(String(e[0])),I(String(e[1]))],Y("selection",e),qe(),Ve(),(m=re.value)==null||m.focus(),(v=se.value)==null||v.focus()}},w=e=>e.toLocaleString("fr-FR",{minimumIntegerDigits:2}),R=e=>e.split("/"),E=e=>{const t=R(e),n=t[0],d=t[1],m=parseInt(t[2]);return ue(m,d,n)},I=e=>{const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),d=String(t.getMonth()+1).padStart(2,"0"),m=t.getFullYear();return`${n}/${d}/${m}`},$e=e=>{a[`${e}DayInput`]=a[`${e}Day`],a[`${e}MonthInput`]=a[`${e}Month`],a[`${e}YearInput`]=""+a[`${e}Year`]},ue=(e,t,n)=>new Date(e,parseInt(t)-1,parseInt(n),12,0,0).getTime(),he=e=>{if(!e.date||!lt(e.date))return;const t=e.date,n=R(t);a.startDay=n[0],a.startMonth=n[1],a.startYear=parseInt(n[2]),$e("start"),A.value=E(t)},Je=e=>{if(!e||!e.date||!lt(e.date))return;const t=e.date,n=R(t);a.endDay=n[0],a.endMonth=n[1],a.endYear=parseInt(n[2]),$e("end"),h.value=E(t)},Ye=()=>{he(o.start),L.value&&Je(o.end)};return Dt(U,()=>qe()),A.value=b.value,h.value=b.value,Ye(),ft(()=>{de()}),ot(()=>{de()}),(e,t)=>{var n;return x(),Ke(it(S.value),{class:P(["lp-datepicker__container",[{"lp-datepicker--error":(n=e.dataError)==null?void 0:n.active},{"lp-datepicker__container--outside-default":O.value&&o.labelPosition==="outside"}]])},{default:Le(()=>{var d,m,v,_,ne,ke,Ne,Ge,Xe,Qe;return[W.value&&o.label?(x(),V("legend",{key:0,class:P([{"lp-datepicker__label--outside":W.value}])},le(o.label),3)):_e("",!0),g("div",{ref_key:"datepicker",ref:U,class:P(["lp-datepicker__wrapper",[`lp-datepicker__wrapper--${o.size}`,{"lp-datepicker__wrapper--outside":O.value&&o.labelPosition==="outside"},{"lp-datepicker__wrapper--focused":oe.value},{"lp-datepicker__wrapper--disabled":o.disabled},{"lp-datepicker__wrapper--interval":q(L)},{"lp-datepicker__wrapper--readonly":o.inputReadonly},{"lp-datepicker__wrapper--empty":q(a).startDayInput===""&&q(a).startMonthInput===""&&q(a).startYearInput===null},{"lp-datepicker--error":(d=e.dataError)==null?void 0:d.active}]]),"aria-describedby":ge()},[g("fieldset",{class:P(["lp-datepicker__date",{[`lp-datepicker__default-${o.labelPosition}`]:O.value}]),"aria-invalid":((m=o.dataError)==null?void 0:m.active)??!1,"aria-required":o.mandatory},[g("legend",{class:P(["lp-datepicker__label",[{"visually-hidden":W.value,"lp-datepicker__label--mandatory":o.mandatory,"lp-datepicker__label--outside-default":o.labelPosition==="outside"},O.value?`lp-datepicker__label--${o.labelPosition}`:"lp-datepicker__label--inside"]])},le(ae.value),3),g("div",{class:P(["lp-datepicker__inputs",{[`lp-datepicker__inputs--${o.labelPosition}`]:O.value}])},[g("input",{id:"datepicker-start",type:"text",class:"lp-datepicker__input lp-datepicker__input--day",maxlength:"2","aria-label":`${ae.value}, Jour, Format attendu : JJ (exemple: 12)`,value:q(a).startDayInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"JJ","data-datepicker-name":"start-day",onInput:Z,onFocus:t[0]||(t[0]=C=>N(!0,"start")),onBlur:t[1]||(t[1]=C=>N(!1,"start"))},null,40,Ct),t[15]||(t[15]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--month",maxlength:"2","aria-label":`${ae.value}, Mois, Format attendu : MM (exemple : 08)`,value:q(a).startMonthInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"MM","data-datepicker-name":"start-month",onInput:Z,onFocus:t[2]||(t[2]=C=>N(!0,"start")),onBlur:t[3]||(t[3]=C=>N(!1,"start"))},null,40,Vt),t[16]||(t[16]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--year",maxlength:"4","aria-label":`${ae.value}, Année, Format attendu : AAAA (exemple : 2018)`,value:q(a).startYearInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"AAAA","data-datepicker-name":"start-year",onInput:Z,onFocus:t[4]||(t[4]=C=>N(!0,"start")),onBlur:t[5]||(t[5]=C=>N(!1,"start"))},null,40,Yt)],2)],10,Ft),q(L)?(x(),V("fieldset",{key:0,class:"lp-datepicker__date lp-datepicker__label--inside","aria-invalid":((v=o.dataError)==null?void 0:v.active)??!1,"aria-required":e.mandatory},[e.end?(x(),V("legend",{key:0,class:P(["lp-datepicker__label",{"lp-datepicker__label--mandatory":e.mandatory,"visually-hidden":W.value}])},le(e.end.label),3)):_e("",!0),g("div",Et,[g("input",{id:"datepicker-end",type:"text",class:"lp-datepicker__input lp-datepicker__input--day",maxlength:"2","aria-label":`${(_=e.end)==null?void 0:_.label}, Jour, Format attendu : JJ (exemple: 12)`,value:q(a).endDayInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"JJ","data-datepicker-name":"end-day",onInput:Z,onFocus:t[6]||(t[6]=C=>N(!0,"end")),onBlur:t[7]||(t[7]=C=>N(!1,"end"))},null,40,Pt),t[17]||(t[17]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--month",maxlength:"2","aria-label":`${(ne=e.end)==null?void 0:ne.label}, Mois, Format attendu : MM (exemple: 08)`,value:q(a).endMonthInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"MM","data-datepicker-name":"end-month",onInput:Z,onFocus:t[8]||(t[8]=C=>N(!0,"end")),onBlur:t[9]||(t[9]=C=>N(!1,"end"))},null,40,zt),t[18]||(t[18]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--year",maxlength:"4","aria-label":`${(ke=e.end)==null?void 0:ke.label}, Année, Format attendu : AAAA (exemple: 2018)`,value:q(a).endYearInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"AAAA","data-datepicker-name":"end-year",onInput:Z,onFocus:t[10]||(t[10]=C=>N(!0,"end")),onBlur:t[11]||(t[11]=C=>N(!1,"end"))},null,40,Ht)])],8,Nt)):_e("",!0),g("button",{ref_key:"datepickerButtonDropdown",ref:se,"aria-expanded":k.value,"aria-label":"Choisir la date dans un calendrier",class:P([[`lp-datepicker__toggle--${e.size}`,{"lp-datepicker__toggle--readonly":e.inputReadonly}],"lp-datepicker__toggle lp-datepicker__toggle--dropdown"]),disabled:o.disabled,onClick:t[12]||(t[12]=C=>Te("dropdown"))},[ce(He,{name:"editing-calendar",type:"light"})],10,Jt),g("button",{ref_key:"datepickerButtonModal",ref:re,"aria-expanded":$.value,"aria-label":"Choisir la date dans un calendrier",class:P([[`lp-datepicker__toggle--${e.size}`,{"lp-datepicker__toggle--readonly":e.inputReadonly}],"lp-datepicker__toggle lp-datepicker__toggle--modal"]),disabled:o.disabled,onClick:t[13]||(t[13]=C=>Te("modale"))},[ce(He,{name:"editing-calendar",type:"light"})],10,Ot),ce(ht,We({modelValue:$.value,"onUpdate:modelValue":t[14]||(t[14]=C=>$.value=C)},De.value,{class:"lp-datepicker__modal"}),{content:Le(()=>[ce(nt,We({ref_key:"datepickerDropdown",ref:ve,class:["lp-datepicker__opened",fe.value],"is-in-modal":!0,"is-small":J.value.isSmall,style:[J.value,T.value],"start-number":A.value,"end-number":h.value},e.$props,{onOpened:ie,onSelection:y,onHide:Ce,onReset:Fe}),null,16,["is-small","class","style","start-number","end-number"])]),_:1},16,["modelValue"]),k.value?(x(),V("div",Wt,[ce(nt,We({ref_key:"datepickerDropdown",ref:ve,class:["lp-datepicker__opened",fe.value],style:[J.value,T.value],"start-number":A.value,"end-number":h.value},o,{onOpened:ie,onSelection:y,onHide:Ce,onReset:Fe}),null,16,["class","style","start-number","end-number"])])):_e("",!0)],10,Tt),(Ne=e.dataError)!=null&&Ne.active&&((Ge=e.dataError)!=null&&Ge.message)?gt((x(),V("p",{key:1,ref_key:"errorMessage",ref:K,class:"lp-datepicker__error-message","aria-live":"polite"},[g("span",Kt,le((Xe=e.dataError)==null?void 0:Xe.message),1)])),[[q(Ie),"lp-datepicker-error-message--"]]):_e("",!0),e.message&&!((Qe=e.dataError)!=null&&Qe.active)?(x(),V("p",Ut,le(e.message),1)):_e("",!0)]}),_:1},8,["class"])}}}),na=dt(pt,[["__scopeId","data-v-25d878ba"]]);pt.__docgenInfo={exportName:"default",displayName:"Datepicker",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"end",required:!1,type:{name:"DateType"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.medium"}},{name:"start",required:!0,type:{name:"DateType"}},{name:"blackList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"buttonLayout",required:!1,type:{name:"union",elements:[{name:'"centered"'},{name:'"align-right"'}]}},{name:"range",required:!1,type:{name:"Range"}},{name:"disabledDaysByWeek",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"holidays",required:!1,type:{name:"boolean"}},{name:"bankHolidays",required:!1,type:{name:"boolean"}},{name:"mandatory",required:!1,type:{name:"boolean"}},{name:"typage",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"interval"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"inputReadonly",required:!1,type:{name:"boolean"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"message",required:!1,type:{name:"string"}},{name:"weekend",required:!1,type:{name:"boolean"}},{name:"whiteList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"withReset",required:!1,type:{name:"boolean"}}],events:[{name:"input"},{name:"blur"},{name:"change"},{name:"selection"},{name:"reset"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/Datepicker/Datepicker.vue"]};export{na as S,Ue as a,lt as i};
