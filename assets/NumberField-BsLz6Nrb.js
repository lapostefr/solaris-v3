import{d as w,m as C,a as Q,r as u,w as y,k as A,l as P,o as d,e as t,t as n,y as o,v as i,G as g,M as T,B as m,u as U,H as j}from"./vue.esm-bundler-BIhSTzsT.js";import{g as G}from"./generateId-CVaf2GGW.js";const z=["for"],H=["aria-describedby"],K=["disabled"],S=["id","min","max","disabled","aria-invalid"],$=["disabled"],J={key:0,class:"numberField__text"},L={key:2,class:"numberField__message"},O=w({__name:"NumberField",props:C({value:{},dataError:{},disabled:{type:Boolean},error:{type:Boolean},id:{},label:{default:"Quantité"},labelPosition:{default:"visually-hidden"},max:{},message:{},min:{default:1},small:{type:Boolean},type:{default:"quiet"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(b){const a=b,F=Q(b,"modelValue"),_=G,r=u(),v=u(""),f=u(null),h=e=>e>a.max?a.max:e<a.min?a.min:e;y(()=>a.value,e=>{r.value=h(e)},{immediate:!0}),y(r,e=>{F.value=e});const q=()=>{var e,l,s;return a.dataError&&((e=a.dataError)==null?void 0:e.active)&&((s=(l=a.dataError)==null?void 0:l.message)==null?void 0:s.length)},E=e=>{const l=(e==null?void 0:e.target).value;r.value=l?parseInt(l):a.min},V=()=>{a.disabled||r.value===a.max||r.value++},k=()=>{a.disabled||r.value===a.min||r.value--},M=e=>["e","E","+","-","."].includes(e.key)?(e.preventDefault(),!1):!0,N=()=>{!r.value||r.value<a.min?r.value=a.min:r.value>a.max&&(r.value=a.max)},B=()=>{var e,l;return(e=a.dataError)!=null&&e.active&&((l=a.dataError)!=null&&l.message)?v.value:void 0},p=()=>{const e=f.value;v.value=e&&e.id?e.id:"error-message"},D=()=>{var e;return(e=a.dataError)!=null&&e.active?!0:void 0};return A(()=>{p()}),P(()=>{r.value=a.min,p()}),(e,l)=>{var s,c;return d(),t("div",{class:i(["numberField",[`numberField--${e.type}`,{"numberField--disabled":e.disabled},{"numberField--small":e.small},{"numberField--max":r.value===e.max}]])},[n("label",{class:i(["numberField__label numberField__label--outside",[{"numberField--disabled":e.disabled,"visually-hidden":e.labelPosition==="visually-hidden"}]]),for:e.id||void 0},o(e.label||"Quantité"),11,z),n("div",{class:i(["numberField__inner",[{"numberField--error":e.error||e.dataError&&e.dataError.active}]]),"aria-describedby":B()},[n("button",{"aria-label":"Diminuer la quantité de un",class:i(["numberField__btn--less",{numberField__btn:!0,"numberField__btn--disabled":r.value<=e.min}]),disabled:r.value<=e.min||e.disabled,onClick:k}," - ",10,K),g(n("input",{id:e.id||void 0,ref:"input","onUpdate:modelValue":l[0]||(l[0]=I=>r.value=I),class:"numberField__input",type:"number",min:e.min,max:e.max,disabled:e.disabled,maxlength:4,"aria-invalid":D(),onKeydown:M,onInput:E,onBlur:N},null,40,S),[[T,r.value,void 0,{number:!0}]]),n("button",{"aria-label":"Augmenter la quantité de un",class:i(["numberField__btn--more",{numberField__btn:!0,"numberField__btn--disabled":r.value>=e.max}]),disabled:r.value===e.max||e.disabled,onClick:V}," + ",10,$)],10,H),r.value===e.max&&!e.disabled?(d(),t("span",J," Quantité max. ")):m("",!0),q()?g((d(),t("p",{key:1,ref_key:"errorMessage",ref:f,class:"numberField__error-message","aria-live":"polite"},[j(o((s=e.dataError)==null?void 0:s.message),1)])),[[U(_),"numberField-error-message--"]]):m("",!0),e.message&&!((c=e.dataError)!=null&&c.active)?(d(),t("p",L,o(e.message),1)):m("",!0)],2)}}});O.__docgenInfo={exportName:"default",displayName:"NumberField",description:"",tags:{},props:[{name:"value",required:!1,type:{name:"number"}},{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"error",required:!1,type:{name:"boolean"}},{name:"id",required:!1,type:{name:"string"}},{name:"label",required:!0,type:{name:"string"},defaultValue:{func:!1,value:"'Quantité'"}},{name:"labelPosition",required:!1,type:{name:"union",elements:[{name:'"outside"'},{name:'"visually-hidden"'}]},defaultValue:{func:!1,value:"'visually-hidden'"}},{name:"max",required:!0,type:{name:"number"}},{name:"message",required:!1,type:{name:"string"}},{name:"min",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"1"}},{name:"small",required:!1,type:{name:"boolean"}},{name:"type",required:!1,type:{name:"union",elements:[{name:'"emphasis"'},{name:'"default"'},{name:'"quiet"'},{name:'"ghost"'}]},defaultValue:{func:!1,value:"'quiet'"}}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/NumberField/NumberField.vue"]};export{O as _};
