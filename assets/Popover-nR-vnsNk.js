import{S as b}from"./Button-CBxU2lEn.js";import{b as S}from"./bodyNoScroll-CKdIPrAc.js";import{f as k}from"./focusTrap-BnjFpEHS.js";import{u as q}from"./index-Dq8tj7-6.js";import{d as L,c as T,w as C,o as $,a as E,V as O,U as v,f as s,e as y,t as u,G as P,g as _,v as N,y as p,A as i,B as V,H as g,C as d,h as z,T as D}from"./vue.esm-bundler-S_SeJiWS.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const h={mounted(e,o){o.value===!0&&(e.interactionType=null,e.keydownListener=()=>{e.interactionType="keyboard"},e.mousedownListener=()=>{e.interactionType="click"},e.focusOutHandler=r=>{const n=r.relatedTarget;n&&e.interactionType==="keyboard"&&!e.contains(n)&&e!==n&&!e.contains(n==null?void 0:n.parentElement)&&o.instance.$emit("changed"),e.interactionType=null},e.addEventListener("focusout",e.focusOutHandler),document.addEventListener("keydown",e.keydownListener),document.addEventListener("mousedown",e.mousedownListener))},unmounted(e){e.focusOutHandler&&(e.removeEventListener("focusout",e.focusOutHandler),document.removeEventListener("keydown",e.keydownListener),document.removeEventListener("mousedown",e.mousedownListener))}},X=Object.freeze(Object.defineProperty({__proto__:null,default:h},Symbol.toStringTag,{value:"Module"})),B=L({components:{SolarisButton:b},directives:{bodyNoScroll:S,closeOnFocusOut:h,focusTrap:k},model:{prop:"showPopover",event:"changed"},props:{cancelButton:{required:!1,type:String},content:{required:!1,type:String},direction:{required:!1,default:"Right Bottom",type:String},focusTrap:{required:!1,default:!1,type:Boolean},title:{required:!1,type:String},type:{required:!1,type:String},validateButton:{required:!1,type:String},showPopover:{required:!1,type:Boolean}},emits:["changed","cancel","validation"],setup(e,o){let r=!1;const n=T({get(){return e.showPopover},set(t){o.emit("changed",t)}}),l=t=>{t.key==="Escape"&&a()};C(n,t=>{typeof window>"u"||(t?document.addEventListener("keydown",l):document.removeEventListener("keydown",l))},{immediate:!0});const w=()=>{const t=e.direction||"Right Bottom";return`${t.substring(0,1).toLowerCase()}${t.substring(1)}`.replace(/\s+/g,"")},a=()=>{o.emit("changed",!1),r=!1},m=()=>{a(),o.emit("cancel")},f=()=>{n.value=!1,r=!1,o.emit("validation")},c=()=>{const t=q();n.value&&!r&&(r=!0,k.initFocus(t.value))};return $(()=>{c()}),E(()=>{c()}),{close:a,escapeClose:l,getDirection:w,cancel:m,validation:f,show:n}}}),j=["aria-modal","open"],F={id:"popover_title",class:"popover__title"},I={id:"popover_content",class:"popover__content"},R={class:"popover__actions"},U={key:1,class:"popover__container popover__content--random"};function M(e,o,r,n,l,w){const a=O("SolarisButton"),m=v("body-no-scroll"),f=v("focus-trap"),c=v("close-on-focus-out");return s(),y(D,{name:"popover"},{default:u(()=>[e.show?P((s(),_("div",{key:0,class:N(["popover",[`popover--${e.getDirection()}`]])},[p("div",{class:"popover__background",onClick:o[0]||(o[0]=t=>e.close())}),e.type!=="random"?(s(),_("dialog",{key:0,id:"popover_container",class:"popover__container popover__content--confirm","aria-labelledby":"popover_title","aria-describedby":"popover_content","aria-modal":e.show,open:e.show,role:"dialog"},[p("p",F,i(e.title),1),p("div",I,i(e.content),1),p("div",R,[V(a,{type:"secondary",size:"regular",color:"darkgrey",class:"popover__cancel",onClick:o[1]||(o[1]=t=>e.cancel())},{default:u(()=>[g(i(e.cancelButton),1)]),_:1}),e.type==="transactional"?(s(),y(a,{key:0,type:"primary",size:"regular",class:"popover__cancel",onClick:o[2]||(o[2]=t=>e.validation())},{default:u(()=>[g(i(e.validateButton),1)]),_:1})):d("",!0),e.type==="danger"?(s(),y(a,{key:1,type:"primary",size:"regular",color:"danger",class:"popover__cancel",onClick:o[3]||(o[3]=t=>e.validation())},{default:u(()=>[g(i(e.validateButton),1)]),_:1})):d("",!0)])],8,j)):d("",!0),e.type==="random"?(s(),_("div",U,[z(e.$slots,"default",{},void 0,!0)])):d("",!0)],2)),[[m,e.show],[f,e.focusTrap],[c,!0]]):d("",!0)]),_:3})}const Y=H(B,[["render",M],["__scopeId","data-v-ad58f7b6"]]);B.__docgenInfo={exportName:"default",displayName:"Popover",description:"",tags:{},props:[{name:"cancelButton",type:{name:"string"},required:!1},{name:"content",type:{name:"string"},required:!1},{name:"direction",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"'Right Bottom'"}},{name:"focusTrap",type:{name:"boolean"},required:!1,defaultValue:{func:!1,value:"false"}},{name:"title",type:{name:"string"},required:!1},{name:"type",type:{name:"string"},required:!1},{name:"validateButton",type:{name:"string"},required:!1},{name:"v-model",type:{name:"boolean"},required:!1}],events:[{name:"changed"},{name:"cancel"},{name:"validation"}],slots:[{name:"default"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/Popover/Popover.vue"]};export{Y as S,X as _};
