import{r as f,R as vt,d as st,a2 as rt,c as H,w as Ze,a8 as mt,l as ot,a7 as et,e as Y,t as g,u as B,J as U,I as ee,z as ce,F as Ee,x as Pe,b as Ke,A as Le,B as _e,v as P,o as R,y as ne,H as Oe,E as it,m as tt,a as yt,k as ft,C as We,G as gt,q as bt}from"./vue.esm-bundler-DbnnIJWB.js";import{S as He}from"./Icon-BFYv-dj3.js";import{S as ht}from"./Modal-Boej8-ka.js";import{S as at}from"./Button-jFHmCyiG.js";import{u as kt,a as _t,o as Dt}from"./index-7Yv3mQsR.js";import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as wt}from"./generateId-CVaf2GGW.js";import{L as $t}from"./types-DKXD8uiR.js";var Ue=(z=>(z.small="small",z.medium="medium",z.large="large",z))(Ue||{});function ut(z,Me,_,o,V,Ie,pe,S){const j=f(-1e15),ve=f(!1),le=vt({startDay:"",startMonth:"",startYear:j.value,endDay:"",endMonth:"",endYear:j.value,startDayInput:"",startMonthInput:"",startYearInput:"",endDayInput:"",endMonthInput:"",endYearInput:"",startNewTime:j.value,endNewTime:j.value}),se=f([{abbr:"Lun",name:"Lundi"},{abbr:"Mar",name:"Mardi"},{abbr:"Mer",name:"Mercredi"},{abbr:"Jeu",name:"Jeudi"},{abbr:"Ven",name:"Vendredi"},{abbr:"Sam",name:"Samedi"},{abbr:"Dim",name:"Dimanche"}]),Se=f(["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]),xe=f(864e5),me=f([{d:1,m:1},{d:1,m:5},{d:8,m:5},{d:14,m:7},{d:15,m:8},{d:1,m:11},{d:11,m:11},{d:25,m:12}]),ye=f([17152488e5,17485128e5,17787528e5,18095976e5,18428616e5,17119656e5,17452296e5,17754696e5,18063144e5,18395784e5,17161992e5,17494632e5,17797032e5,1810548e6,1843812e6]),Re=(F,te,G,b)=>{let L=pe.value,a=_.value,A=V.value!==void 0?V.value:o.value,h=z.value,k=Me.value,w=S.value;b&&(L=b.weekend.value,a=b.disabledDaysByWeek.value,A=b.bankHolidays.value?b.bankHolidays.value:b.holidays.value,k=b.blackList.value,h=b.range.value,w=b.whiteList.value);let J=!1;const T=new Date(F,te,G).getTime(),x=new Date(T).getDay(),O=!!(L&&[0,6].includes(x)),W=!!(a&&a.includes(x));if(A){const De=me.value.filter(ie=>ie.d===G&&ie.m-1===te),oe=new Date(F,te,G,12,0,0,0).getTime(),ge=ye.value.includes(oe);J=De.length>0||ge}const ae=!!(k&&k.length>0&&k.includes(T)),fe=!!(w&&w.length>0&&!w.includes(T)),re=!!(h&&h.min&&T<h.min),X=!!(h&&h.max&&T>h.max),K=32-new Date(F,te,32).getDate(),Q=Array.from({length:K},(De,oe)=>oe+1),Z=G>Q.length;return O||W||J||ae||fe||re||X||Z};return ve.value=Ie.value==="interval",{nullTime:j,interval:ve,inputData:le,weekdays:se,allMonths:Se,oneDay:xe,holidaysList:me,isDisabled:Re}}const Mt={class:"lp-datepicker__direction"},It=["aria-label","onKeydown"],St=["aria-label","onKeydown"],xt={class:"lp-datepicker__content"},Rt={class:"lp-datepicker__head"},qt={class:"lp-datepicker__head-month"},Bt={class:"lp-datepicker__head-year"},Lt=["title"],At=["aria-current"],ct=st({__name:"DatepickerDays",props:{startNumber:{},endNumber:{},isInModal:{type:Boolean},isSmall:{type:Boolean,default:!0},size:{default:Ue.small},blackList:{},buttonLayout:{default:"centered"},range:{},disabledDaysByWeek:{},holidays:{type:Boolean},bankHolidays:{type:Boolean},typage:{default:"default"},weekend:{type:Boolean},whiteList:{},withReset:{type:Boolean}},emits:["selection","hide","opened","reset"],setup(z,{emit:Me}){const _=z,o=Me,V=f(null),Ie=f(null),{range:pe,blackList:S,disabledDaysByWeek:j,holidays:ve,bankHolidays:le,typage:se,weekend:Se,whiteList:xe}=rt(_),{nullTime:me,allMonths:ye,weekdays:Re,interval:F,isDisabled:te,oneDay:G}=ut(pe,S,j,ve,le,se,Se,xe),b=f(0),L=f(0),a=f([]),A=f([]),h=f(!1),k=f(0),w=f(0),J=f(!1),T=kt(),x=H(()=>{const l=!_.startNumber||_.startNumber===me.value,s=!_.endNumber||_.endNumber===me.value;if(!F.value&&l||F.value&&l&&s)return[];const r=[];return l||r.push(_.startNumber),s||r.push(_.endNumber),r}),O=H(()=>{if(x.value.length===0)return[];const s=[x.value[0]];if(F.value&&x.value.length>1){const r=x.value[1];s.push(r)}return s}),W=H(()=>{const s=F.value?2:1,r=new Date(K.value.year,K.value.month+b.value+-1),d=new Date(K.value.year,K.value.month+b.value+s);return{left:{month:r.getMonth(),year:r.getFullYear()},right:{month:d.getMonth(),year:d.getFullYear()}}}),ae=H(()=>{const l=new Date(a.value[0]).getMonth(),s=new Date(a.value[1]).getMonth(),r=(M=0)=>new Date(K.value.year,K.value.month+b.value+M),d=r().getMonth(),p=r(1).getMonth(),c=Ce(l,s),i=c.includes(d),$=c.includes(p),y=i?"lp-datepicker--has-interval":"",D=$?"lp-datepicker--has-interval":"",E=[{...Q(r().getFullYear(),r().getMonth()),index:0,intervalClass:y}];if(F.value){const M={...Q(r(1).getFullYear(),r(1).getMonth()),index:1,intervalClass:D};E.push(M)}return E}),fe=H(()=>_.isInModal?"fromModal":"fromDropdown"),re=H(()=>{const l=_.size==="small",s=_.size==="medium",r=_.size==="large";return{isSmall:l,isMedium:s,isLarge:r}}),X=H(()=>{const l=new Date;return l.setHours(12,0,0,0),{time:l.getTime(),date:l}});Ze(w,l=>{l&&(b.value=0)}),Ze(()=>[x.value,J.value],([l,s])=>{l.length===2&&s&&(L.value=0)});const K=H(()=>{if(w.value){const d=w.value,p=new Date(d),c=p.getFullYear(),i=p.getMonth();return{year:c,month:i,time:d}}if(x.value.length===0&&!J.value)return{year:X.value.date.getFullYear(),month:X.value.date.getMonth(),time:X.value.time};if(x.value.length===2&&J.value){const d=new Date(x.value[1]).getFullYear(),p=new Date(x.value[1]).getMonth()-L.value,c=x.value[1];return{year:d,month:p,time:c}}const l=new Date(x.value[0]).getFullYear(),s=new Date(x.value[0]).getMonth(),r=x.value[0];return{year:l,month:s,time:r}}),Q=(l,s)=>{const r=Z(l,s),d=De(l,s),p=oe(r.length,d.length,l,s),c=[...d,...r,...p],i=7;return{days:r,month:s,next:p,previous:d,year:l,weeklyList:c.reduce((y,D,q)=>{const E=Math.floor(q/i);return y[E]=y[E]||[],y[E].push(D),y},[])}},Z=(l,s)=>{const r=32-new Date(l,s,32).getDate();return Array.from({length:r},(c,i)=>i+1).map((c,i)=>{const $=new Date(l,s,c,12,0,0).getTime(),y=we(l,s,c,"CURRENT"),D=i===0;return{class:"lp-datepicker__day",day:c,itemProps:y,month:new Date(l,s,c,12,0,0).getMonth(),year:new Date(l,s,c,12,0,0).getFullYear(),time:$,isFirst:D,type:"day"}})},De=(l,s)=>{const r=32-new Date(l,s-1,32).getDate(),d=new Date(l,s,1).getDay(),p=d>0?d-1:6,c=r-(p-1);return Array.from({length:p},(y,D)=>D+c).map(y=>{const D=new Date(l,s-1,y,12,0,0).getTime(),q=we(l,s-1,y,"PREVIOUS");return{class:"lp-datepicker__previous",day:y,itemProps:q,month:new Date(l,s-1,y).getMonth(),year:new Date(l,s-1,y).getFullYear(),time:D,type:"previous"}})},oe=(l,s,r,d)=>{const p=l+s,i=Math.ceil(p/7)*7-p;return Array.from({length:i},(D,q)=>q+1).map(D=>{const q=new Date(r,d+1,D,12,0,0).getTime(),E=we(r,d+1,D,"NEXT");return{class:"lp-datepicker__next",day:D,itemProps:E,month:new Date(q).getMonth(),year:new Date(q).getFullYear(),time:q,type:"next"}})},ge=(l,s,r,d)=>{if(te(l,s,r))return;h.value&&(a.value=[],h.value=!1);const p=new Date(l,s,r,12,0,0).getTime();k.value=p,w.value=0,F.value||(a.value=[p],o("selection",a.value),b.value=0),F.value&&(a.value.length<2?(L.value=d,a.value.push(p),A.value=[],a.value.sort(),J.value=!0,o("selection",a.value),b.value=0):(L.value=0,a.value=[p],o("selection",a.value)))},ie=()=>{o("hide",{from:fe.value})},Ae=()=>{h.value=!0,o("reset");const l=T.value.querySelector('[data-time-to-focus="'+k.value+'"]');l==null||l.focus()},Te=l=>{if(F.value&&a.value.length===1){const s=G.value;if(l<a.value[0]){const r=l,d=a.value[0]-s;A.value=Array.from({length:(d-r)/s+1},(p,c)=>r+c*s)}if(l>a.value[0]){const r=a.value[0]+s,d=l;A.value=Array.from({length:(d-r)/s+1},(p,c)=>r+c*s)}}},be=async(l,s)=>{const r=l,d=s==="left"||s==="right",p=s==="left"||s==="up",c=d?G.value:G.value*7,i=p?-1*c:c,$=Fe(r,i);k.value=$,w.value=$,await et(),T.value.querySelector('[data-time-to-focus="'+k.value+'"]').focus()},Fe=(l,s)=>{let r=l;r+=s;const d=new Date(r);return d.setHours(12,0,0,0),d.getTime()},Ce=(l,s)=>{if(isNaN(s))return[];let r=[];if(l<=s)r=Array.from({length:s-l+1},(p,c)=>l+c);else{const p=Array.from({length:12-l},(i,$)=>l+$),c=Array.from({length:s+1},(i,$)=>$);r=p.concat(c)}return r},qe=()=>{T.value.querySelector(".lp-datepicker__arrow--right").focus()},Ye=async()=>{T.value.querySelector(".lp-datepicker__closer").focus()},Be=async()=>{T.value.querySelector('[data-time-to-focus="'+k.value+'"]').focus()},N=async()=>{T.value.querySelector(".lp-datepicker__arrow--left").focus()},we=(l,s,r,d)=>{let p="button",c="",i=" lp-datepicker__td ",$=!1,y=-1,D=null,q=!1;const E=new Date(l,s,r,12,0,0),M=E.getTime(),$e={weekday:"long",year:"numeric",month:"long",day:"numeric"},de=E.toLocaleDateString("fr-FR",$e);let he=`${de}.`;const Je=d==="NEXT"||d==="PREVIOUS";(te(l,s,r)||Je)&&(p="span",c+=" lp-datepicker--disabled ",$=!0,he=`Date non sélectionnable. ${de}.`),a.value.includes(M)&&x.value.length!==0&&!h.value&&(p="button",c+=" lp-datepicker__selected ",y=-1,he=`Sélectionné, ${de}.`,i+=" lp-datepicker--parent-selected "),M===X.value.time&&(c+=" lp-datepicker__today ",he=`Aujourd'hui, ${de}.`,D="date"),M===X.value.time&&a.value.includes(M)&&(he=`Aujourd'hui, Sélectionné, ${de}.`),(M===a.value[0]||M===a.value[1])&&!h.value&&(q=!0),k.value===M&&(y=0);const Ve=a.value[0]!==a.value[1];return a.value.length>0&&M===a.value[0]&&Ve&&!h.value&&(i+=" lp-datepicker--start "),a.value.length===2&&M===a.value[1]&&Ve&&!h.value&&(i+=" lp-datepicker--end "),a.value.length===2&&M>a.value[0]&&M<a.value[1]&&!h.value&&(c+=" lp-datepicker__interval ",i+=" lp-datepicker--parent-interval "),{tag:p,elementClass:c,parentClass:i,disabled:$,tabindex:y,ariaLabel:he,ariaCurrent:D,ariaSelected:q}};return mt(()=>{const l=ae.value.flatMap(s=>s.days).map(s=>s.time);l.includes(k.value)||(k.value=l[0])}),ot(async()=>{const l=T.value;o("opened",l.getBoundingClientRect()),Be(),_.isInModal&&await et(),l.querySelector('[data-time-to-focus="'+k.value+'"]').focus()}),a.value=O.value.sort(),k.value=K.value.time,(l,s)=>(R(),Y("div",{ref_key:"datepickerBox",ref:V,class:P(["lp-datepicker",[{"lp-datepicker--interval":B(F)},{"lp-datepicker--in-modal":l.isInModal},{"lp-datepicker--medium":re.value.isMedium},{"lp-datepicker--large":re.value.isLarge},{"lp-datepicker--frontof":l.isSmall}]]),onKeydown:U(ie,["esc"])},[g("div",Mt,[g("button",{"aria-label":`${B(ye)[W.value.left.month]} ${W.value.left.year}`,class:"lp-datepicker__arrow lp-datepicker__arrow--left",onKeydown:U(ee(Ye,["exact","shift","prevent"]),["tab"]),onClick:s[0]||(s[0]=r=>b.value-=1)},[ce(He,{class:"lp-datepicker__arrow-icon",name:"arrow-left",type:"light"})],40,It),g("button",{ref_key:"datepickerArrowRight",ref:Ie,"aria-label":`${B(ye)[W.value.right.month]} ${W.value.right.year}`,class:"lp-datepicker__arrow lp-datepicker__arrow--right",onKeydown:U(ee(Be,["exact","prevent"]),["tab"]),onClick:s[1]||(s[1]=r=>b.value+=1)},[ce(He,{class:"lp-datepicker__arrow-icon",name:"arrow-right",type:"light"})],40,St)]),g("div",xt,[(R(!0),Y(Ee,null,Pe(ae.value,(r,d)=>(R(),Y("table",{key:`range-${d}`,class:P(["lp-datepicker__inside",r.intervalClass])},[g("caption",null,[g("div",Rt,[g("span",qt,ne(B(ye)[r.month]),1),g("span",Bt,ne(r.year),1)])]),g("thead",null,[g("tr",null,[(R(!0),Y(Ee,null,Pe(B(Re),(p,c)=>(R(),Y("th",{key:`weekdays-${p}-${c}`,scope:"col",class:"lp-datepicker__th"},[g("abbr",{title:p.name,class:"lp-datepicker__weekday"},ne(p.abbr),9,Lt)]))),128))])]),g("tbody",null,[(R(!0),Y(Ee,null,Pe(r.weeklyList,(p,c)=>(R(),Y("tr",{key:`line-${d}-${c}`},[(R(!0),Y(Ee,null,Pe(p,(i,$)=>(R(),Y("td",{key:`item-${d}-${c}-${$}`,class:P([i.itemProps.parentClass,{"lp-datepicker__previous--hidden":i.type==="previous","lp-datepicker__next--hidden":i.type==="next"}]),"aria-current":i.itemProps.ariaCurrent},[(R(),Ke(it(i.itemProps.tag),{"aria-label":i.itemProps.ariaLabel,"aria-selected":i.itemProps.ariaSelected,"data-time-to-focus":i.time,tabindex:i.itemProps.tabindex,class:P([[i.itemProps.elementClass,{"lp-datepicker__first":i.isFirst&&!r.index}],"lp-datepicker__day"]),onMouseover:y=>Te(i.time),onClick:y=>ge(i.year,i.month,i.day,r.index),onKeydown:[U(ee(y=>ge(i.year,i.month,i.day,r.index),["prevent"]),["space"]),U(ee(y=>ge(i.year,i.month,i.day,r.index),["prevent"]),["enter"]),U(ee(qe,["exact","shift","prevent"]),["tab"]),U(ee(y=>be(i.time,"up"),["prevent"]),["up"]),U(ee(y=>be(i.time,"down"),["prevent"]),["down"]),U(ee(y=>be(i.time,"left"),["prevent"]),["left"]),U(ee(y=>be(i.time,"right"),["prevent"]),["right"])]},{default:Le(()=>[Oe(ne(i.day),1)]),_:2},1064,["aria-label","aria-selected","data-time-to-focus","tabindex","class","onMouseover","onClick","onKeydown"]))],10,At))),128))]))),128))])],2))),128))]),g("div",{class:P(["lp-datepicker__actions",`lp-datepicker__actions--${l.withReset&&l.buttonLayout==="centered"?"btns-":""}${l.buttonLayout}`])},[l.withReset?(R(),Ke(at,{key:0,"aria-label":"réinitialiser le calendrier",type:"ghost",color:"darkgrey",size:"small",class:"lp-datepicker__reset",onClick:Ae},{default:Le(()=>s[2]||(s[2]=[Oe(" Réinitialiser ")])),_:1})):_e("",!0),ce(at,{"aria-label":"Fermer le calendrier",color:"default",type:l.withReset?"secondary":"ghost",size:"small",class:"lp-datepicker__closer",onKeydown:U(ee(N,["exact","prevent"]),["tab"]),onClick:ie},{default:Le(()=>s[3]||(s[3]=[Oe(" Fermer ")])),_:1},8,["type","onKeydown"])],2)],34))}}),nt=dt(ct,[["__scopeId","data-v-df2a2013"]]);ct.__docgenInfo={exportName:"default",displayName:"DatepickerDays",description:"",tags:{},props:[{name:"startNumber",required:!1,type:{name:"number"}},{name:"endNumber",required:!1,type:{name:"number"}},{name:"isInModal",required:!1,type:{name:"boolean"}},{name:"isSmall",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.small"}},{name:"blackList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"buttonLayout",required:!1,type:{name:"union",elements:[{name:'"centered"'},{name:'"align-right"'}]},defaultValue:{func:!1,value:"'centered'"}},{name:"range",required:!1,type:{name:"Range"}},{name:"disabledDaysByWeek",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"holidays",required:!1,type:{name:"boolean"}},{name:"bankHolidays",required:!1,type:{name:"boolean"}},{name:"typage",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"interval"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"weekend",required:!1,type:{name:"boolean"}},{name:"whiteList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"withReset",required:!1,type:{name:"boolean"}}],events:[{name:"selection"},{name:"hide"},{name:"opened"},{name:"reset"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/Datepicker/Tools/DatepickerDays.vue"]};const lt=z=>/^(0?[1-9]|[12][0-9]|3[01])[/](0?[1-9]|1[012])[/]\d{4}$/.test(z),ze={xxs:320,xs:375,s:700,m:992,l:1280,xl:1440,xxl:1680,xxxl:3e3},Tt=["aria-describedby"],Ft=["aria-invalid","aria-required"],Ct=["aria-label","value","readonly","tabindex","disabled"],Yt=["aria-label","value","readonly","tabindex","disabled"],Vt=["aria-label","value","readonly","tabindex","disabled"],Nt=["aria-invalid","aria-required"],Et={class:"lp-datepicker__inputs"},Pt=["aria-label","value","readonly","tabindex","disabled"],zt=["aria-label","value","readonly","tabindex","disabled"],Ht=["aria-label","value","readonly","tabindex","disabled"],Jt=["aria-expanded","disabled"],Ot=["aria-expanded","disabled"],Wt={key:1,class:"lp-datepicker__dropdown"},Kt={class:"lp-datepicker__error-message-text"},Ut={key:2,class:"lp-datepicker__message"},pt=st({__name:"Datepicker",props:tt({dataError:{},disabled:{type:Boolean},end:{},size:{default:Ue.medium},start:{},blackList:{},buttonLayout:{},range:{},disabledDaysByWeek:{},holidays:{type:Boolean},bankHolidays:{type:Boolean},mandatory:{type:Boolean},typage:{default:"default"},inputReadonly:{type:Boolean},label:{},labelPosition:{default:$t.inside},message:{},weekend:{type:Boolean},whiteList:{},withReset:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:tt(["input","blur","change","selection","reset"],["update:modelValue"]),setup(z,{emit:Me}){var je;const _=yt(z,"modelValue"),o=z,V=Me,Ie=wt,pe=bt(),S=(je=pe==null?void 0:pe.proxy)==null?void 0:je.$el,j=f(),ve=f(),le=f(),se=f(),{range:Se,blackList:xe,disabledDaysByWeek:me,holidays:ye,bankHolidays:Re,typage:F,weekend:te,whiteList:G}=rt(o),{nullTime:b,interval:L,inputData:a}=ut(Se,xe,me,ye,Re,F,te,G),A=f(b.value),h=f(b.value),k=f(!1),w=f(!1),J=f({left:"0px",right:"inherit",transform:"translateX(0)",isSmall:!1}),T=f({maxHeight:"auto"}),x=H(()=>W.value?"fieldset":"div"),O=H(()=>o.typage==="default"),W=H(()=>!O.value&&o.labelPosition==="outside"),ae=H(()=>O.value&&o.label||o.start.label),fe=f("lp-datepicker__opened--bottom"),re=f(!1),X=f(""),K=f(null),Q=f(!1),Z=e=>{Q.value=!1;const t=e.target,n=t.value,u=t.dataset.datepickerName||"",m=t.selectionStart,v=n.replace(/\D/g,"");if(t.value=v,m!==null){const I=n.length-v.length;t.setSelectionRange(m-I,m-I)}we(v,u,"start"),L.value&&we(v,u,"end"),(/^\d*$/.test(n)||!v)&&V("input",e)},De=H(()=>({colorBorderTop:"supernova",mobileFull:!1,size:"default",showTitle:!1,title:O.value?"Choisir la date":"Choisir les dates"})),oe=e=>{const t=e.height,n=S==null?void 0:S.getBoundingClientRect(),u=n==null?void 0:n.top,m=window.innerHeight-(n==null?void 0:n.bottom);let v="bottom";m<t+16&&u>t+16&&(v="top"),fe.value=`lp-datepicker__opened--${v}`},ge=()=>{var e,t;return(e=o.dataError)!=null&&e.active&&((t=o.dataError)!=null&&t.message)?X.value:void 0},ie=()=>{const e=K.value;X.value=e&&e.id?e.id:"error-message"},Ae=_t({tablet_landscape:ze.m,tablet:ze.s}),Te=e=>{const t=Ae.isGreaterOrEqual("tablet_landscape"),n=Ae.isGreaterOrEqual("tablet"),u=t,m=L.value&&u?758:ze.xs,v=m===ze.xs,I=(S==null?void 0:S.getBoundingClientRect().left)+m>window.innerWidth,ue=I?"inherit":"0px",ke=I?"0px":"inherit";J.value={left:n?ue:"50%",transform:n?"":"translateX(-50%)",right:ke,isSmall:v},e==="modale"?(w.value=!w.value,k.value=!1):(k.value=!k.value,w.value=!1),Q.value&&be()},be=()=>{A.value=b.value,h.value=b.value},Fe=()=>{Q.value=!0,Object.keys(a).forEach(u=>{u.endsWith("Input")&&(a[u]="")});const e=A.value!==b.value,t=h.value!==b.value,n=[...e?[A.value]:[],...t?[h.value]:[]];V("reset",n),e&&t&&(h.value=b.value)},Ce=e=>{var u,m;let t="dropdown";e.from==="fromDropdown"&&(k.value=!k.value),e.from==="fromModal"&&(t="modal",w.value=!w.value),(u=se.value)==null||u.focus(),(m=le.value)==null||m.focus();const n=S==null?void 0:S.querySelector(".lp-datepicker__toggle--"+t);n==null||n.focus()},qe=()=>{if(k.value){k.value=!1;const e=S==null?void 0:S.querySelector(".lp-datepicker__toggle--dropdown");e==null||e.focus()}},Ye=()=>{w.value&&(w.value=!1);const e=S==null?void 0:S.querySelector(".lp-datepicker__toggle--modal");e==null||e.focus()},Be=e=>{const t={day:`${e}DayInput`,month:`${e}MonthInput`,year:`${e}YearInput`},n=a[t.day];if(n){const v=parseInt(n);a[t.day]=v===0?"01":v.toString().padStart(2,"0")}const u=a[t.month];["0","1"].includes(u)&&(a[t.month]="01");const m=a[t.year];if(m){const v=parseInt(m);v<100?a[t.year]=(v+2e3).toString():a[t.year]=v.toString().padStart(4,"0")}},N=(e,t)=>{if(o.inputReadonly){re.value=!1;return}if(re.value=!!e,k.value=!1,e===!1&&t==="start"){if(Be(t),!a.startDayInput||!a.startMonthInput||!a.startYearInput)return;const n=`${a.startDayInput}/${a.startMonthInput}/${a.startYearInput}`;V("input",n),V("blur"),_.value&&(_.value[0]=`${n}`)}if(e===!1&&t==="end"){if(Be(t),!a.endDayInput||!a.endMonthInput||!a.endYearInput)return;const n=`${a.endDayInput}/${a.endMonthInput}/${a.endYearInput}`;V("input",n),V("blur"),_.value&&(_.value[1]=`${n}`)}},we=(e,t,n)=>{if(t===`${n}-day`){const u=p(e,a[`${n}MonthInput`],a[`${n}YearInput`]);a[`${n}DayInput`]=u,a[`${n}Day`]=u,a[`${n}DayInput`]==="0"&&(a[`${n}Day`]="01")}if(t===`${n}-month`){const u=c(e,n,a[`${n}DayInput`],a[`${n}YearInput`]);a[`${n}MonthInput`]=u,a[`${n}Month`]=u,a[`${n}MonthInput`]==="0"&&(a[`${n}Month`]="01")}if(t===`${n}-year`){const u=i(e,n,a[`${n}DayInput`],a[`${n}MonthInput`]);a[`${n}YearInput`]=e,a[`${n}Year`]=u}l(n)},l=e=>{a[`${e}NewTime`]=de(a[`${e}Year`],a[`${e}Month`],a[`${e}Day`]);const t=s("start"),n=s("end");e==="start"?A.value=t?b.value:a.startNewTime:e==="end"&&(h.value=n?b.value:a.endNewTime)},s=e=>a[`${e}DayInput`]===""||a[`${e}MonthInput`]===""||a[`${e}YearInput`]==="",r=(e,t,n)=>t?`0${e}`:n?`0${e[0]}`:e.length===2&&e==="00"?"01":e,d=(e,t,n)=>{const u=parseInt(e),m=parseInt(t);let v=parseInt(n);v=v<100?v+2e3:v;const I=new Date(v,m,0).getDate();return{dayValue:u,monthValue:m,yearValue:v,daysInMonth:I}},p=(e,t,n)=>{const{dayValue:u,daysInMonth:m}=d(e,t,n),v=Math.floor(m/10)||3,I=e.length===1&&u>v,ue=u>m||(!t||!n)&&u>31;return r(e,I,ue)},c=(e,t,n,u)=>{const{monthValue:m,dayValue:v,daysInMonth:I}=d(n,e,u),ue=e.length===1&&m>1,ke=m>12,Ne=r(e,ue,ke);return $(v,I,t),Ne},i=(e,t,n,u)=>{const{dayValue:m,daysInMonth:v,yearValue:I}=d(n,u,e);return $(m,v,t),I},$=(e,t,n)=>{if(e>t){const m=n==="start"?"startDayInput":"endDayInput",v=n==="start"?"startDay":"endDay";a[m]=t.toString(),a[v]=t.toString()}},y=e=>{var n,u,m,v;Q.value&&(be(),Q.value=!1);const t=new Date(e[0]);if(a.startDay=D(t.getDate()),a.startMonth=D(t.getMonth()+1),a.startYear=t.getFullYear(),$e("start"),A.value=e[0],L.value||(_.value=[M(String(e[0]))],V("selection",e[0]),qe(),Ye(),(n=se.value)==null||n.focus(),(u=le.value)==null||u.focus()),L.value&&e.length===1&&(_.value=[M(String(e[0]))],V("selection",e[0])),L.value&&e.length===2){const I=new Date(e[1]);a.endDay=D(I.getDate()),a.endMonth=D(I.getMonth()+1),a.endYear=I.getFullYear(),$e("end"),h.value=e[1],_.value=[M(String(e[0])),M(String(e[1]))],V("selection",e),qe(),Ye(),(m=se.value)==null||m.focus(),(v=le.value)==null||v.focus()}},D=e=>e.toLocaleString("fr-FR",{minimumIntegerDigits:2}),q=e=>e.split("/"),E=e=>{const t=q(e),n=t[0],u=t[1],m=parseInt(t[2]);return de(m,u,n)},M=e=>{const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),u=String(t.getMonth()+1).padStart(2,"0"),m=t.getFullYear();return`${n}/${u}/${m}`},$e=e=>{a[`${e}DayInput`]=a[`${e}Day`],a[`${e}MonthInput`]=a[`${e}Month`],a[`${e}YearInput`]=""+a[`${e}Year`]},de=(e,t,n)=>new Date(e,parseInt(t)-1,parseInt(n),12,0,0).getTime(),he=e=>{if(!e.date||!lt(e.date))return;const t=e.date,n=q(t);a.startDay=n[0],a.startMonth=n[1],a.startYear=parseInt(n[2]),$e("start"),A.value=E(t)},Je=e=>{if(!e||!e.date||!lt(e.date))return;const t=e.date,n=q(t);a.endDay=n[0],a.endMonth=n[1],a.endYear=parseInt(n[2]),$e("end"),h.value=E(t)},Ve=()=>{he(o.start),L.value&&Je(o.end)};return Dt(j,()=>qe()),A.value=b.value,h.value=b.value,Ve(),ft(()=>{ie()}),ot(()=>{ie()}),(e,t)=>{var n;return R(),Ke(it(x.value),{class:P(["lp-datepicker__container",[{"lp-datepicker--error":(n=e.dataError)==null?void 0:n.active},{"lp-datepicker__container--outside-default":O.value&&o.labelPosition==="outside"}]])},{default:Le(()=>{var u,m,v,I,ue,ke,Ne,Ge,Xe,Qe;return[W.value&&o.label?(R(),Y("legend",{key:0,class:P([{"lp-datepicker__label--outside":W.value}])},ne(o.label),3)):_e("",!0),g("div",{ref_key:"datepicker",ref:j,class:P(["lp-datepicker__wrapper",[`lp-datepicker__wrapper--${o.size}`,{"lp-datepicker__wrapper--outside":O.value&&o.labelPosition==="outside"},{"lp-datepicker__wrapper--focused":re.value},{"lp-datepicker__wrapper--disabled":o.disabled},{"lp-datepicker__wrapper--interval":B(L)},{"lp-datepicker__wrapper--readonly":o.inputReadonly},{"lp-datepicker__wrapper--empty":B(a).startDayInput===""&&B(a).startMonthInput===""&&B(a).startYearInput===null},{"lp-datepicker--error":(u=e.dataError)==null?void 0:u.active}]]),"aria-describedby":ge()},[g("fieldset",{class:P(["lp-datepicker__date",{[`lp-datepicker__default-${o.labelPosition}`]:O.value}]),"aria-invalid":((m=o.dataError)==null?void 0:m.active)??!1,"aria-required":o.mandatory},[g("legend",{class:P(["lp-datepicker__label",[{"visually-hidden":W.value,"lp-datepicker__label--mandatory":o.mandatory,"lp-datepicker__label--outside-default":o.labelPosition==="outside"},O.value?`lp-datepicker__label--${o.labelPosition}`:"lp-datepicker__label--inside"]])},ne(ae.value),3),g("div",{class:P(["lp-datepicker__inputs",{[`lp-datepicker__inputs--${o.labelPosition}`]:O.value}])},[g("input",{id:"datepicker-start",type:"text",class:"lp-datepicker__input lp-datepicker__input--day",maxlength:"2","aria-label":`${ae.value}, Jour, Format attendu : JJ (exemple: 12)`,value:B(a).startDayInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"JJ","data-datepicker-name":"start-day",onInput:Z,onFocus:t[0]||(t[0]=C=>N(!0,"start")),onBlur:t[1]||(t[1]=C=>N(!1,"start"))},null,40,Ct),t[15]||(t[15]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--month",maxlength:"2","aria-label":`${ae.value}, Mois, Format attendu : MM (exemple : 08)`,value:B(a).startMonthInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"MM","data-datepicker-name":"start-month",onInput:Z,onFocus:t[2]||(t[2]=C=>N(!0,"start")),onBlur:t[3]||(t[3]=C=>N(!1,"start"))},null,40,Yt),t[16]||(t[16]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--year",maxlength:"4","aria-label":`${ae.value}, Année, Format attendu : AAAA (exemple : 2018)`,value:B(a).startYearInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"AAAA","data-datepicker-name":"start-year",onInput:Z,onFocus:t[4]||(t[4]=C=>N(!0,"start")),onBlur:t[5]||(t[5]=C=>N(!1,"start"))},null,40,Vt)],2)],10,Ft),B(L)?(R(),Y("fieldset",{key:0,class:"lp-datepicker__date lp-datepicker__label--inside","aria-invalid":((v=o.dataError)==null?void 0:v.active)??!1,"aria-required":e.mandatory},[e.end?(R(),Y("legend",{key:0,class:P(["lp-datepicker__label",{"lp-datepicker__label--mandatory":e.mandatory,"visually-hidden":W.value}])},ne(e.end.label),3)):_e("",!0),g("div",Et,[g("input",{id:"datepicker-end",type:"text",class:"lp-datepicker__input lp-datepicker__input--day",maxlength:"2","aria-label":`${(I=e.end)==null?void 0:I.label}, Jour, Format attendu : JJ (exemple: 12)`,value:B(a).endDayInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"JJ","data-datepicker-name":"end-day",onInput:Z,onFocus:t[6]||(t[6]=C=>N(!0,"end")),onBlur:t[7]||(t[7]=C=>N(!1,"end"))},null,40,Pt),t[17]||(t[17]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--month",maxlength:"2","aria-label":`${(ue=e.end)==null?void 0:ue.label}, Mois, Format attendu : MM (exemple: 08)`,value:B(a).endMonthInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"MM","data-datepicker-name":"end-month",onInput:Z,onFocus:t[8]||(t[8]=C=>N(!0,"end")),onBlur:t[9]||(t[9]=C=>N(!1,"end"))},null,40,zt),t[18]||(t[18]=g("span",{class:"lp-datepicker__slash"},"/",-1)),g("input",{type:"text",class:"lp-datepicker__input lp-datepicker__input--year",maxlength:"4","aria-label":`${(ke=e.end)==null?void 0:ke.label}, Année, Format attendu : AAAA (exemple: 2018)`,value:B(a).endYearInput,readonly:o.inputReadonly,tabindex:o.inputReadonly?-1:0,disabled:o.disabled,placeholder:"AAAA","data-datepicker-name":"end-year",onInput:Z,onFocus:t[10]||(t[10]=C=>N(!0,"end")),onBlur:t[11]||(t[11]=C=>N(!1,"end"))},null,40,Ht)])],8,Nt)):_e("",!0),g("button",{ref_key:"datepickerButtonDropdown",ref:le,"aria-expanded":k.value,"aria-label":"Choisir la date dans un calendrier",class:P([[`lp-datepicker__toggle--${e.size}`,{"lp-datepicker__toggle--readonly":e.inputReadonly}],"lp-datepicker__toggle lp-datepicker__toggle--dropdown"]),disabled:o.disabled,onClick:t[12]||(t[12]=C=>Te("dropdown"))},[ce(He,{name:"editing-calendar",type:"light"})],10,Jt),g("button",{ref_key:"datepickerButtonModal",ref:se,"aria-expanded":w.value,"aria-label":"Choisir la date dans un calendrier",class:P([[`lp-datepicker__toggle--${e.size}`,{"lp-datepicker__toggle--readonly":e.inputReadonly}],"lp-datepicker__toggle lp-datepicker__toggle--modal"]),disabled:o.disabled,onClick:t[13]||(t[13]=C=>Te("modale"))},[ce(He,{name:"editing-calendar",type:"light"})],10,Ot),ce(ht,We({modelValue:w.value,"onUpdate:modelValue":t[14]||(t[14]=C=>w.value=C)},De.value,{class:"lp-datepicker__modal"}),{content:Le(()=>[ce(nt,We({ref_key:"datepickerDropdown",ref:ve,class:["lp-datepicker__opened",fe.value],"is-in-modal":!0,"is-small":J.value.isSmall,style:[J.value,T.value],"start-number":A.value,"end-number":h.value},e.$props,{onOpened:oe,onSelection:y,onHide:Ce,onReset:Fe}),null,16,["is-small","class","style","start-number","end-number"])]),_:1},16,["modelValue"]),k.value?(R(),Y("div",Wt,[ce(nt,We({ref_key:"datepickerDropdown",ref:ve,class:["lp-datepicker__opened",fe.value],style:[J.value,T.value],"start-number":A.value,"end-number":h.value},o,{onOpened:oe,onSelection:y,onHide:Ce,onReset:Fe}),null,16,["class","style","start-number","end-number"])])):_e("",!0)],10,Tt),(Ne=e.dataError)!=null&&Ne.active&&((Ge=e.dataError)!=null&&Ge.message)?gt((R(),Y("p",{key:1,ref_key:"errorMessage",ref:K,class:"lp-datepicker__error-message","aria-live":"polite"},[g("span",Kt,ne((Xe=e.dataError)==null?void 0:Xe.message),1)])),[[B(Ie),"lp-datepicker-error-message--"]]):_e("",!0),e.message&&!((Qe=e.dataError)!=null&&Qe.active)?(R(),Y("p",Ut,ne(e.message),1)):_e("",!0)]}),_:1},8,["class"])}}}),na=dt(pt,[["__scopeId","data-v-48176ebd"]]);pt.__docgenInfo={exportName:"default",displayName:"Datepicker",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"end",required:!1,type:{name:"DateType"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.medium"}},{name:"start",required:!0,type:{name:"DateType"}},{name:"blackList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"buttonLayout",required:!1,type:{name:"union",elements:[{name:'"centered"'},{name:'"align-right"'}]}},{name:"range",required:!1,type:{name:"Range"}},{name:"disabledDaysByWeek",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"holidays",required:!1,type:{name:"boolean"}},{name:"bankHolidays",required:!1,type:{name:"boolean"}},{name:"mandatory",required:!1,type:{name:"boolean"}},{name:"typage",required:!1,type:{name:"union",elements:[{name:'"default"'},{name:'"interval"'}]},defaultValue:{func:!1,value:"'default'"}},{name:"inputReadonly",required:!1,type:{name:"boolean"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"message",required:!1,type:{name:"string"}},{name:"weekend",required:!1,type:{name:"boolean"}},{name:"whiteList",required:!1,type:{name:"Array",elements:[{name:"number"}]}},{name:"withReset",required:!1,type:{name:"boolean"}}],events:[{name:"input"},{name:"blur"},{name:"change"},{name:"selection"},{name:"reset"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/molecules/Datepicker/Datepicker.vue"]};export{na as S,Ue as a,lt as i};
