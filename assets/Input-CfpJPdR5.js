import{r as A,c as L,w as pe,d as me,m as ae,M as fe,a as ce,k as be,l as ve,e as f,u as t,v,t as K,y as E,B as c,f as X,b as P,E as ye,A as O,C as ge,T as he,G as Y,H as qe,o as d,a3 as ke,J as le,I as ne,z as Se,N as Ee,F as we,x as $e}from"./vue.esm-bundler-BHwbD8xO.js";import{S as te}from"./Icon-LmhyBlqB.js";import{S as Ve}from"./Tooltip-CcQPO6Um.js";import{S as _e}from"./Button-Cqby2nDZ.js";import{L as Q}from"./types-Dd7QR7uO.js";import{g as Ie}from"./generateId-DPOzJEtM.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Ae(l,y,r,j,w,$,V,n,C,p,D){var z;const u=A(-1),b=A(!1),M=L(()=>(V==null?void 0:V.value)&&((p==null?void 0:p.value)==="text"||(p==null?void 0:p.value)==="number")),k=a=>{const o=/^\d+([.,]\d+)?$/;if(M.value)if(!o.test(a.replace(/\s/g,"")))a=a.replace(/[^\d.,]/g,"").replace(/([.,])[.,]+/g,",").replace(/^([.,]+)/,"").replace(/\./,"_").replace(/\./g,"").replace("_",".").replace(/,/,"_").replace(/,/g,"").replace("_",",");else{const m=Number(a.replaceAll(",","."));r!=null&&r.value&&m&&(a=r.value<m?r.value.toString():a)}return a},g=(a,o)=>{const m=Number(a.replaceAll(",","."));return a!==""&&!isNaN(m)&&(a=o>m?o.toString():a),a},_=a=>{let o=a.target.value;M.value&&(o=k(o),a.target.value=o),w!=null&&w.value&&(o=o.slice(0,w.value)),n!=null&&n.value&&(u.value=-1),l("input",o)},h=a=>{l("focus",a)},G=()=>{(C==null?void 0:C.value).focus()},N=a=>{const o=D==null?void 0:D.value[`suggestion-${a}-label`];o&&o.scrollIntoView({block:"nearest",behavior:"auto"})},H=()=>{n!=null&&n.value&&q.value?(u.value++,u.value===n.value.length&&(u.value=0),N(u.value)):l("goDown")},J=()=>{n!=null&&n.value&&q.value&&(u.value--,u.value<0&&(u.value=n.value.length-1),N(u.value))},T=a=>{let o=a.target.value;M.value&&($!=null&&$.value)&&(o=g(o,$.value),a.target.value=o),n!=null&&n.value&&B.value&&I(n.value[u.value]),l("blur",a)},F=a=>{b.value=!!(a!=null&&a.length)};pe(()=>n==null?void 0:n.value,F);const R=L(()=>{const a={},o=(y==null?void 0:y.value)??{};return Object.keys(o).forEach(m=>a[`aria-${m}`]=y==null?void 0:y.value[m]),a}),I=a=>{S(),l("suggestionSelect",a)},S=(a=!0)=>{b.value=!1,a&&(u.value=-1)},B=L(()=>(n==null?void 0:n.value)&&u.value>=0&&u.value<n.value.length),q=L(()=>(n==null?void 0:n.value)&&n.value.length>0),W=a=>{if((p==null?void 0:p.value)==="number"&&["-"].includes(a.key)&&a.preventDefault(),a.key==="Escape"&&!q.value&&l("input",""),!!q.value)switch(a.key){case" ":B.value&&(S(),a.preventDefault(),l("closeSuggestions",a));break;case"Enter":n!=null&&n.value&&B.value&&I(n.value[u.value]);break;case"Tab":b.value&&S(!1);break;case"Escape":b.value&&S(),l("closeSuggestions",a);break}};return b.value=!!((z=n==null?void 0:n.value)!=null&&z.length),{suggestionsLayerIsVisible:b,ariaAttributes:R,suggestionFocus:u,hasSuggestions:q,checkMin:g,focus:h,sanitizeNumericonly:k,setFocus:G,goDown:H,goUp:J,blur:T,changeSuggestions:F,suggestionSelect:I,change:_,onKeydown:W}}var Ce=(l=>(l.disabled="disabled",l.readonly="readonly",l.active="active",l))(Ce||{}),De=(l=>(l.inside="inside",l.outside="outside",l))(De||{}),Me=(l=>(l.simple="simple",l.multiple="multiple",l))(Me||{}),re=(l=>(l.default="default",l.compact="compact",l.regular="regular",l.small="small",l.medium="medium",l))(re||{}),Ne=(l=>(l.simple="simple",l.multi="multi",l))(Ne||{}),Pe=(l=>(l.contains="contains",l.startswith="startswith",l))(Pe||{});const Le=["for"],Te=["id","role","readonly","disabled","autocomplete","maxlength","placeholder","name","type","min","max","aria-describedby","aria-invalid","aria-required","aria-controls","aria-expanded","aria-autocomplete","aria-activedescendant"],Fe=["for"],Re={key:0,class:"input__unit"},ze=["title"],Ue={key:1},Ke=["id","aria-labelledby"],Oe=["id","aria-selected","onMousedown"],Qe={key:2,class:"input__message"},oe=me({__name:"Input",props:ae({dataError:{},aria:{},autocomplete:{},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean},error:{type:Boolean,default:!1},hideLabel:{type:Boolean,default:!1},icon:{},id:{},inputRefStr:{default:"input"},isQuiet:{type:Boolean,default:!1},label:{},labelPosition:{default:Q.inside},mandatory:{type:Boolean,default:!1},message:{},max:{},maxlength:{},min:{},name:{},numericOnly:{type:Boolean,default:!1},placeholder:{},readonly:{type:Boolean,default:!1},size:{default:re.medium},success:{type:Boolean,default:!1},suggestions:{},type:{default:"text"},tooltipComponent:{},unit:{},value:{}},{modelValue:{},modelModifiers:{}}),emits:ae(["focus","goDown","blur","suggestionSelect","input","closeSuggestions"],["update:modelValue"]),setup(l,{emit:y}){var x;const r=l,j=L(()=>({displayElement:"inline-flex",forcePlacement:!1,offset:8,placement:"top",tooltipStyle:"default",trigger:"hover",triggerIcon:"search-loupe",...r.tooltipComponent??{}})),w=y,$=Ie,V=A(),n=A([]),{aria:C,max:p,inputRefStr:D,maxlength:u,min:b,numericOnly:M,suggestions:k,type:g}=fe(r),{suggestionFocus:_,suggestionsLayerIsVisible:h,hasSuggestions:G,focus:N,goDown:H,goUp:J,blur:T,suggestionSelect:F,change:R,onKeydown:I}=Ae(w,C,p,D,u,b,M,k,V,g,n),S=ce(l,"modelValue"),B=A(null),q=A(""),W=()=>{var e,s,i;return r.dataError&&((e=r.dataError)==null?void 0:e.active)&&((i=(s=r.dataError)==null?void 0:s.message)==null?void 0:i.length)},z=()=>!r.label&&r.placeholder?r.placeholder.toString():void 0,a=()=>{var e,s;return(e=r.dataError)!=null&&e.active&&((s=r.dataError)!=null&&s.message)?q.value:void 0},o=()=>{const e=B.value;q.value=e&&e.id?e.id:"error-message"},m=()=>{var e;return(e=r.dataError)!=null&&e.active?r.dataError.active:null},Z=()=>r.mandatory?r.mandatory:null,se=()=>r.suggestions?"list":null,ue=()=>r.suggestions?G.value?h==null?void 0:h.value:"false":!1,ie=()=>r.suggestions?`${r.id}-listbox`:null,de=()=>{const{suggestions:e,id:s}=r;return!e||e.length===0||_.value===-1?null:`${s}-suggestion-${e[_.value].label}`};return be(()=>{o()}),ve(()=>{o()}),h.value=!!((x=r.suggestions)!=null&&x.length),(e,s)=>(d(),f("div",{class:v(["input",[`input--${e.labelPosition}`,{"input--small":e.size=="small"||e.size=="compact","input--medium":e.size=="medium"||e.size=="default","input--filled":!!e.value,"input--only":!e.placeholder&&!e.value}]])},[e.label&&e.labelPosition===t(Q).outside?(d(),f("label",{key:0,class:v(["input__label-tag",{"input__label-tag--disabled":e.disabled}]),for:e.id},[K("span",{class:v(["input__label input__label--outside",[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}]])},E(e.label),3)],10,Le)):c("",!0),K("div",{class:v(["input__global",[{"input__global--disabled":e.disabled,"input__global--readonly":e.readonly,"input__global--isQuiet":e.isQuiet,"input__global--error":e.error||e.dataError&&e.dataError.active}]])},[X(e.$slots,"inputLeft",{},void 0,!0),(d(),P(ye(e.label?"div":"label"),{class:v([{"input__wrapper--label":!e.label,"input__wrapper--outside":e.labelPosition===t(Q).outside},"input__wrapper"]),aria:z()},{default:O(()=>[Y(K("input",{id:e.id,ref_key:"inputRef",ref:V,"onUpdate:modelValue":s[0]||(s[0]=i=>S.value=i),role:t(k)?"combobox":null,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autocomplete,maxlength:t(g)!=="number"?t(u):void 0,placeholder:e.placeholder,class:v(["input__field",[{"input__field--placeholder":e.placeholder&&e.placeholder.length>0,"input--disabled":e.disabled}]]),name:e.name,type:t(g)||"text",min:t(g)==="number"?t(b)||0:void 0,max:t(g)==="number"?t(p):void 0,"aria-describedby":a(),"aria-invalid":m()?m():null,"aria-required":Z()?Z():null,"aria-controls":ie(),"aria-expanded":ue(),"aria-autocomplete":se(),"aria-activedescendant":de(),onKeydown:[s[1]||(s[1]=le(ne(i=>t(H)(),["prevent"]),["down"])),s[2]||(s[2]=le(ne(i=>t(J)(),["prevent"]),["up"])),s[3]||(s[3]=(...i)=>t(I)&&t(I)(...i))],onFocus:s[4]||(s[4]=(...i)=>t(N)&&t(N)(...i)),onBlur:s[5]||(s[5]=(...i)=>t(T)&&t(T)(...i)),onInput:s[6]||(s[6]=(...i)=>t(R)&&t(R)(...i))},null,42,Te),[[ke,S.value]]),e.label&&e.labelPosition===t(Q).inside?(d(),f("label",{key:0,for:e.id,class:v(["input__label-tag",{"input__label-tag--disabled":e.disabled,"input__label-tag--readonly":e.readonly}])},[K("span",{class:v([[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}],"input__label input__label--inside"])},E(e.label),3)],10,Fe)):c("",!0)]),_:1},8,["class","aria"])),X(e.$slots,"inputRight",{},void 0,!0),e.unit?(d(),f("span",Re,[e.unit.description?(d(),f("abbr",{key:0,title:e.unit.description},E(e.unit.label),9,ze)):(d(),f("span",Ue,E(e.unit.label),1))])):c("",!0),e.icon&&!e.tooltipComponent&&!e.success?(d(),P(te,{key:1,class:"input__icon",name:e.icon},null,8,["name"])):c("",!0),e.tooltipComponent&&!e.success?(d(),P(Ve,ge({key:2,class:"small__popover"},j.value),{tooltip:O(()=>[X(e.$slots,"tooltipContent",{},void 0,!0)]),trigger:O(()=>[Se(_e,{class:"input__icon input__icon--tooltip",icon:j.value.triggerIcon,type:"ghost"},null,8,["icon"])]),_:3},16)):c("",!0),e.success?(d(),P(te,{key:3,class:"input__icon input__icon--success",name:"action-check"})):c("",!0),t(k)?(d(),P(he,{key:4,name:"slide-fade"},{default:O(()=>[t(h)?Y((d(),f("ul",{key:0,id:`${e.id}-listbox`,role:"listbox",class:"suggestions","aria-labelledby":e.id},[(d(!0),f(we,null,$e(t(k),(i,U)=>(d(),f("li",{id:`${e.id}-suggestion-${e.label}`,key:`${e.id}-suggestion-${U}`,ref_for:!0,ref:ee=>n.value[`suggestion-${U}-label`]=ee,role:"option",class:v(["suggestions__item",{"suggestions__item--focused":U===t(_)}]),"aria-selected":U===t(_)?"true":null,onMousedown:ee=>t(F)(i)},E(i.label),43,Oe))),128))],8,Ke)),[[Ee,t(h)]]):c("",!0)]),_:1})):c("",!0)],2),W()?Y((d(),f("p",{key:1,ref_key:"errorMessage",ref:B,class:"input__error-message","aria-live":"polite"},[qe(E(e.dataError?e.dataError.message:""),1)])),[[t($),"input-error-message--"]]):c("",!0),e.message&&!e.dataError.active?(d(),f("p",Qe,E(e.message),1)):c("",!0)],2))}}),Ze=Be(oe,[["__scopeId","data-v-6c47e005"]]);oe.__docgenInfo={exportName:"default",displayName:"Input",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"aria",required:!1,type:{name:`{
  [key: string]: string
}`}},{name:"autocomplete",required:!1,type:{name:"string"}},{name:"autofocus",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"error",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"hideLabel",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"icon",required:!1,type:{name:"string"}},{name:"id",required:!0,type:{name:"string"}},{name:"inputRefStr",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'input'"}},{name:"isQuiet",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"mandatory",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"message",required:!1,type:{name:"string"}},{name:"max",required:!1,type:{name:"number"}},{name:"maxlength",required:!1,type:{name:"number"}},{name:"min",required:!1,type:{name:"number"}},{name:"name",required:!0,type:{name:"string"}},{name:"numericOnly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"readonly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.medium"}},{name:"success",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"suggestions",required:!1,type:{name:"Array",elements:[{name:"SuggestionType"}]}},{name:"type",required:!1,type:{name:"InputType"},defaultValue:{func:!1,value:"'text'"}},{name:"tooltipComponent",required:!1,type:{name:"TooltipProps"}},{name:"unit",required:!1,type:{name:"UnitProp"}},{name:"value",required:!1,type:{name:"union",elements:[{name:"string"},{name:"number"}]}}],events:[{name:"focus"},{name:"goDown"},{name:"blur"},{name:"suggestionSelect"},{name:"input"},{name:"closeSuggestions"}],slots:[{name:"inputLeft"},{name:"inputRight"},{name:"tooltipContent"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/vue3-solaris/src/components/atoms/TextInput/Default/Input.vue"]};export{Ce as A,De as L,Pe as S,Ne as T,Me as a,re as b,Ze as c,Ae as u};
