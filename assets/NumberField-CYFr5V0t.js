import{d as A,m as y,b as I,r as g,a as Q,o as w,f as u,g as t,y as i,A as o,v as d,G as F,M as P,C as m,u as T,H as U}from"./vue.esm-bundler-S_SeJiWS.js";import{g as j}from"./generateId-CVaf2GGW.js";const G=["for"],z=["aria-describedby"],H=["disabled"],K=["id","min","max","disabled","aria-invalid"],S=["disabled"],$={key:0,class:"numberField__text"},J={key:2,class:"numberField__message"},L=A({__name:"NumberField",props:y({dataError:{},disabled:{type:Boolean},error:{type:Boolean},id:{},label:{default:"Quantité"},labelPosition:{default:"visually-hidden"},max:{},message:{},min:{default:1},small:{type:Boolean},type:{default:"quiet"}},{modelValue:{},modelModifiers:{}}),emits:y(["input"],["update:modelValue"]),setup(b,{emit:_}){const l=b,s=_,a=I(b,"modelValue"),h=j,v=g(""),p=g(null),E=()=>{var e,r,n;return l.dataError&&((e=l.dataError)==null?void 0:e.active)&&((n=(r=l.dataError)==null?void 0:r.message)==null?void 0:n.length)},q=()=>{a.value<=l.min?(a.value=l.min,s("input",a.value)):(a.value>=l.max&&(a.value=l.max),s("input",a.value))},M=()=>{l.disabled||a.value===l.max||(a.value++,s("input",a.value+1))},V=()=>{l.disabled||a.value===l.min||(a.value--,s("input",a.value-1))},k=e=>["e","E","+","-","."].includes(e.key)?(e.preventDefault(),!1):!0,N=()=>{!a.value||a.value<l.min?a.value=l.min:a.value>l.max&&(a.value=l.max)},B=()=>{var e,r;return(e=l.dataError)!=null&&e.active&&((r=l.dataError)!=null&&r.message)?v.value:void 0},f=()=>{const e=p.value;v.value=e&&e.id?e.id:"error-message"},C=()=>{var e;return(e=l.dataError)!=null&&e.active?!0:void 0};return Q(()=>{f()}),w(()=>{f()}),(e,r)=>{var n,c;return u(),t("div",{class:d(["numberField",[`numberField--${e.type}`,{"numberField--disabled":e.disabled},{"numberField--small":e.small},{"numberField--max":a.value===e.max}]])},[i("label",{class:d(["numberField__label numberField__label--outside",[{"numberField--disabled":e.disabled,"visually-hidden":e.labelPosition==="visually-hidden"}]]),for:e.id||void 0},o(e.label||"Quantité"),11,G),i("div",{class:d(["numberField__inner",[{"numberField--error":e.error||e.dataError&&e.dataError.active}]]),"aria-describedby":B()},[i("button",{"aria-label":"Diminuer la quantité de un",class:d(["numberField__btn--less",{numberField__btn:!0,"numberField__btn--disabled":a.value<=e.min}]),disabled:a.value<=e.min||e.disabled,onClick:V}," - ",10,H),F(i("input",{id:e.id||void 0,ref:"input","onUpdate:modelValue":r[0]||(r[0]=D=>a.value=D),class:"numberField__input",type:"number",min:e.min,max:e.max,disabled:e.disabled,maxlength:4,"aria-invalid":C(),onKeydown:k,onInput:q,onBlur:N},null,40,K),[[P,a.value]]),i("button",{"aria-label":"Augmenter la quantité de un",class:d(["numberField__btn--more",{numberField__btn:!0,"numberField__btn--disabled":a.value>=e.max}]),disabled:a.value===e.max||e.disabled,onClick:M}," + ",10,S)],10,z),a.value===e.max&&!e.disabled?(u(),t("span",$," Quantité max. ")):m("",!0),E()?F((u(),t("p",{key:1,ref_key:"errorMessage",ref:p,class:"numberField__error-message","aria-live":"polite"},[U(o((n=e.dataError)==null?void 0:n.message),1)])),[[T(h),"numberField-error-message--"]]):m("",!0),e.message&&!((c=e.dataError)!=null&&c.active)?(u(),t("p",J,o(e.message),1)):m("",!0)],2)}}});L.__docgenInfo={exportName:"default",displayName:"NumberField",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"error",required:!1,type:{name:"boolean"}},{name:"id",required:!1,type:{name:"string"}},{name:"label",required:!0,type:{name:"string"},defaultValue:{func:!1,value:"'Quantité'"}},{name:"labelPosition",required:!1,type:{name:"union",elements:[{name:'"outside"'},{name:'"visually-hidden"'}]},defaultValue:{func:!1,value:"'visually-hidden'"}},{name:"max",required:!0,type:{name:"number"}},{name:"message",required:!1,type:{name:"string"}},{name:"min",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"1"}},{name:"small",required:!1,type:{name:"boolean"}},{name:"type",required:!1,type:{name:"union",elements:[{name:'"emphasis"'},{name:'"default"'},{name:'"quiet"'},{name:'"ghost"'}]},defaultValue:{func:!1,value:"'quiet'"}}],events:[{name:"input"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/NumberField/NumberField.vue"]};export{L as _};
