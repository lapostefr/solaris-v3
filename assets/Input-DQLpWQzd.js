import{r as B,c as z,w as ie,d as ue,m as ne,a2 as de,a as pe,k as me,l as fe,e as m,u as n,v as y,t as J,y as E,B as c,f as ae,b as R,E as ce,A as X,C as be,T as ve,G as le,H as ye,o as u,a3 as ge,z as he,S as ke,F as qe,x as we}from"./vue.esm-bundler-DbnnIJWB.js";import{S as te}from"./Icon-BFYv-dj3.js";import{S as Se}from"./Tooltip-CNCAgM55.js";import{S as Ee}from"./Button-jFHmCyiG.js";import{L as Y}from"./types-DKXD8uiR.js";import{g as $e}from"./generateId-CVaf2GGW.js";import{_ as Ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Ve(l,g,t,Z,$,A,V,r,b,d,P){var W;const s=B(-1),v=B(!1),C=z(()=>(V==null?void 0:V.value)&&((d==null?void 0:d.value)==="text"||(d==null?void 0:d.value)==="number")),w=a=>{const o=/^\d+([.,]\d+)?$/;if(C.value)if(!o.test(a.replace(/\s/g,"")))a=a.replace(/[^\d.,]/g,"").replace(/([.,])[.,]+/g,",").replace(/^([.,]+)/,"").replace(/\./,"_").replace(/\./g,"").replace("_",".").replace(/,/,"_").replace(/,/g,"").replace("_",",");else{const f=Number(a.replaceAll(",","."));t!=null&&t.value&&f&&(a=t.value<f?t.value.toString():a)}return a},h=(a,o)=>{const f=Number(a.replaceAll(",","."));return a!==""&&!isNaN(f)&&(a=o>f?o.toString():a),a},_=()=>{l("enterPressed")},k=a=>{let o=a.target.value;C.value&&(o=w(o),a.target.value=o),$!=null&&$.value&&(o=o.slice(0,$.value)),r!=null&&r.value&&(s.value=-1),l("input",o)},x=a=>{l("focus",a)},U=()=>{(b==null?void 0:b.value).focus()},N=a=>{const o=P==null?void 0:P.value[`suggestion-${a}-label`];o&&o.scrollIntoView({block:"nearest",behavior:"auto"})},O=()=>{r!=null&&r.value&&q.value?(s.value++,s.value===r.value.length&&(s.value=0),N(s.value)):l("goDown")},M=()=>{r!=null&&r.value&&q.value?(s.value--,s.value<0&&(s.value=r.value.length-1),N(s.value)):l("goUp")},Q=()=>{l("tabKeydown")},j=()=>{l("escKeydown")},G=a=>{let o=a.target.value;C.value&&(A!=null&&A.value)&&(o=h(o,A.value),a.target.value=o),r!=null&&r.value&&D.value&&T(r.value[s.value]),l("blur",a)},L=a=>{v.value=!!(a!=null&&a.length)};ie(()=>r==null?void 0:r.value,L);const ee=z(()=>{const a={},o=(g==null?void 0:g.value)??{};return Object.keys(o).forEach(f=>a[`aria-${f}`]=g==null?void 0:g.value[f]),a}),T=a=>{I(),l("suggestionSelect",a)},I=(a=!0)=>{v.value=!1,a&&(s.value=-1)},D=z(()=>(r==null?void 0:r.value)&&s.value>=0&&s.value<r.value.length),q=z(()=>(r==null?void 0:r.value)&&r.value.length>0),H=a=>{if((d==null?void 0:d.value)==="number"&&["-"].includes(a.key)&&a.preventDefault(),a.key==="Escape"&&!q.value&&l("input",""),!!q.value)switch(a.key){case" ":D.value&&(I(),a.preventDefault(),l("closeSuggestions",a));break;case"Enter":r!=null&&r.value&&D.value&&T(r.value[s.value]),l("enterPressed");break;case"Tab":v.value&&I(!1),l("tabKeydown");break;case"Escape":v.value&&I(),l("closeSuggestions",a),l("escKeydown");break;case"ArrowDown":a.preventDefault(),O();break;case"ArrowUp":a.preventDefault(),M();break}};return v.value=!!((W=r==null?void 0:r.value)!=null&&W.length),{suggestionsLayerIsVisible:v,ariaAttributes:ee,suggestionFocus:s,hasSuggestions:q,checkMin:h,focus:x,sanitizeNumericonly:w,setFocus:U,goDown:O,goUp:M,tabKeydown:Q,escKeydown:j,blur:G,changeSuggestions:L,suggestionSelect:T,change:k,pressEnter:_,onKeydown:H}}var _e=(l=>(l.disabled="disabled",l.readonly="readonly",l.active="active",l))(_e||{}),Ie=(l=>(l.inside="inside",l.outside="outside",l))(Ie||{}),De=(l=>(l.simple="simple",l.multiple="multiple",l))(De||{}),oe=(l=>(l.default="default",l.compact="compact",l.regular="regular",l.small="small",l.medium="medium",l))(oe||{}),Be=(l=>(l.simple="simple",l.multi="multi",l))(Be||{}),Pe=(l=>(l.contains="contains",l.startswith="startswith",l))(Pe||{});const Ce=["id","for"],Ne=["id","role","readonly","disabled","autocomplete","maxlength","placeholder","name","type","min","max","aria-describedby","aria-invalid","aria-required","aria-controls","aria-expanded","aria-autocomplete","aria-activedescendant"],Me=["id","for"],Le={key:0,class:"input__unit"},Te=["title"],Fe={key:1},Ke=["id","aria-labelledby"],Re=["id","aria-selected","onMousedown"],ze={key:2,class:"input__message"},se=ue({__name:"Input",props:ne({dataError:{},aria:{},autocomplete:{},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean},error:{type:Boolean,default:!1},hideLabel:{type:Boolean,default:!1},icon:{},id:{},inputRefStr:{default:"input"},isQuiet:{type:Boolean,default:!1},label:{},labelId:{},labelPosition:{default:Y.inside},mandatory:{type:Boolean,default:!1},message:{},max:{},maxlength:{},min:{},name:{},numericOnly:{type:Boolean,default:!1},placeholder:{},readonly:{type:Boolean,default:!1},size:{default:oe.medium},success:{type:Boolean,default:!1},suggestions:{},type:{default:"text"},tooltipComponent:{},unit:{},value:{}},{modelValue:{},modelModifiers:{}}),emits:ne(["focus","goDown","blur","suggestionSelect","input","closeSuggestions"],["update:modelValue"]),setup(l,{emit:g}){var re;const t=l,Z=z(()=>({displayElement:"inline-flex",forcePlacement:!1,offset:8,placement:"top",tooltipStyle:"default",trigger:"hover",triggerIcon:"search-loupe",...t.tooltipComponent??{}})),$=g,A=$e,V=B(),r=B({}),{aria:b,max:d,inputRefStr:P,maxlength:s,min:v,numericOnly:C,suggestions:w,type:h}=de(t),{suggestionFocus:_,suggestionsLayerIsVisible:k,hasSuggestions:x,focus:U,blur:N,suggestionSelect:O,change:M,onKeydown:Q}=Ve($,b,d,P,s,v,C,w,V,h,r),j=pe(l,"modelValue"),G=B(null),L=B(""),ee=()=>{var e,i,F;return t.dataError&&((e=t.dataError)==null?void 0:e.active)&&((F=(i=t.dataError)==null?void 0:i.message)==null?void 0:F.length)},T=()=>!t.label&&t.placeholder?t.placeholder.toString():void 0,I=()=>{var e,i;return(e=t.dataError)!=null&&e.active&&((i=t.dataError)!=null&&i.message)?L.value:void 0},D=()=>{const e=G.value;L.value=e&&e.id?e.id:"error-message"},q=()=>{var e;return(e=t.dataError)!=null&&e.active?t.dataError.active:void 0},H=()=>t.mandatory?t.mandatory:void 0,W=()=>t.suggestions?"list":void 0,a=()=>t.suggestions?x.value?k==null?void 0:k.value:"false":!1,o=()=>t.suggestions?`${t.id}-listbox`:void 0,f=()=>{const{suggestions:e,id:i}=t;return!e||e.length===0||_.value===-1?null:`${i}-suggestion-${e[_.value].label}`};return me(()=>{D()}),fe(()=>{D()}),k.value=!!((re=t.suggestions)!=null&&re.length),(e,i)=>{var F;return u(),m("div",{class:y(["input",[`input--${e.labelPosition}`,{"input--small":e.size=="small"||e.size=="compact","input--medium":e.size=="medium"||e.size=="default","input--filled":!!e.value,"input--only":!e.placeholder&&!e.value}]])},[e.label&&e.labelPosition===n(Y).outside?(u(),m("label",{key:0,id:`${e.id}-label`||null,class:y(["input__label-tag",{"input__label-tag--disabled":e.disabled}]),for:e.id},[J("span",{class:y(["input__label input__label--outside",[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}]])},E(e.label),3)],10,Ce)):c("",!0),J("div",{class:y(["input__global",[{"input__global--disabled":e.disabled,"input__global--readonly":e.readonly,"input__global--isQuiet":e.isQuiet,"input__global--error":e.error||e.dataError&&e.dataError.active}]])},[ae(e.$slots,"inputLeft",{},void 0,!0),(u(),R(ce(e.label?"div":"label"),{class:y([{"input__wrapper--label":!e.label,"input__wrapper--outside":e.labelPosition===n(Y).outside},"input__wrapper"]),aria:T()},{default:X(()=>{var K,S;return[le(J("input",{id:e.id,ref_key:"inputRef",ref:V,"onUpdate:modelValue":i[0]||(i[0]=p=>j.value=p),role:n(w)?"combobox":null,readonly:e.readonly,disabled:e.disabled,autocomplete:e.autocomplete,maxlength:n(h)!=="number"?n(s):void 0,placeholder:e.placeholder,class:y(["input__field",[{"input__field--placeholder":e.placeholder&&e.placeholder.length>0,"input--disabled":e.disabled}]]),name:e.name,type:n(h)||"text",min:n(h)==="number"?n(v)||0:void 0,max:n(h)==="number"?n(d):void 0,"aria-describedby":I(),"aria-invalid":q()?q():void 0,"aria-required":H()?H():void 0,"aria-controls":o(),"aria-expanded":a(),"aria-autocomplete":(K=n(b))!=null&&K.ariaAutocomplete?n(b).ariaAutocomplete:W(),"aria-activedescendant":(S=n(b))!=null&&S.ariaAutocomplete?n(b).ariaAutocomplete:f(),onKeydown:i[1]||(i[1]=(...p)=>n(Q)&&n(Q)(...p)),onFocus:i[2]||(i[2]=(...p)=>n(U)&&n(U)(...p)),onInput:i[3]||(i[3]=(...p)=>n(M)&&n(M)(...p)),onBlur:i[4]||(i[4]=(...p)=>n(N)&&n(N)(...p))},null,42,Ne),[[ge,j.value]]),e.label&&e.labelPosition===n(Y).inside?(u(),m("label",{key:0,id:`${e.id}-label`||null,for:e.id,class:y(["input__label-tag",{"input__label-tag--disabled":e.disabled,"input__label-tag--readonly":e.readonly}])},[J("span",{class:y([[`input--${e.labelPosition}`,{"visually-hidden":e.hideLabel,"input--disabled":e.disabled,"input__label--mandatory":e.mandatory}],"input__label input__label--inside"])},E(e.label),3)],10,Me)):c("",!0)]}),_:1},8,["class","aria"])),ae(e.$slots,"inputRight",{},void 0,!0),e.unit?(u(),m("span",Le,[e.unit.description?(u(),m("abbr",{key:0,title:e.unit.description},E(e.unit.label),9,Te)):(u(),m("span",Fe,E(e.unit.label),1))])):c("",!0),e.icon&&!e.tooltipComponent&&!e.success?(u(),R(te,{key:1,class:"input__icon",name:e.icon},null,8,["name"])):c("",!0),e.tooltipComponent&&!e.success?(u(),R(Se,be({key:2,class:"small__popover"},Z.value),{tooltip:X(()=>[ae(e.$slots,"tooltipContent",{},void 0,!0)]),trigger:X(()=>[he(Ee,{class:"input__icon input__icon--tooltip",icon:Z.value.triggerIcon,type:"ghost"},null,8,["icon"])]),_:3},16)):c("",!0),e.success?(u(),R(te,{key:3,class:"input__icon input__icon--success",name:"action-check"})):c("",!0),n(w)?(u(),R(ve,{key:4,name:"slide-fade"},{default:X(()=>[n(k)?le((u(),m("ul",{key:0,id:`${e.id}-listbox`,role:"listbox",class:"suggestions","aria-labelledby":e.id},[(u(!0),m(qe,null,we(n(w),(K,S)=>(u(),m("li",{id:`${e.id}-suggestion-${e.label}`,key:`${e.id}-suggestion-${S}`,ref_for:!0,ref:p=>r.value[`suggestion-${S}-label`]=p,role:"option",class:y(["suggestions__item",{"suggestions__item--focused":S===n(_)}]),"aria-selected":S===n(_)?"true":null,onMousedown:p=>n(O)(K)},E(K.label),43,Re))),128))],8,Ke)),[[ke,n(k)]]):c("",!0)]),_:1})):c("",!0)],2),ee()?le((u(),m("p",{key:1,ref_key:"errorMessage",ref:G,class:"input__error-message","aria-live":"polite"},[ye(E(e.dataError?e.dataError.message:""),1)])),[[n(A),"input-error-message--"]]):c("",!0),e.message&&!((F=e.dataError)!=null&&F.active)?(u(),m("p",ze,E(e.message),1)):c("",!0)],2)}}}),Je=Ae(se,[["__scopeId","data-v-e0620855"]]);se.__docgenInfo={exportName:"default",displayName:"Input",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"DataErrorType"}},{name:"aria",required:!1,type:{name:`{
  [key: string]: string
}`}},{name:"autocomplete",required:!1,type:{name:"string"}},{name:"autofocus",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"error",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"hideLabel",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"icon",required:!1,type:{name:"string"}},{name:"id",required:!0,type:{name:"string"}},{name:"inputRefStr",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'input'"}},{name:"isQuiet",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelId",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"mandatory",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"message",required:!1,type:{name:"string"}},{name:"max",required:!1,type:{name:"number"}},{name:"maxlength",required:!1,type:{name:"number"}},{name:"min",required:!1,type:{name:"number"}},{name:"name",required:!0,type:{name:"string"}},{name:"numericOnly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"placeholder",required:!1,type:{name:"string"}},{name:"readonly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"size",required:!1,type:{name:"Size"},defaultValue:{func:!1,value:"Size.medium"}},{name:"success",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"suggestions",required:!1,type:{name:"Array",elements:[{name:"SuggestionType"}]}},{name:"type",required:!1,type:{name:"InputType"},defaultValue:{func:!1,value:"'text'"}},{name:"tooltipComponent",required:!1,type:{name:"TooltipProps"}},{name:"unit",required:!1,type:{name:"UnitProp"}},{name:"value",required:!1,type:{name:"union",elements:[{name:"string"},{name:"number"}]}}],events:[{name:"focus"},{name:"goDown"},{name:"blur"},{name:"suggestionSelect"},{name:"input"},{name:"closeSuggestions"}],slots:[{name:"inputLeft"},{name:"inputRight"},{name:"tooltipContent"}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/TextInput/Default/Input.vue"]};export{_e as A,Ie as L,Pe as S,Be as T,De as a,oe as b,Je as c,Ve as u};
