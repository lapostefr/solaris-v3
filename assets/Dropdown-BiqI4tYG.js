import{d as ce,o as d,e as v,F as R,H as J,y as k,B as f,v as _,m as Le,r as h,a as Fe,c as C,l as Ve,t as W,b as B,J as M,I as A,z as ee,G as Ce,Q as Ae,L as de,u as N,x as ue,C as Ne,q as qe}from"./vue.esm-bundler-BIhSTzsT.js";import{S as ae}from"./Icon-DZ5u0r7n.js";import{_ as pe}from"./Flag-Dr1gNV3C.js";import{S as Pe}from"./Picture-DIMOpAs8.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as Ue}from"./Input-BxxbZeE9.js";import{o as De}from"./index-BaiQJBqJ.js";import{f as Oe}from"./generateId-CVaf2GGW.js";import{L as ve}from"./types-DKXD8uiR.js";const ze=["id","aria-live"],me=ce({__name:"Message",props:{dataError:{},error:{},id:{},message:{}},setup(p){return(l,K)=>{var $,c,j,s,m,U,I,L,r,t,F,D,T;return($=l.dataError)!=null&&$.active&&((c=l.dataError)!=null&&c.message)||l.error||l.message?(d(),v("p",{key:0,id:(j=l.dataError)!=null&&j.active&&((s=l.dataError)!=null&&s.message)||l.error?`error-message--${l.id}`:`message--${l.id}`,class:_([{"lp-message":l.message&&!((m=l.dataError)!=null&&m.active)},{"lp-message--error":((U=l.dataError)==null?void 0:U.active)&&((I=l.dataError)==null?void 0:I.message)}]),"aria-live":(L=l.dataError)!=null&&L.active&&((r=l.dataError)!=null&&r.message)||l.error?"polite":void 0},[(t=l.dataError)!=null&&t.active&&((F=l.dataError)!=null&&F.message)||l.error?(d(),v(R,{key:0},[J(k((D=l.dataError)==null?void 0:D.message),1)],64)):f("",!0),l.message&&!((T=l.dataError)!=null&&T.active)?(d(),v(R,{key:1},[J(k(l.message),1)],64)):f("",!0)],10,ze)):f("",!0)}}}),Be=fe(me,[["__scopeId","data-v-7d7da1ff"]]);me.__docgenInfo={exportName:"default",displayName:"Message",description:"",tags:{},props:[{name:"dataError",required:!1,type:{name:"ErrorMessage"}},{name:"error",required:!1,type:{name:"string"}},{name:"id",required:!0,type:{name:"string"}},{name:"message",required:!1,type:{name:"string"}}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/Message/Message.vue"]};var S=(p=>(p.DEFAULT="default",p.PREVIOUS="previous",p.NEXT="next",p))(S||{}),ye=(p=>(p.MEDIUM="medium",p.SMALL="small",p))(ye||{}),X=(p=>(p.CONTAINS="contains",p.STARTWITH="startswith",p))(X||{}),y=(p=>(p.SIMPLE="simple",p.MULTI="multi",p))(y||{});const Re=["id"],Ke={key:0,class:"lp-dropdown__flag-wrapper"},je=["id"],He=["tabindex","aria-expanded","aria-controls","aria-labelledby","aria-describedby","aria-invalid","aria-activedescendant","onKeydown"],Ge={key:1,class:"lp-dropdown__placeholder"},We=["id","role","aria-multiselectable","aria-labelledby"],Xe={key:0,style:{padding:"8px"}},Je={key:1,class:"lp-dropdown__overflow--empty"},Qe=["role","aria-multiselectable","aria-labelledby"],Ye=["role","aria-labelledby"],Ze=["id"],xe=["id","aria-selected","aria-disabled","onClick"],be=ce({__name:"Dropdown",props:Le({dataError:{},disabled:{type:Boolean,default:!1},icon:{default:"arrow-bottom"},label:{},labelPosition:{default:ve.inside},lazyload:{type:Boolean,default:!0},listboxHeight:{default:300},loadFlags:{type:Boolean,default:!1},mandatory:{type:Boolean},message:{},name:{},options:{},placeholder:{default:"Sélectionnez une option"},readonly:{type:Boolean,default:!1},searchField:{type:Boolean,default:!1},searchFieldMode:{default:X.CONTAINS},selectionType:{default:y.SIMPLE},size:{default:ye.MEDIUM}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const l=p,K=qe(),$=h(!1),c=h(!1),j=h(!1),s=Fe(p,"modelValue"),m=h(""),U=h(null),I=h(null),L=h(null),r=h(0),t=h(""),F=h({}),D=h(null),T=h(!1);De(U,()=>E());const Q=()=>{c.value=!c.value,r.value=-1,c.value&&setTimeout(()=>{var e,a,o;se(),l.selectionType===y.MULTI&&s.value&&((e=s.value)==null?void 0:e.length)>0&&(r.value=(a=V(s.value[0]))==null?void 0:a.index),l.selectionType===y.SIMPLE&&s.value&&((o=s.value)==null?void 0:o.length)>0&&(r.value=V(s.value).index),q(S.DEFAULT)},200)},E=e=>{var a;c.value=!1,T.value=!1,e&&((a=D.value)==null||a.focus())},ge=()=>{var e,a;m.value&&(r.value=-1),m.value||(r.value=-1),l.selectionType===y.MULTI&&s.value&&m.value.length===0&&((e=s.value)==null?void 0:e.length)>0&&(r.value=V(s.value[0]).index),l.selectionType===y.SIMPLE&&s.value&&m.value.length===0&&((a=s.value)==null?void 0:a.length)>0&&(r.value=V(s.value).index),q(S.DEFAULT)},le=()=>{m.value?m.value="":E(!0)},he=()=>{if(we(g.value)){if(r.value<0){E(!0);return}const a=Y(g.value,r.value).value;m.value="",x(V(a))}else E(!0),m.value=""},we=e=>e.some(a=>a.optionsList.some(o=>!o.disabled)),Y=(e,a)=>e.flatMap(o=>o.optionsList).find(o=>o.index===a),_e=e=>{if(!c.value){Q();return}q(e)},q=e=>{const o=$e(g.value),b=e===S.NEXT,w=e===S.PREVIOUS;if(c.value){if(l.readonly)return;T.value=!0,b&&r.value<o&&(r.value+=1),w&&r.value>-1&&(r.value-=1),b&&r.value===o&&(r.value=0),w&&r.value===-1&&(r.value=o-1),setTimeout(()=>{T.value&&Ee()},200)}else E()},Ee=()=>{if(ne.value||te.value){const e=F.value[t.value],a=F.value[`${t.value}-option-${r.value}`];e.scrollTo({top:(a==null?void 0:a.offsetTop)-80,left:0,behavior:"smooth"})}},P=e=>{var a;if(l.selectionType===y.MULTI&&Array.isArray(H.value))return!!((a=s.value)!=null&&a.includes(e));if(l.selectionType===y.SIMPLE)return s.value===e},H=C(()=>{var e;return l.selectionType===y.SIMPLE&&s.value?(e=V(s.value))==null?void 0:e.label:l.selectionType===y.MULTI&&Array.isArray(s.value)?s.value.map(a=>{var o;return(o=V(a))==null?void 0:o.label}):l.selectionType===y.SIMPLE&&!s.value?"":[]}),O=C(()=>{var e;return l.selectionType===y.MULTI&&Array.isArray(H.value)?(e=H.value)==null?void 0:e.join(", "):H.value}),Te=C(()=>{var e,a;if((e=l.dataError)!=null&&e.active&&((a=l.dataError)!=null&&a.message))return`error-message--${t.value}`;if(l.message)return`message--${t.value}`}),oe=()=>{var e;return(e=l.dataError)!=null&&e.active?l.dataError.active:void 0},Se=()=>l.mandatory?l.mandatory:void 0,Z=e=>{const a=e.match(/\(([^)]+)\)/);return a?a[1]:void 0},re=e=>{c.value||Q(),r.value>=0&&x(e)},x=e=>{let a=null;if(!(c.value&&!e)&&c.value){se();const o=e.value;if(l.readonly)return;l.loadFlags&&(I.value=e.flag,L.value=L.value===Z(o)?null:Z(o)),Ie.value==="multi"?(s.value===null&&(a=[o]),P(o)&&Array.isArray(s.value)&&(a=s.value.filter(b=>b!==o)),!P(o)&&Array.isArray(s.value)&&(a=[...s.value,o])):a=o,s.value=a,r.value=e.index,l.selectionType==="simple"&&E()}},se=()=>{var e;l.searchField&&c.value&&(j.value=!0,((e=K==null?void 0:K.proxy)==null?void 0:e.$refs).search.$refs.inputRef.focus())},ke=e=>r.value===e&&c.value&&T.value,Me=(e,a)=>{const o=e.flatMap(({optionsList:u})=>u).find(({label:u})=>u===a);if(!o)return null;const{flag:{name:b,alt:w}={},phoneCode:i}=o;return{name:b,alt:w,phoneCode:i}},$e=e=>e.reduce((a,o)=>{const b=o.optionsList.filter(w=>!w.disabled).length;return a+b},0),Ie=C(()=>l.loadFlags===!0?"simple":l.selectionType),g=C(()=>{let e=0,a=0;const o=l.searchFieldMode===X.CONTAINS?m.value:"",b=l.searchFieldMode===X.STARTWITH?m.value:"",w=l.options.filter(i=>i.label.toLowerCase().includes(String(o).toLowerCase())).filter(i=>i.label.toLowerCase().startsWith(b.toLowerCase())).reduce((i,u)=>{const n=u.groupName||"Sans groupe",G=u.disabled?null:e++;i[n]?a++:(i[n]=[],a=0);let z="";return l.loadFlags&&(z=Z(u.value)),i[n].push({index:G,subIndex:a,label:u.label,value:u.value,color:u.color,disabled:u.disabled,flag:u.flag,icon:u.icon,image:u.image,checkbox:u.checkbox,phoneCode:z}),i},{});return Object.entries(w).map(([i,u])=>({groupName:i,optionsList:u}))}),V=e=>g.value.flatMap(a=>a.optionsList).find(a=>a.value===e),ne=C(()=>{if(T.value&&l.searchField&&c.value&&g.value.length>0&&r.value>=0)return`${t.value}-option-${r.value}`}),te=C(()=>{if(T.value&&!l.searchField&&c.value&&g.value.length>0&&r.value>=0)return`${t.value}-option-${r.value}`});return Ve(()=>{const e=l.selectionType===y.MULTI;$.value=l.options.some(o=>"groupName"in o);const a=Me(g.value,"France (+33)");I.value={name:a==null?void 0:a.name,alt:a==null?void 0:a.alt},L.value=a==null?void 0:a.phoneCode,t.value=Oe("lp-dropdown--"),e&&(s.value=[])}),(e,a)=>{var o,b,w;return d(),v("div",{ref_key:"targetDropdown",ref:U},[W("div",{class:_([`lp-dropdown__wrapper--${e.size}`,"lp-dropdown__wrapper"])},[e.labelPosition==="outside"?(d(),v("div",{key:0,id:`${t.value}-label`,class:_([{"lp-dropdown__label--mandatory":e.mandatory},"lp-dropdown__label lp-dropdown__label--outside"])},k(e.label),11,Re)):f("",!0),W("div",{class:_(["lp-dropdown",[{"lp-dropdown--readonly":e.readonly},{"lp-dropdown--disabled":e.disabled},{"lp-dropdown--is-open":c.value},{"lp-dropdown--error":(o=e.dataError)==null?void 0:o.active},{"lp-dropdown--label-is-inside":e.labelPosition==="inside"&&(!!e.placeholder||!!O.value)},{"lp-dropdown--label-alone":!e.placeholder&&!O.value&&e.labelPosition==="inside"}]])},[e.loadFlags?(d(),v("div",Ke,[I.value?(d(),B(pe,{key:0,class:"lp-dropdown__flag",country:I.value},null,8,["country"])):f("",!0),J(" "+k(L.value),1)])):(d(),v(R,{key:1},[e.labelPosition==="inside"?(d(),v("div",{key:0,id:`${t.value}-label`,class:_([{"lp-dropdown__label--mandatory":e.mandatory},"lp-dropdown__label lp-dropdown__label--inside"])},k(e.label),11,je)):f("",!0),W("div",{ref_key:"dropdownRef",ref:D,class:"lp-dropdown__combobox",role:"combobox","aria-haspopup":"listbox",tabindex:e.disabled?void 0:0,"aria-expanded":`${c.value&&g.value.length>0}`,"aria-controls":t.value,"aria-labelledby":`${t.value}-label`,"aria-describedby":Te.value,"aria-invalid":oe()?oe():void 0,"aria-required":Se,"aria-activedescendant":te.value,onKeydown:[M(le,["esc"]),M(E,["tab"]),M(A(E,["shift","exact"]),["tab"]),a[0]||(a[0]=M(A(i=>re(Y(g.value,r.value)),["prevent"]),["enter"])),a[1]||(a[1]=M(A(i=>_e(N(S).NEXT),["prevent"]),["down"])),a[2]||(a[2]=M(A(i=>q(N(S).PREVIOUS),["prevent"]),["up"])),a[3]||(a[3]=M(A(i=>re(Y(g.value,r.value)),["prevent"]),["space"]))],onClick:A(Q,["prevent"])},[O.value?(d(),v("span",{key:0,class:_(["lp-dropdown__value",{"lp-dropdown__value--error":(b=e.dataError)==null?void 0:b.active}])},k(O.value),3)):f("",!0),e.placeholder&&!O.value?(d(),v("span",Ge,k(e.placeholder),1)):f("",!0)],40,He)],64)),ee(ae,{class:_(["lp-dropdown__arrow",{"lp-dropdown__arrow--error":(w=e.dataError)==null?void 0:w.active}]),name:e.icon},null,8,["class","name"])],2),Ce(W("div",{id:t.value,class:"lp-dropdown__listbox",style:de([{"max-height":e.listboxHeight+"px"}]),role:e.searchField?void 0:"listbox","aria-multiselectable":!e.searchField&&e.selectionType===N(y).MULTI||void 0,"aria-labelledby":e.searchField?void 0:`${t.value}-label`},[e.searchField?(d(),v("div",Xe,[ee(Ue,{id:`${t.value}-search`,ref:"search",modelValue:m.value,"onUpdate:modelValue":a[4]||(a[4]=i=>m.value=i),class:"dropdown__search",name:"nameSearch",type:"text",label:"Rechercher","label-position":N(ve).inside,icon:"search-loupe","is-quiet":"",autocomplete:"off",autofocus:!0,size:e.size||void 0,aria:{ariaDescendant:ne.value||"",ariaAutocomplete:"list"},onInput:ge,onKeydown:M(A(E,["shift"]),["tab"]),onEscKeydown:le,onTabKeydown:E,onEnterPressed:he,onGoUp:a[5]||(a[5]=i=>q(N(S).PREVIOUS)),onGoDown:a[6]||(a[6]=i=>q(N(S).NEXT))},null,8,["id","modelValue","label-position","size","aria","onKeydown"])])):f("",!0),g.value.length===0?(d(),v("div",Je," Aucun Résultat ")):(d(),v("div",{key:2,ref:i=>F.value[`${t.value}`]=i,class:_(["lp-dropdown__overflow",{"lp-dropdown__overflow--readonly":e.readonly}]),role:e.searchField?"listbox":void 0,"aria-multiselectable":!!(e.searchField&&e.selectionType===N(y).MULTI)||void 0,"aria-labelledby":e.searchField?`${t.value}-label ${t.value}-search-label`:void 0},[(d(!0),v(R,null,ue(g.value,(i,u)=>(d(),v("ul",{key:u,class:"lp-dropdown__group",role:$.value?"group":void 0,"aria-labelledby":$.value?`${t.value}-group-${u}`:void 0},[$.value?(d(),v("li",{key:0,id:`${t.value}-group-${u}`,class:_(["lp-dropdown__group-name",{"lp-dropdown__group-name--border":u!==0}]),role:"presentation"},k(i.groupName),11,Ze)):f("",!0),(d(!0),v(R,null,ue(i.optionsList,(n,G)=>{var z;return d(),v("li",{key:`${u}-${G}`,id:`${t.value}-option-${n.disabled?u+"-"+G:n.index}`,ref_for:!0,ref:ie=>F.value[`${t.value}-option-${n.index}`]=ie,class:_(["lp-dropdown__option",[{"lp-dropdown__option--selected":P(n.value)},{"lp-dropdown__option--disabled":n.disabled},{"lp-dropdown__option--focused":ke(n.index)}]]),role:"option","aria-selected":P(n.value),"aria-disabled":n.disabled?n.disabled:void 0,onClick:ie=>x(n)},[n.color?(d(),v("span",{key:0,class:"lp-dropdown__color",style:de({background:n.color})},null,4)):f("",!0),n.icon?(d(),B(ae,{key:1,name:n.icon,class:"lp-dropdown__icon"},null,8,["name"])):f("",!0),typeof n.image=="object"&&n.image!==null?(d(),B(Pe,Ne({key:2,class:"lp-dropdown__image",ref_for:!0},n.image),null,16)):f("",!0),e.loadFlags&&n.flag?(d(),B(pe,{key:3,class:"lp-dropdown__flag",country:{name:(z=n.flag)==null?void 0:z.name,alt:n.flag.alt},lazyload:""},null,8,["country"])):f("",!0),n.checkbox?(d(),v("span",{key:4,class:_([{checked:P(n.value)},"lp-dropdown__checkbox lp-dropdown__checkbox--default checkbox__custom"])},null,2)):f("",!0),J(" "+k(n.label)+" ",1),P(n.value)?(d(),B(ae,{key:5,name:"action-check-switch",class:"lp-dropdown__option--checked",title:"option sélectionnée"})):f("",!0)],10,xe)}),128))],8,Ye))),128))],10,Qe))],12,We),[[Ae,c.value]])],2),ee(Be,{id:t.value,message:e.message,"data-error":e.dataError},null,8,["id","message","data-error"])],512)}}}),da=fe(be,[["__scopeId","data-v-bde40add"]]);be.__docgenInfo={exportName:"default",displayName:"Dropdown",description:"",tags:{},props:[{name:"dataError",required:!0,type:{name:"ErrorMessage"}},{name:"disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"icon",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'arrow-bottom'"}},{name:"label",required:!1,type:{name:"string"}},{name:"labelPosition",required:!1,type:{name:"LabelPosition"},defaultValue:{func:!1,value:"LabelPosition.inside"}},{name:"lazyload",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"listboxHeight",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"300"}},{name:"loadFlags",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"mandatory",required:!1,type:{name:"boolean"}},{name:"message",required:!1,type:{name:"string"}},{name:"name",required:!0,type:{name:"string"}},{name:"options",required:!0,type:{name:"Options"}},{name:"placeholder",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Sélectionnez une option'"}},{name:"readonly",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchField",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchFieldMode",required:!1,type:{name:"DropdownSearchMode"},defaultValue:{func:!1,value:"DropdownSearchMode.CONTAINS"}},{name:"selectionType",required:!1,type:{name:"DropdownSelectionType"},defaultValue:{func:!1,value:"DropdownSelectionType.SIMPLE"}},{name:"size",required:!1,type:{name:"union",elements:[{name:"DropdownSizes"},{name:"undefined"}]},defaultValue:{func:!1,value:"DropdownSizes.MEDIUM"}},{name:"madatory",defaultValue:{func:!1,value:"false"}}],sourceFiles:["/Users/jchourdeaux/workspace/projects/solaris/vue3/src/components/atoms/Dropdown/New/Dropdown.vue"]};export{X as D,da as S,y as a,ye as b};
